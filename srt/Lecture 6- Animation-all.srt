1
00:00:00,121 --> 00:00:02,704
 （柔和的音乐） 

2
00:00:04,235 --> 00:00:06,250
 -[旁白]斯坦福大学

3
00:00:08,500 --> 00:00:12,012
 -[讲师] CS193P 2020年春季。 

4
00:00:12,012 --> 00:00:13,952
这是第六讲

5
00:00:13,952 --> 00:00:18,800
今天我要介绍两个简短的主题， 

6
00:00:18,800 --> 00:00:21,603
因为他们是次要话题，所以简短

7
00:00:21,603 --> 00:00:22,750
像财产观察员一样

8
00:00:22,949 --> 00:00:25,390
否则我只会深入了解其中的细节

9
00:00:25,390 --> 00:00:26,940
就像@State。 

10
00:00:26,940 --> 00:00:29,070
然后我们今天将探讨我们的主要主题， 

11
00:00:29,070 --> 00:00:31,881
这是动画，这就是我们的演示

12
00:00:31,881 --> 00:00:32,899
所有关于。 

13
00:00:32,899 --> 00:00:34,369
因此，让我们开始吧。 

14
00:00:34,369 --> 00:00:37,919
物业观察员对此只作简单介绍。 

15
00:00:37,920 --> 00:00:39,359
我想让你明白的主要事情

16
00:00:39,359 --> 00:00:43,939
关于财产观察员，这只是观看变量的一种方法

17
00:00:43,939 --> 00:00:47,280
并查看何时更改，然后采取一些措施。 

18
00:00:47,280 --> 00:00:49,164
现在，很多时候人们感到困惑

19
00:00:49,164 --> 00:00:51,722
在属性观察者和计算变量之间。 

20
00:00:51,722 --> 00:00:53,734
他们是完全不同的东西， 

21
00:00:53,734 --> 00:00:55,869
彼此无关。 

22
00:00:55,869 --> 00:00:57,843
在这里，我有这个var isFaceUp 

23
00:00:57,844 --> 00:01:00,143
上面有一个属性观察器。 

24
00:01:00,143 --> 00:01:02,269
该var存储在内存中， 

25
00:01:02,270 --> 00:01:04,493
无论如何它都不是计算的变量。 

26
00:01:05,689 --> 00:01:08,953
在财产观察员那里，我正在看

27
00:01:08,953 --> 00:01:11,542
因为何时设置isFaceUp 

28
00:01:11,742 --> 00:01:14,239
如果设置了新值， 

29
00:01:14,239 --> 00:01:16,809
换句话说，事情会面朝上， 

30
00:01:16,810 --> 00:01:18,310
那么例如在这种情况下， 

31
00:01:18,310 --> 00:01:20,280
就像在我们的“记忆游戏”中一样

32
00:01:20,280 --> 00:01:24,370
我要开始使用奖金时间，开始小馅饼

33
00:01:24,370 --> 00:01:26,730
我们的表情符号后面开始滴答作响。 

34
00:01:26,730 --> 00:01:30,759
如果isFaceUp即将设置为false， 

35
00:01:30,959 --> 00:01:32,887
我将停止使用奖励时间。 

36
00:01:32,887 --> 00:01:35,219
所以newValue在这里是紫色的东西

37
00:01:35,219 --> 00:01:37,045
那是只出现的特殊变种

38
00:01:37,046 --> 00:01:38,516
在遗嘱中设置在这里。 

39
00:01:38,716 --> 00:01:40,260
当然，还有一个didSet 

40
00:01:40,260 --> 00:01:41,863
我将在演示中使用它，只是有所不同， 

41
00:01:42,063 --> 00:01:45,962
在那个oldValue里面是什么值

42
00:01:45,962 --> 00:01:47,452
在它改变之前。 

43
00:01:48,290 --> 00:01:51,262
好了，对于下一个主题，我想解释一下

44
00:01:51,262 --> 00:01:54,459
关于发生的事情并不太明显

45
00:01:54,459 --> 00:01:56,969
我之前还没有真正谈论过

46
00:01:56,969 --> 00:02:01,501
但是您的视图（例如CardView）和EmojiGameView， 

47
00:02:01,501 --> 00:02:03,712
它们都是只读的。 

48
00:02:04,689 --> 00:02:07,046
换句话说，如果您在顶部查看

49
00:02:07,046 --> 00:02:10,788
以及您设备上的所有SwiftUI，一应俱全。 

50
00:02:10,788 --> 00:02:12,619
您可能会认为这是不可能的。 

51
00:02:12,620 --> 00:02:13,840
我们如何才能不改变观点

52
00:02:13,840 --> 00:02:16,069
观点一直在变化。 

53
00:02:16,069 --> 00:02:17,909
但是我们不是只读的

54
00:02:17,909 --> 00:02:21,949
这意味着拥有存储的var 

55
00:02:21,949 --> 00:02:23,643
在我们看来，这是没有用的。 

56
00:02:23,644 --> 00:02:25,084
反正我们不能设置它的值

57
00:02:25,084 --> 00:02:28,393
唯一的例外是设置的变量

58
00:02:28,393 --> 00:02:30,129
当你创建

59
00:02:30,129 --> 00:02:31,430
风景。 

60
00:02:31,430 --> 00:02:33,189
就像在CardView中，我们有isFaceUp， 

61
00:02:33,189 --> 00:02:35,109
它是由创建它的人设置的

62
00:02:35,110 --> 00:02:38,080
因此将其作为变种是有意义的。 

63
00:02:38,080 --> 00:02:39,435
但是其他没有这样设置的东西

64
00:02:39,634 --> 00:02:41,009
它可能也是一个让。 

65
00:02:41,009 --> 00:02:42,385
或者如果它绝对是计算的var 

66
00:02:42,385 --> 00:02:44,521
只想成为一个只读的计算变量， 

67
00:02:44,521 --> 00:02:48,322
到目前为止，这是我们唯一的一种计算型var。 

68
00:02:48,323 --> 00:02:49,960
为什么？ 

69
00:02:49,960 --> 00:02:51,661
为什么它们都是只读的？ 

70
00:02:51,661 --> 00:02:54,110
好吧，函数式编程

71
00:02:54,110 --> 00:02:55,860
一件令人敬畏的事情， 

72
00:02:55,860 --> 00:02:58,430
关于可变性很清楚， 

73
00:02:58,430 --> 00:03:00,360
什么时候可以更改？ 

74
00:03:00,360 --> 00:03:02,689
好的设计有很大的溢价

75
00:03:02,889 --> 00:03:05,039
使事情变得一成不变。 

76
00:03:05,039 --> 00:03:05,959
当事物是不可变的

77
00:03:05,959 --> 00:03:08,193
没有人在幕后改变它

78
00:03:08,193 --> 00:03:11,810
或做一些破坏可证明性的事情

79
00:03:11,810 --> 00:03:13,721
您的代码实际有效。 

80
00:03:13,721 --> 00:03:17,180
而且，当事物是可变的或不可变的时， 

81
00:03:17,180 --> 00:03:18,856
当他们改变时，你知道他们在改变， 

82
00:03:19,056 --> 00:03:20,232
您可以为此做些事情。 

83
00:03:20,233 --> 00:03:22,932
这就是我们可以在上面使用这些属性观察器的方式

84
00:03:22,932 --> 00:03:25,963
价值类型如此有效。 

85
00:03:25,963 --> 00:03:27,822
对于SwiftUI， 

86
00:03:27,822 --> 00:03:30,501
它想知道事情何时发生变化， 

87
00:03:30,501 --> 00:03:33,014
当他们改变的时候，它想做的最少

88
00:03:33,014 --> 00:03:37,930
用正确的视图替换视图层次结构的工作。 

89
00:03:37,930 --> 00:03:39,735
实际上，这就是正在发生的事情， 

90
00:03:39,735 --> 00:03:41,520
如果isFaceUp 

91
00:03:41,520 --> 00:03:42,810
变化， 

92
00:03:42,810 --> 00:03:46,375
它制作了一个新的CardView。 

93
00:03:46,375 --> 00:03:48,492
这就是所有工作的方式。 

94
00:03:48,492 --> 00:03:51,610
这实际上对你来说是一件很棒的事

95
00:03:51,610 --> 00:03:52,956
您可能不这样认为。 

96
00:03:52,956 --> 00:03:55,479
您不能拥有读写var的事实真的很好

97
00:03:55,479 --> 00:03:57,793
因为记住你的观点

98
00:03:57,794 --> 00:03:59,723
应该是无国籍的。 

99
00:03:59,723 --> 00:04:02,311
他们应该一直在反思

100
00:04:02,510 --> 00:04:04,000
模型的状态是什么。 

101
00:04:04,000 --> 00:04:06,527
状态即在模型中。 

102
00:04:06,527 --> 00:04:09,626
因此，您不需要自己的任何状态，对吗？ 

103
00:04:09,627 --> 00:04:12,563
无需将它们设置为只读。 

104
00:04:13,539 --> 00:04:15,792
好吧，主要是

105
00:04:15,792 --> 00:04:17,841
并非100％正确。 

106
00:04:17,841 --> 00:04:21,180
因此，让我们谈谈Views何时确实需要某种状态。 

107
00:04:21,180 --> 00:04:23,509
还有一些罕见的时期

108
00:04:23,509 --> 00:04:26,838
当它确实需要状态时，它总是临时的。 

109
00:04:26,838 --> 00:04:28,877
视图从不长期存储

110
00:04:28,877 --> 00:04:30,798
那将永远存在于您的模型中。 

111
00:04:30,798 --> 00:04:32,436
这只是暂时的情况

112
00:04:32,437 --> 00:04:34,750
您可能需要一点存储空间的地方。 

113
00:04:34,750 --> 00:04:37,283
您可能需要哪些临时存储示例？ 

114
00:04:37,283 --> 00:04:40,329
好吧，您可能会进入“编辑模式”， 

115
00:04:40,529 --> 00:04:42,669
您要从用户那里收集一些数据的地方

116
00:04:42,670 --> 00:04:45,870
并收集起来，然后调用意图更改模型

117
00:04:45,870 --> 00:04:47,990
使用您收集的数据或其他方式。 

118
00:04:47,990 --> 00:04:50,759
所以只是暂时的，您正在收集它。 

119
00:04:50,759 --> 00:04:53,579
您可能正在显示另一个视图， 

120
00:04:53,579 --> 00:04:55,199
其他一些正在收集数据的视图

121
00:04:55,199 --> 00:04:57,539
例如TextField或Picker， 

122
00:04:57,540 --> 00:04:59,829
就像我们在广场上的那个帖子中看到的一样

123
00:05:00,029 --> 00:05:02,259
或具有作为警报的视图， 

124
00:05:02,259 --> 00:05:03,649
您正在向用户发出警报， 

125
00:05:03,649 --> 00:05:05,689
你只是想跟踪它上升的事实

126
00:05:05,689 --> 00:05:06,949
直到用户点击“取消”， 

127
00:05:06,949 --> 00:05:08,149
然后您会想，“啊，它不见了”。 

128
00:05:08,149 --> 00:05:09,799
因此，您只是个布尔人， 

129
00:05:09,800 --> 00:05:11,240
那个事情是否发生

130
00:05:11,240 --> 00:05:15,050
那种很小的临时数据或动画。 

131
00:05:15,050 --> 00:05:17,480
动画只反映过去的事物。 

132
00:05:17,480 --> 00:05:18,617
因此，如果您想制作某种动画

133
00:05:18,617 --> 00:05:20,719
与当下， 

134
00:05:20,720 --> 00:05:23,310
您必须有一个小var，这就是未来。 

135
00:05:23,310 --> 00:05:25,379
因此您可以将var设置为将来

136
00:05:25,379 --> 00:05:28,490
动画将开始朝着未来发展。 

137
00:05:28,490 --> 00:05:30,230
希望您将未来设定为

138
00:05:30,230 --> 00:05:32,069
最终将是同样的事情

139
00:05:32,069 --> 00:05:33,370
在你的永久状态。 

140
00:05:33,370 --> 00:05:35,108
但是你只用那个变量

141
00:05:35,108 --> 00:05:36,579
在动画发生的时间

142
00:05:36,579 --> 00:05:38,769
我们知道动画很短， 

143
00:05:38,769 --> 00:05:40,024
他们只是暂时的东西。 

144
00:05:40,024 --> 00:05:43,322
动画，这些临时存储的另一种情况， 

145
00:05:43,322 --> 00:05:45,832
我们将在演示中看到这样做。 

146
00:05:45,833 --> 00:05:50,660
实际上，我们可以在只读视图中创建存储

147
00:05:50,660 --> 00:05:53,100
我们通过标记一个var 

148
00:05:53,100 --> 00:05:56,000
使用@State存储我们想要的信息。 

149
00:05:56,199 --> 00:05:57,971
所以@State你知道， 

150
00:05:57,971 --> 00:06:00,589
像@ Published，@ ObservedObject， 

151
00:06:00,589 --> 00:06:02,361
这是一个属性包装器。 

152
00:06:02,362 --> 00:06:06,310
请注意，我已将此状态标记为私有。 

153
00:06:06,310 --> 00:06:09,341
那是因为国家对你是私人的

154
00:06:09,341 --> 00:06:12,930
这只是您在View中使用的临时存储， 

155
00:06:12,930 --> 00:06:14,720
没有其他人会看着它。 

156
00:06:14,720 --> 00:06:16,560
因此，将其标记为私有，只是提醒自己， 

157
00:06:16,560 --> 00:06:18,699
是的，这是一个私人国家

158
00:06:18,699 --> 00:06:20,259
那里的临时状态。 

159
00:06:20,259 --> 00:06:23,649
当然，这个东西的类型可以是任何类型， 

160
00:06:23,649 --> 00:06:26,229
您基本上是在这里声明一个变量， 

161
00:06:26,230 --> 00:06:27,504
那将是可读写的。 

162
00:06:27,504 --> 00:06:30,903
但是它可以是您想要的任何类型。 

163
00:06:30,903 --> 00:06:33,122
要了解有关此状态变量的一件重要事情， 

164
00:06:33,322 --> 00:06:36,411
如果我更改它，这是暂时的， 

165
00:06:36,411 --> 00:06:38,373
我的视图可能会重绘。 

166
00:06:38,374 --> 00:06:41,132
如果我的观点是暂时的， 

167
00:06:41,331 --> 00:06:44,694
它以某种方式改变，使我的身体变得不同

168
00:06:44,694 --> 00:06:46,043
它会被重画。 

169
00:06:46,043 --> 00:06:48,689
和ObservedObject一样，对吗？ 

170
00:06:48,689 --> 00:06:50,529
我们在ViewModel上观察到对象。 

171
00:06:50,529 --> 00:06:52,479
如果ViewModel以某种方式更改

172
00:06:52,480 --> 00:06:54,560
这将使我们的视图看起来与众不同。 

173
00:06:54,560 --> 00:06:56,939
将与状态重新绘制相同的东西

174
00:06:56,939 --> 00:06:58,822
这实际上是它的一个很酷的功能。 

175
00:06:58,822 --> 00:07:01,750
此@State var的空间

176
00:07:01,750 --> 00:07:05,060
将在堆中分配。 

177
00:07:05,060 --> 00:07:07,204
它必须，不能在您的视图中留出空间， 

178
00:07:07,204 --> 00:07:08,680
您的视图是只读的

179
00:07:08,680 --> 00:07:11,019
所以基本上是在做一个指针

180
00:07:11,019 --> 00:07:13,319
所以你的视图里面有一个指针

181
00:07:13,319 --> 00:07:15,240
它指向堆。 

182
00:07:15,240 --> 00:07:17,180
当您的视图重建时， 

183
00:07:17,180 --> 00:07:19,139
导致您的View一直在重建， 

184
00:07:19,339 --> 00:07:21,529
当isFaceUp在CardView中更改时， 

185
00:07:21,529 --> 00:07:23,419
您必须制作一个新的CardView。 

186
00:07:23,420 --> 00:07:24,906
当那件事发生时

187
00:07:24,906 --> 00:07:28,036
该指针移至新版本

188
00:07:28,036 --> 00:07:30,370
所以您仍然指向堆中的同一件事。 

189
00:07:30,370 --> 00:07:32,490
因此，如果isFaceUp发生变化， 

190
00:07:32,490 --> 00:07:35,439
您的CardView不会丢失其临时存储。 

191
00:07:35,439 --> 00:07:37,930
基本上，您的临时存储甚至会保留

192
00:07:37,930 --> 00:07:40,139
以及其他导致您的视图的因素

193
00:07:40,339 --> 00:07:42,049
甚至完全重建

194
00:07:42,050 --> 00:07:43,773
您可以保留@State。 

195
00:07:45,115 --> 00:07:47,365
我们将学习这些@符号事物， 

196
00:07:47,365 --> 00:07:50,175
你知道@Published @ObservedObject @State 

197
00:07:50,175 --> 00:07:52,224
他们被称为属性包装器。 

198
00:07:52,225 --> 00:07:54,930
您可以在阅读中阅读有关内容。 

199
00:07:54,930 --> 00:07:57,019
我认为是下周分配的。 

200
00:07:57,019 --> 00:07:59,995
我最终会在演讲中解释它。 

201
00:07:59,995 --> 00:08:02,125
不过，还没有到那儿。 

202
00:08:02,125 --> 00:08:06,182
现在，只知道您可以使用@State标记var 

203
00:08:06,182 --> 00:08:07,730
现在您可以写了。 

204
00:08:07,730 --> 00:08:10,969
但是请谨慎使用，并且绝对不要

205
00:08:10,970 --> 00:08:13,583
放一些不是临时的东西。 

206
00:08:15,459 --> 00:08:18,290
好的，当天的主题是动画。 

207
00:08:18,290 --> 00:08:19,807
什么是动画？ 

208
00:08:19,807 --> 00:08:23,180
这本质上是一种平滑的写照

209
00:08:23,180 --> 00:08:26,670
在一段时间内，在您的用户界面中， 

210
00:08:26,670 --> 00:08:28,930
顺便说一下， 

211
00:08:28,930 --> 00:08:33,669
您的UI中已经发生的更改。 

212
00:08:33,669 --> 00:08:35,189
当用户观看动画时， 

213
00:08:35,190 --> 00:08:37,059
他们看到的东西已经改变

214
00:08:37,259 --> 00:08:38,919
在模型中，好吧， 

215
00:08:38,919 --> 00:08:40,549
或某处已经改变

216
00:08:40,549 --> 00:08:42,775
至少已经更改了@State。 

217
00:08:42,775 --> 00:08:44,865
已经发生的事情

218
00:08:44,865 --> 00:08:47,224
它无法用其他任何方式做到。 

219
00:08:47,224 --> 00:08:49,719
否则，您模型中的所有变量都将具有

220
00:08:49,719 --> 00:08:52,132
随着动画的进行不断变化

221
00:08:52,332 --> 00:08:54,692
那只是站不住脚的架构，对吗？ 

222
00:08:54,692 --> 00:08:57,370
所以你的模型改变了

223
00:08:57,370 --> 00:09:00,359
您的视图发生了变化，该变化得到了

224
00:09:00,559 --> 00:09:02,829
动画在用户的眼前。 

225
00:09:02,830 --> 00:09:05,173
因此，它向您显示了他们最近的过去。 

226
00:09:06,153 --> 00:09:09,034
动画的重点是使用户体验

227
00:09:09,034 --> 00:09:11,579
显然，少一点干涩的

228
00:09:11,580 --> 00:09:14,389
而且要引起人们对事物变化的关注。 

229
00:09:14,389 --> 00:09:16,899
我们想利用用户的外围视觉来注意到

230
00:09:16,899 --> 00:09:18,419
哦那边那个数字在变

231
00:09:18,419 --> 00:09:20,794
哦，无论如何，View都移到了这里。 

232
00:09:20,794 --> 00:09:23,190
那就是我们使用动画的目的

233
00:09:23,191 --> 00:09:25,100
这就是为什么我们有动画。 

234
00:09:25,100 --> 00:09:26,844
这也只会使人更愉快， 

235
00:09:26,844 --> 00:09:29,250
少压力的经历

236
00:09:29,250 --> 00:09:31,149
一直在屏幕上跳跃。 

237
00:09:32,720 --> 00:09:34,904
那么在SwiftUI中，什么可以动画呢？ 

238
00:09:34,904 --> 00:09:37,451
好吧，我要说的是什么可以动画

239
00:09:37,451 --> 00:09:38,960
但首先，我想说清楚

240
00:09:38,960 --> 00:09:41,613
该动画仅适用于“视图” 

241
00:09:41,813 --> 00:09:43,741
在一个容器里

242
00:09:43,741 --> 00:09:46,429
已经在屏幕上了。 

243
00:09:46,429 --> 00:09:48,690
因此，如果它们位于已经在屏幕上的容器中

244
00:09:48,691 --> 00:09:49,870
他们发生了变化， 

245
00:09:49,870 --> 00:09:52,579
可以产生什么样的变化？ 

246
00:09:52,580 --> 00:09:55,782
好吧，Views的出现和消失

247
00:09:55,782 --> 00:09:58,483
仅当它们在容器中时，才在屏幕上显示

248
00:09:58,683 --> 00:10:03,683
还更改了可动画制作的ViewModifiers的参数， 

249
00:10:03,960 --> 00:10:06,459
例如不透明度和旋转度

250
00:10:06,659 --> 00:10:09,865
提升ViewModifiers知道如何为自己设置动画。 

251
00:10:09,865 --> 00:10:12,480
今天我们要创建自己的一个

252
00:10:12,480 --> 00:10:16,659
对这些参数的更改可以进行动画处理。 

253
00:10:16,659 --> 00:10:18,726
以及论点的改变

254
00:10:18,726 --> 00:10:21,480
是形状的创造。 

255
00:10:21,480 --> 00:10:22,970
如果您创建形状， 

256
00:10:22,970 --> 00:10:24,469
以某种方式配置了某些参数， 

257
00:10:24,669 --> 00:10:26,729
然后你改变那些， 

258
00:10:26,730 --> 00:10:30,283
然后可以对其进行动画处理以进入新状态。 

259
00:10:32,169 --> 00:10:34,629
那么我们如何开始动画呢？ 

260
00:10:34,629 --> 00:10:36,149
顺便说一下，就是改变了

261
00:10:36,149 --> 00:10:37,389
没有别的可以改变

262
00:10:37,389 --> 00:10:39,470
只是ViewModifiers，Shape， 

263
00:10:39,470 --> 00:10:41,080
以及视图的出现和消失， 

264
00:10:41,080 --> 00:10:42,709
想说清楚。 

265
00:10:42,909 --> 00:10:44,990
好了，那么我们如何制作动画呢？ 

266
00:10:44,990 --> 00:10:46,210
好吧，有两种方法可以做到。 

267
00:10:46,210 --> 00:10:48,320
一个是隐式动画

268
00:10:48,320 --> 00:10:51,110
我们要标记一个视图然后说， 

269
00:10:51,110 --> 00:10:55,099
只要此视图上的修饰符之一发生变化， 

270
00:10:55,299 --> 00:10:57,449
我们将动画化这一变化。 

271
00:10:57,450 --> 00:11:00,199
因此，隐式动画将自动

272
00:11:00,399 --> 00:11:03,720
每当该视图上的修改器发生变化时， 

273
00:11:03,720 --> 00:11:05,340
它将对其进行动画处理。 

274
00:11:05,340 --> 00:11:07,750
第二个是明确的

275
00:11:07,750 --> 00:11:11,409
我们将在其中调用一些将要产生的代码

276
00:11:11,409 --> 00:11:14,409
在对ViewModifiers或Shapes的一些更改中， 

277
00:11:14,409 --> 00:11:16,699
或观点将会来去去去。 

278
00:11:16,700 --> 00:11:18,879
我们将包装该代码

279
00:11:18,879 --> 00:11:21,720
通过withAnimation调用此函数。 

280
00:11:21,720 --> 00:11:23,100
在花括号里面， 

281
00:11:23,100 --> 00:11:24,399
我们要把代码

282
00:11:24,399 --> 00:11:27,289
那会导致所有会改变的事情

283
00:11:27,289 --> 00:11:29,014
所有这些更改的ViewModifier参数， 

284
00:11:29,014 --> 00:11:30,309
所有的观点来去去去。 

285
00:11:30,309 --> 00:11:31,959
他们都会一起发生

286
00:11:31,960 --> 00:11:35,070
在一个并发动画中。 

287
00:11:35,070 --> 00:11:37,219
因此，我们在此处明确设置动画， 

288
00:11:37,419 --> 00:11:40,539
我们说的是对此进行动画处理，然后我们通常

289
00:11:40,539 --> 00:11:44,139
做类似在我们的ViewModel中调用Intent的事情。 

290
00:11:44,139 --> 00:11:46,590
而且我们知道这将会带来很多改变

291
00:11:46,590 --> 00:11:49,740
我们希望将所有结果一起动画化。 

292
00:11:49,740 --> 00:11:51,432
这就是显式动画。 

293
00:11:52,600 --> 00:11:55,519
因此，让我们先谈谈隐式动画。 

294
00:11:55,519 --> 00:11:58,100
有人称这种自动动画

295
00:11:58,100 --> 00:12:00,956
本质上只是声明或标记一个视图

296
00:12:00,956 --> 00:12:02,769
这样所有的ViewModifier参数

297
00:12:02,769 --> 00:12:05,279
总是动画

298
00:12:05,279 --> 00:12:06,163
对于此视图。 

299
00:12:07,370 --> 00:12:10,440
您可以指定这些事情的发生方式， 

300
00:12:10,440 --> 00:12:12,459
就像他们发生需要多长时间。 

301
00:12:12,659 --> 00:12:14,980
还有我要谈论的曲线

302
00:12:14,980 --> 00:12:17,580
您确实可以控制它。 

303
00:12:17,580 --> 00:12:22,580
您可以通过在任何View上调用此函数动画来完成此操作。 

304
00:12:23,980 --> 00:12:28,129
所以在这里我称其为不透明度或旋转度

305
00:12:28,129 --> 00:12:30,820
修改后的幽灵文字。 

306
00:12:30,820 --> 00:12:34,129
我说过动画，在那里提供了论据， 

307
00:12:34,129 --> 00:12:36,539
动画的制作方法

308
00:12:36,539 --> 00:12:37,969
多久，所有的东西。 

309
00:12:37,970 --> 00:12:42,440
而且现在永远，只要可怕的变种变化， 

310
00:12:42,440 --> 00:12:44,090
因此不透明度发生了变化， 

311
00:12:44,090 --> 00:12:46,447
或upsideDown var在那里改变

312
00:12:46,447 --> 00:12:49,220
旋转效果将改变旋转。 

313
00:12:49,220 --> 00:12:52,750
每当这些变化发生时，它就会产生动画效果， 

314
00:12:52,750 --> 00:12:57,230
因为此“查看此组合”显示为绿色， 

315
00:12:57,230 --> 00:12:59,519
现在是隐式动画的。 

316
00:12:59,519 --> 00:13:02,312
总是会发生这种情况。 

317
00:13:03,850 --> 00:13:07,420
警告这里，小红字警告，请注意

318
00:13:08,677 --> 00:13:12,700
 .animation在容器上查看

319
00:13:12,700 --> 00:13:15,500
无法正常使用您通常认为的方式

320
00:13:15,500 --> 00:13:18,470
你可能想像，它会动画

321
00:13:18,470 --> 00:13:23,470
整个容器就像一个大的，某种程度上的变化。 

322
00:13:24,000 --> 00:13:26,919
但这并不能全部在容器上做动画， 

323
00:13:26,919 --> 00:13:29,269
它只是将动画应用于所有事物

324
00:13:29,269 --> 00:13:30,980
在容器内。 

325
00:13:30,980 --> 00:13:34,817
换句话说，.animation与.padding不同，对。 

326
00:13:34,817 --> 00:13:37,399
 .padding使整个ZStack处于填充状态

327
00:13:37,399 --> 00:13:39,409
或整个VStack或其他任何东西。 

328
00:13:39,409 --> 00:13:42,669
它更像.font，或者如果您在ZStack上说.font， 

329
00:13:42,669 --> 00:13:46,679
 ZStack中的所有文本，获取该字体，好吧。 

330
00:13:46,679 --> 00:13:48,149
动画更像.font 

331
00:13:48,149 --> 00:13:51,209
如果您在ZStack上说动画， 

332
00:13:51,210 --> 00:13:53,892
里面的所有东西都会得到那个，那就是

333
00:13:53,892 --> 00:13:56,921
很少您真正想要的东西令人惊讶。 

334
00:13:57,121 --> 00:13:59,389
所以我只是警告你

335
00:13:59,389 --> 00:14:04,389
我们通常不将.animation放在容器视图上， 

336
00:14:04,610 --> 00:14:08,669
他们通常戴在叶子视图上， 

337
00:14:08,669 --> 00:14:11,492
至少在很小的独立视图上。 

338
00:14:14,179 --> 00:14:16,009
这样动画论点

339
00:14:16,009 --> 00:14:18,120
在上一张幻灯片中看到的您正在经过的地方， 

340
00:14:18,120 --> 00:14:20,370
这很容易进出，这叫做

341
00:14:20,370 --> 00:14:23,379
使您可以像控制动画持续时间一样控制动画。 

342
00:14:23,379 --> 00:14:24,269
这要花多长时间？ 

343
00:14:24,269 --> 00:14:26,519
两秒钟或任何延迟

344
00:14:26,519 --> 00:14:29,569
请等待半秒钟，然后再开始播放此动画。 

345
00:14:29,570 --> 00:14:31,219
它可以重复一定次数， 

346
00:14:31,419 --> 00:14:32,759
甚至永远重复

347
00:14:32,759 --> 00:14:35,000
做动画来做这个改变， 

348
00:14:35,000 --> 00:14:36,929
然后不断重复制作动画。 

349
00:14:36,929 --> 00:14:39,349
当然，过去已经进行了更改， 

350
00:14:39,350 --> 00:14:41,379
但只要继续做动画

351
00:14:41,379 --> 00:14:42,716
有时候你想这么做。 

352
00:14:42,716 --> 00:14:46,350
您还可以设置动画的曲线。 

353
00:14:46,350 --> 00:14:48,723
那么动画曲线是什么？ 

354
00:14:49,639 --> 00:14:51,250
这实际上是由

355
00:14:51,250 --> 00:14:53,580
您选择哪种动画。 

356
00:14:53,580 --> 00:14:56,600
动画曲线控制速率

357
00:14:56,600 --> 00:14:59,240
动画播放时

358
00:14:59,240 --> 00:15:02,220
例如，在线性动画中， 

359
00:15:02,220 --> 00:15:04,529
在整个过程中，速率保持恒定

360
00:15:04,529 --> 00:15:08,009
整个动画，从一个不透明度到另一个， 

361
00:15:08,009 --> 00:15:09,389
或一次旋转或另一次旋转

362
00:15:09,389 --> 00:15:12,330
发生时，线性恒定速率。 

363
00:15:12,330 --> 00:15:13,959
然后这种放松，放松

364
00:15:14,159 --> 00:15:16,230
我在上一个提到的那是不同的。 

365
00:15:16,230 --> 00:15:19,440
它开始缓慢，缓慢改变不透明度

366
00:15:19,440 --> 00:15:21,109
旋转，然后加速， 

367
00:15:21,309 --> 00:15:24,679
然后几乎快要减速了。 

368
00:15:24,679 --> 00:15:26,979
为什么要这样的东西？ 

369
00:15:26,980 --> 00:15:28,440
好吧，例如，如果您

370
00:15:28,440 --> 00:15:31,679
在屏幕上将卡片从一个地方移动到另一个地方， 

371
00:15:31,879 --> 00:15:34,799
如果只是拿起步伐，那是一种突然。 

372
00:15:34,799 --> 00:15:36,049
这样做更好

373
00:15:37,110 --> 00:15:40,100
开始缓慢移动，然后移动，然后减速

374
00:15:40,100 --> 00:15:42,840
当它到达时，有点像一架飞机，对。 

375
00:15:42,840 --> 00:15:45,701
从跑道停止处开始，然后慢慢起飞

376
00:15:45,701 --> 00:15:48,490
然后飞到空中，时速达到500英里

377
00:15:48,490 --> 00:15:49,840
然后到达目的地机场

378
00:15:49,840 --> 00:15:52,629
然后减速到每小时100到150英里， 

379
00:15:52,629 --> 00:15:53,462
然后它降落。 

380
00:15:53,462 --> 00:15:57,469
这就是利率的曲线

381
00:15:57,470 --> 00:15:58,599
轻松进出。 

382
00:15:58,799 --> 00:16:00,949
您几乎总是希望事情动起来

383
00:16:00,950 --> 00:16:02,940
至少放松一下，放松一下

384
00:16:02,940 --> 00:16:04,949
如果不是下一个，那就是春天。 

385
00:16:05,149 --> 00:16:08,340
所以春天才是目的地

386
00:16:08,340 --> 00:16:09,960
然后有点反弹

387
00:16:09,960 --> 00:16:11,599
那里有一点软着陆

388
00:16:11,799 --> 00:16:14,189
稍微超过标记并弹回

389
00:16:14,190 --> 00:16:16,330
有点像弹簧连接它

390
00:16:16,330 --> 00:16:17,959
到目的地。 

391
00:16:18,159 --> 00:16:21,653
这些动画曲线使用户界面

392
00:16:21,653 --> 00:16:24,649
给用户带来更多舒适感，更少， 

393
00:16:24,649 --> 00:16:26,572
震颤，不那么突然。 

394
00:16:29,629 --> 00:16:31,679
所以我们来谈谈隐式动画

395
00:16:31,679 --> 00:16:34,649
当我认为我只是在描述一个明确的动画时， 

396
00:16:34,649 --> 00:16:36,649
接下来是我要描述的。 

397
00:16:36,649 --> 00:16:40,459
这些自动的，隐式的动画

398
00:16:40,460 --> 00:16:45,019
它们甚至不是我们制作动画的主要方式。 

399
00:16:45,019 --> 00:16:47,269
这可能取决于应用程序

400
00:16:47,269 --> 00:16:50,079
但大多数情况下，我们不会使用太多

401
00:16:50,080 --> 00:16:55,080
因为当您拥有一组视图时， 

402
00:16:55,360 --> 00:16:58,479
他们想一起做动画。 

403
00:16:58,679 --> 00:17:03,679
这就是为什么将.animation放在ZStack等容器上， 

404
00:17:04,000 --> 00:17:06,589
不只是，我们只是做得并不多。 

405
00:17:06,589 --> 00:17:09,250
因为如果ZStack里面有很多View 

406
00:17:09,250 --> 00:17:12,150
也许在那些大建筑物里面的景色， 

407
00:17:12,150 --> 00:17:15,379
这些视图要一起动画， 

408
00:17:15,579 --> 00:17:19,659
所有相同的持续时间，所有相同的曲线， 

409
00:17:19,660 --> 00:17:21,669
他们想保持同步。 

410
00:17:21,869 --> 00:17:26,359
显式动画是我们导致动画发生的地方

411
00:17:26,359 --> 00:17:29,209
都具有相同的持续时间，都具有相同的曲线

412
00:17:29,210 --> 00:17:31,399
一堆视图。 

413
00:17:31,599 --> 00:17:34,319
而我们要做的就是

414
00:17:34,319 --> 00:17:37,220
 withAnimation函数，调用它

415
00:17:37,220 --> 00:17:39,529
这个参数是闭包， 

416
00:17:39,529 --> 00:17:41,539
在封闭内部，我们要做一些事情

417
00:17:41,539 --> 00:17:44,009
就像在我们的ViewModel上调用Intent一样， 

418
00:17:44,009 --> 00:17:46,539
那是我们在那里做的经典事情。 

419
00:17:46,539 --> 00:17:48,339
模型可以疯狂地改变

420
00:17:48,339 --> 00:17:50,519
我们的观点可能会发生疯狂的变化， 

421
00:17:50,519 --> 00:17:54,289
所有那些疯狂的改变都会一起发生

422
00:17:54,289 --> 00:17:57,920
与我们传递给withAnimation的动画有关。 

423
00:17:57,920 --> 00:18:00,980
在这里，我正在做两秒钟的线性动画。 

424
00:18:00,980 --> 00:18:04,130
所以所有的变化都将以线性速率发生

425
00:18:04,130 --> 00:18:05,933
在两秒钟的过程中。 

426
00:18:07,150 --> 00:18:09,159
现在，我在这里用Animation调用一个函数

427
00:18:09,359 --> 00:18:13,019
一个有两个参数，一个动画，然后是一个闭包， 

428
00:18:13,019 --> 00:18:14,400
调用这样的函数

429
00:18:14,400 --> 00:18:17,750
那更多是一种当务之急的编程方法。 

430
00:18:17,750 --> 00:18:20,420
我们知道SwiftUI主要是声明性的， 

431
00:18:20,420 --> 00:18:22,460
我们只是说一切的状态

432
00:18:22,460 --> 00:18:24,899
隐式动画是声明性的。 

433
00:18:25,099 --> 00:18:26,689
你只是在宣布

434
00:18:26,690 --> 00:18:29,960
当这些东西的这些修饰符改变时， 

435
00:18:29,960 --> 00:18:31,319
您将为其设置动画。 

436
00:18:31,319 --> 00:18:33,009
但这实际上是必须的。 

437
00:18:33,009 --> 00:18:36,339
在这里，我们告诉某人

438
00:18:36,339 --> 00:18:38,359
做这个并制作动画

439
00:18:38,359 --> 00:18:39,359
因此势在必行。 

440
00:18:39,359 --> 00:18:43,859
因此，SwiftUI代码中没有很多地方， 

441
00:18:43,859 --> 00:18:46,839
您在进行命令式编程的地方。 

442
00:18:46,839 --> 00:18:49,539
请记住，所有这些代码都必须在您的视图中， 

443
00:18:49,539 --> 00:18:51,730
因为ViewModels看不到View 

444
00:18:51,730 --> 00:18:52,980
所以他们不能这样做。 

445
00:18:52,980 --> 00:18:54,329
这一切都在您的视野中， 

446
00:18:54,329 --> 00:18:57,099
它就在您的SwiftUI代码中， 

447
00:18:57,099 --> 00:19:00,748
您在其中执行命令式代码（例如onTapGesture）， 

448
00:19:00,749 --> 00:19:02,210
点击视图，繁荣， 

449
00:19:02,210 --> 00:19:03,539
你要做一些当务之急， 

450
00:19:03,539 --> 00:19:07,240
您会说选择意图，选择卡片或其他任何东西。 

451
00:19:07,240 --> 00:19:10,919
这些就是发生的事情的地方

452
00:19:11,119 --> 00:19:12,939
就像轻按一样，只是其他手势

453
00:19:12,940 --> 00:19:14,740
我们将在下周学习。 

454
00:19:14,740 --> 00:19:17,643
那就是我们要调用动画的时候。 

455
00:19:19,080 --> 00:19:22,069
现在，正如我所说，动画是明确的， 

456
00:19:22,069 --> 00:19:24,389
通常包裹在Intent之类的东西周围， 

457
00:19:24,390 --> 00:19:25,880
一个ViewModel Intent。 

458
00:19:25,880 --> 00:19:28,139
但您也可以将其包裹在发生的事情周围

459
00:19:28,339 --> 00:19:29,240
仅在用户界面中。 

460
00:19:29,240 --> 00:19:31,759
例如，我正在谈论的编辑模式， 

461
00:19:31,759 --> 00:19:33,579
假设您要进入编辑模式

462
00:19:33,579 --> 00:19:37,960
和小图标将出现以删除内容或其他内容

463
00:19:37,960 --> 00:19:40,230
那些东西想要平滑地动画

464
00:19:40,230 --> 00:19:41,740
并出现在屏幕上。 

465
00:19:41,740 --> 00:19:44,920
因此，当用户

466
00:19:44,920 --> 00:19:49,920
点击按钮以说进入编辑模式或其他。 

467
00:19:50,200 --> 00:19:53,740
另一个必要的地方是按钮的动作。 

468
00:19:53,740 --> 00:19:56,089
我今天还将在演示中展示Buttons 

469
00:19:56,089 --> 00:19:58,439
然后您会看到Button的动作是另一个地方

470
00:19:58,440 --> 00:20:00,409
我们执行命令式代码，以及在可能的地方

471
00:20:00,609 --> 00:20:02,292
用withAnimation做类似的事情。 

472
00:20:03,430 --> 00:20:06,139
这又是红色，第二个红色的东西。 

473
00:20:06,339 --> 00:20:08,766
第一个是做事的红色

474
00:20:08,767 --> 00:20:11,289
 .animation在容器视图上。 

475
00:20:11,289 --> 00:20:15,049
这是提醒您显式动画

476
00:20:15,049 --> 00:20:18,629
不要覆盖隐式动画。 

477
00:20:18,630 --> 00:20:20,889
假定隐式动画出现在“视图”上

478
00:20:21,089 --> 00:20:23,750
他们是独立的，他们独立工作， 

479
00:20:23,750 --> 00:20:25,630
任何动画对他们来说都有意义

480
00:20:25,630 --> 00:20:27,950
无论如何，对他们总是有意义的。 

481
00:20:27,950 --> 00:20:29,029
因此，如果有一个视图， 

482
00:20:29,029 --> 00:20:32,200
并且附有一个隐式动画

483
00:20:32,200 --> 00:20:34,899
那就要做那个隐式动画

484
00:20:35,099 --> 00:20:37,098
每当事情改变时。 

485
00:20:37,098 --> 00:20:38,980
即使有明确的动画

486
00:20:38,980 --> 00:20:40,329
同时进行。 

487
00:20:40,329 --> 00:20:42,339
对他们没有任何影响。 

488
00:20:42,339 --> 00:20:44,232
隐式地动画总是赢。 

489
00:20:46,670 --> 00:20:50,529
现在过渡指定如何为到达动画

490
00:20:50,529 --> 00:20:52,710
和视图的离开。 

491
00:20:52,710 --> 00:20:54,450
记住，这些视图必须放在容器中

492
00:20:54,450 --> 00:20:55,889
已经在屏幕上。 

493
00:20:56,089 --> 00:20:58,899
但是无论何时到达，都希望能够对其进行动画处理

494
00:20:58,900 --> 00:21:02,890
从外太空或其他物体中消失或飞入

495
00:21:02,890 --> 00:21:06,169
您想要该View到达的某种动画。 

496
00:21:06,369 --> 00:21:08,179
现在是过渡

497
00:21:08,180 --> 00:21:09,450
只是

498
00:21:09,450 --> 00:21:12,049
一对ViewModifiers，仅此而已

499
00:21:12,049 --> 00:21:14,480
 ViewModifiers之一正在修改

500
00:21:14,480 --> 00:21:17,079
视图，那里应该是什么样子

501
00:21:17,079 --> 00:21:18,673
另一个正在修改视图的内容

502
00:21:18,673 --> 00:21:20,859
它不存在时应该看起来像。 

503
00:21:20,859 --> 00:21:24,379
换句话说，它还没有到达或刚刚离开， 

504
00:21:24,380 --> 00:21:26,240
那里的那个可能会有

505
00:21:26,240 --> 00:21:29,339
假设它是一种淡入淡出，它将从一个开始

506
00:21:29,339 --> 00:21:32,490
 ViewModifier，它位于不透明度为1的位置， 

507
00:21:32,490 --> 00:21:36,259
然后另一个的ViewModifier是不透明度为零。 

508
00:21:36,259 --> 00:21:39,930
系统将在这两个ViewModifiers之间进行动画处理

509
00:21:39,930 --> 00:21:42,690
使那个东西出现或消失。 

510
00:21:42,690 --> 00:21:46,740
所以过渡实际上只是一个版本

511
00:21:46,740 --> 00:21:49,309
 ViewModifier的参数更改

512
00:21:49,309 --> 00:21:52,089
导致过渡的就是这对修饰符。 

513
00:21:52,089 --> 00:21:54,369
这两个修饰符可以具有不同的参数

514
00:21:54,369 --> 00:21:56,129
就是这样，仅此而已。 

515
00:21:56,130 --> 00:21:57,399
所以过渡不是真的

516
00:21:57,599 --> 00:21:58,432
另一种动画

517
00:21:58,432 --> 00:22:01,579
这只是指定两个ViewModifiers的一种方式

518
00:22:01,579 --> 00:22:03,663
用于何时显示和消失视图。 

519
00:22:05,250 --> 00:22:09,150
那么我们如何指定想要的过渡

520
00:22:09,150 --> 00:22:11,829
动画外观时要使用的系统

521
00:22:12,029 --> 00:22:14,899
或给定视图的消失？ 

522
00:22:14,900 --> 00:22:16,980
记住过渡只是一对修饰符， 

523
00:22:16,980 --> 00:22:19,470
所以我们实质上只是要附加两个修饰符

524
00:22:19,470 --> 00:22:22,017
我们想要修改器在屏幕上显示的时间和修改器

525
00:22:22,017 --> 00:22:24,629
当不是视图时

526
00:22:24,829 --> 00:22:29,039
我们使用.transition附加此过渡， 

527
00:22:29,039 --> 00:22:31,159
非常简单的ViewModifier。 

528
00:22:31,160 --> 00:22:32,899
我在这里以身作则， 

529
00:22:33,099 --> 00:22:36,109
我将使用两个内置的过渡。 

530
00:22:36,109 --> 00:22:38,849
一个叫做.scale，就是那里的蓝色

531
00:22:38,849 --> 00:22:42,629
另一个称为.identity，即紫色。 

532
00:22:42,630 --> 00:22:44,669
因此，.scale过渡

533
00:22:44,869 --> 00:22:49,209
它的两个ViewModifiers是框架修改器。 

534
00:22:49,210 --> 00:22:52,460
屏幕外的一帧为零， 

535
00:22:52,460 --> 00:22:55,230
屏幕上有一个全尺寸的框架

536
00:22:55,230 --> 00:22:56,900
只要它的正常大小。 

537
00:22:56,900 --> 00:23:01,900
因此，比例转换可将View从微小的位置放大和缩小， 

538
00:23:02,079 --> 00:23:06,615
零尺寸，最大尺寸为进出时的最大尺寸。 

539
00:23:06,615 --> 00:23:09,759
身份转换是一个有趣的过程， 

540
00:23:09,759 --> 00:23:12,720
它是ViewModifier不执行任何操作。 

541
00:23:12,720 --> 00:23:16,740
因此，既然消失之间没有任何变化， 

542
00:23:16,740 --> 00:23:19,230
当它在那里时，它会立即出现

543
00:23:19,230 --> 00:23:20,710
并立即消失。 

544
00:23:20,710 --> 00:23:22,480
换句话说，没有动画，因为

545
00:23:22,480 --> 00:23:25,349
两个ViewModifiers之间没有区别

546
00:23:25,349 --> 00:23:26,929
完全一样

547
00:23:26,930 --> 00:23:28,980
他们实际上并没有修改视图

548
00:23:28,980 --> 00:23:30,970
因此没有动画发生。 

549
00:23:30,970 --> 00:23:33,029
因此，bloop出现并消失。 

550
00:23:33,029 --> 00:23:34,759
有时候是这样

551
00:23:34,759 --> 00:23:36,440
当您制作动画时， 

552
00:23:36,440 --> 00:23:38,190
你有来来往往的景观， 

553
00:23:38,190 --> 00:23:39,659
也许你可能想要一个视图

554
00:23:39,859 --> 00:23:42,399
只是bloop出现而bloop消失

555
00:23:42,400 --> 00:23:44,380
而不是动画。 

556
00:23:44,380 --> 00:23:46,000
这不是默认值

557
00:23:46,000 --> 00:23:50,089
因此默认的过渡称为.opacity， 

558
00:23:50,089 --> 00:23:53,199
是淡入淡出，淡入淡出，正确。 

559
00:23:53,200 --> 00:23:54,289
这只是不透明

560
00:23:54,289 --> 00:23:55,940
我们上次了解到的

561
00:23:55,940 --> 00:23:58,136
出门时从一变为零

562
00:23:58,136 --> 00:24:00,319
从零到一

563
00:24:00,319 --> 00:24:01,829
所以我们在这种情况下进行了审核

564
00:24:01,829 --> 00:24:04,634
是不透明度ViewModifier。 

565
00:24:04,634 --> 00:24:06,890
让我们在这里看看这个ZStack， 

566
00:24:06,890 --> 00:24:09,894
基本上是我们的卡片

567
00:24:09,894 --> 00:24:12,049
这里简化。 

568
00:24:12,049 --> 00:24:13,626
幻灯片上只有这么多空间， 

569
00:24:13,626 --> 00:24:17,529
您可以从正面朝上看到卡片正面， 

570
00:24:17,529 --> 00:24:18,750
我得到了RoundedRectangles， 

571
00:24:18,750 --> 00:24:20,990
假设没有在此处指定所有内容， 

572
00:24:20,990 --> 00:24:22,170
但是你知道它们是什么。 

573
00:24:22,170 --> 00:24:25,230
而且我没有放.transition修饰符

574
00:24:25,230 --> 00:24:26,121
在RoundedRectangles上。 

575
00:24:26,321 --> 00:24:28,729
因此，他们将获得默认过渡， 

576
00:24:28,730 --> 00:24:31,176
这是不透明的。所以前面的RoundedRectangles 

577
00:24:31,176 --> 00:24:34,240
当它们来来去去时会淡入淡出。 

578
00:24:34,240 --> 00:24:36,416
但是我确实对文本进行了过渡

579
00:24:36,416 --> 00:24:38,220
那里的小鬼。 

580
00:24:38,220 --> 00:24:41,410
那将会无处不在

581
00:24:41,410 --> 00:24:45,450
然后在消失时将其缩小为零。 

582
00:24:45,450 --> 00:24:47,220
这就是.scale的意思。 

583
00:24:47,220 --> 00:24:49,149
然后背面的RoundedRectangle 

584
00:24:49,349 --> 00:24:51,539
我将过渡身份表示为

585
00:24:51,539 --> 00:24:54,009
当后面出现时，它会出现斑点

586
00:24:54,009 --> 00:24:57,220
它不会淡入或长出，它会出现斑点。 

587
00:24:57,220 --> 00:24:59,569
现在它会出现，同时

588
00:24:59,569 --> 00:25:02,500
正面将逐渐消失，变焦缩小

589
00:25:02,500 --> 00:25:03,333
与此同时。 

590
00:25:03,333 --> 00:25:05,680
所以这将不是一个很好的动画。 

591
00:25:05,680 --> 00:25:08,160
这是一种厨房水槽动画， 

592
00:25:08,160 --> 00:25:10,970
你永远不会这样做

593
00:25:10,970 --> 00:25:11,919
但我只想让你明白

594
00:25:12,119 --> 00:25:13,839
所有这些过渡是做什么的。 

595
00:25:13,839 --> 00:25:16,750
顺便说一下，您在这里看到isFaceUp， 

596
00:25:16,750 --> 00:25:19,920
这只是ViewBuilder内部的条件，对吗？ 

597
00:25:19,920 --> 00:25:20,940
这是ZStack， 

598
00:25:20,940 --> 00:25:23,409
我们知道ZStack的内容是ViewBuilder。 

599
00:25:23,609 --> 00:25:25,449
在ViewBuilder中，它是一个View列表

600
00:25:25,450 --> 00:25:28,470
但是我们可以使用if-thens来包含或不包含某些内容， 

601
00:25:28,470 --> 00:25:30,490
好吧，当然，当我们包括它们时， 

602
00:25:30,490 --> 00:25:33,579
它们出现在屏幕上，因为我们不包含它们， 

603
00:25:33,579 --> 00:25:35,199
他们消失在屏幕上。 

604
00:25:35,200 --> 00:25:39,009
以及ViewBuilders中的这些if-thens 

605
00:25:39,009 --> 00:25:41,480
可能是第一种方法

606
00:25:41,480 --> 00:25:43,170
意见来来去去。 

607
00:25:43,170 --> 00:25:46,630
因此，当您对内容进行动画处理时

608
00:25:46,630 --> 00:25:49,649
一些诸如ZStack之类的ViewBuilder， 

609
00:25:49,849 --> 00:25:51,980
里面有条件

610
00:25:51,980 --> 00:25:53,170
您想考虑过渡， 

611
00:25:53,170 --> 00:25:54,996
因为那些事情会来来去去

612
00:25:54,996 --> 00:25:55,950
如果你不考虑的话

613
00:25:55,950 --> 00:25:57,169
您将会渐入渐出。 

614
00:25:57,369 --> 00:25:59,819
这是默认设置，但您可能需要一些东西

615
00:25:59,819 --> 00:26:01,994
看起来比那更好。 

616
00:26:01,994 --> 00:26:06,106
例如，视图来来去去的另一种方式是， 

617
00:26:06,106 --> 00:26:07,309
在ForEach中。 

618
00:26:07,309 --> 00:26:11,919
因此，ForEach采用了一系列可识别的事物， 

619
00:26:11,920 --> 00:26:13,460
并为其制作视图。 

620
00:26:13,460 --> 00:26:15,400
好吧，如果该数组发生变化， 

621
00:26:15,400 --> 00:26:16,920
就像增加了新的东西， 

622
00:26:16,920 --> 00:26:18,745
或某些标识符被拔出， 

623
00:26:18,945 --> 00:26:22,259
它会添加新的视图或采用某些视图

624
00:26:22,259 --> 00:26:24,269
它是过去制造出来的。 

625
00:26:24,269 --> 00:26:26,400
那些观点将会来去去去。 

626
00:26:26,400 --> 00:26:28,019
您肯定会在作业中看到这一点

627
00:26:28,019 --> 00:26:30,139
第三，你要拿卡

628
00:26:30,140 --> 00:26:32,640
通过某些ForEach以某种方式显示在屏幕上

629
00:26:32,640 --> 00:26:34,069
也许在年级之内。 

630
00:26:34,269 --> 00:26:36,359
这是一个与众不同的游戏

631
00:26:36,359 --> 00:26:39,289
卡片在您正在做的游戏中来来往往。 

632
00:26:39,289 --> 00:26:41,879
记住卡片实际上总是在屏幕上， 

633
00:26:41,880 --> 00:26:43,399
即使他们匹配，他们也只是隐藏起来。 

634
00:26:43,599 --> 00:26:45,839
他们那里有一个空间

635
00:26:45,839 --> 00:26:47,099
但不必那样。 

636
00:26:47,099 --> 00:26:50,671
所以这些可能是第一和第二种方式

637
00:26:50,672 --> 00:26:52,899
视图来去去去：ViewBuilders中的条件事物

638
00:26:53,099 --> 00:26:56,099
以及诸如ForEach之类的在本质上有条件的事情

639
00:26:56,099 --> 00:26:58,750
为您建立景观。 

640
00:26:58,750 --> 00:27:00,329
好的，回到屏幕代码。 

641
00:27:00,329 --> 00:27:01,559
因此，让我们来看一下， 

642
00:27:01,559 --> 00:27:04,960
如果我们将isFaceUp从一件事更改为另一件事， 

643
00:27:04,960 --> 00:27:05,910
会发生什么？ 

644
00:27:05,910 --> 00:27:08,009
因此，如果我们将isFaceUp更改为false， 

645
00:27:08,009 --> 00:27:09,599
换句话说，我们想露背， 

646
00:27:09,599 --> 00:27:11,589
后面会立刻出现

647
00:27:11,589 --> 00:27:14,619
因为我们说过要转变为身份， 

648
00:27:14,619 --> 00:27:17,619
这意味着不要做任何修改。 

649
00:27:17,619 --> 00:27:18,599
所以没有动画

650
00:27:18,599 --> 00:27:20,929
所以只是bloop立即出现。 

651
00:27:20,930 --> 00:27:23,409
文本将缩小为空， 

652
00:27:23,609 --> 00:27:25,409
因为它正在使用比例转换

653
00:27:25,410 --> 00:27:27,900
并且前面的RoundedRectangles会淡出

654
00:27:27,900 --> 00:27:28,909
因为他们没有过渡

655
00:27:29,109 --> 00:27:31,862
因此他们获得了默认的不透明度。 

656
00:27:31,863 --> 00:27:33,970
顺便说一下，如果isFaceUp更改为true， 

657
00:27:33,970 --> 00:27:36,019
 isFaceUp必须在这里进行更改， 

658
00:27:36,019 --> 00:27:38,573
在进行显式动画制作时。 

659
00:27:38,573 --> 00:27:40,042
如果我们实际上没有动画， 

660
00:27:40,242 --> 00:27:42,429
那么这些过渡就没有任何意义，对。 

661
00:27:42,430 --> 00:27:44,670
这些过渡不会自己制作动画

662
00:27:44,670 --> 00:27:47,390
他们只是指定要使用的ViewModifiers， 

663
00:27:47,390 --> 00:27:49,420
发生动画时。 

664
00:27:49,420 --> 00:27:52,775
因此，如果isFaceUp从false更改为true， 

665
00:27:52,775 --> 00:27:56,034
现在背部会消失，只是消失了

666
00:27:56,234 --> 00:27:57,569
因为再次，它的过渡

667
00:27:57,569 --> 00:28:00,413
是标识ViewModifier。 

668
00:28:00,413 --> 00:28:03,190
因此，标识ViewModifier之间没有区别

669
00:28:03,190 --> 00:28:05,432
当它在那里或不在那里。就是这样

670
00:28:05,432 --> 00:28:08,269
它仍然不在屏幕上，所以它消失了。 

671
00:28:08,269 --> 00:28:10,549
文本将从无到有

672
00:28:10,549 --> 00:28:13,809
将从零尺寸开始，然后增长到正常尺寸。 

673
00:28:13,809 --> 00:28:16,039
从那以后，前面的RoundedRectangles 

674
00:28:16,039 --> 00:28:18,379
没有指定过渡，它们会淡入。 

675
00:28:18,380 --> 00:28:20,530
这将同时发生。 

676
00:28:22,890 --> 00:28:25,750
现在要考虑的一件事是过渡

677
00:28:25,750 --> 00:28:30,240
与动画不同，过渡不会重新分配

678
00:28:30,240 --> 00:28:32,079
到容器的内容视图。 

679
00:28:32,079 --> 00:28:34,000
记住，我告诉过你我们通常不放

680
00:28:34,000 --> 00:28:36,509
容器视图上的隐式动画， 

681
00:28:36,509 --> 00:28:38,980
因为它最终只是给那个动画

682
00:28:38,980 --> 00:28:40,410
里面的每一件事。 

683
00:28:40,410 --> 00:28:42,119
好吧，过渡并不能做到这一点。 

684
00:28:42,319 --> 00:28:46,189
过渡，当您将其放在ZStack或VStack上时

685
00:28:46,190 --> 00:28:47,919
现在正在谈论过渡

686
00:28:48,119 --> 00:28:51,599
当整个ZStack出现在屏幕上时

687
00:28:51,599 --> 00:28:53,069
或关闭屏幕。 

688
00:28:53,069 --> 00:28:56,329
因此，它不会将其分发到其内部。 

689
00:28:56,329 --> 00:28:59,199
它实际上是在谈论动画

690
00:28:59,200 --> 00:29:02,086
 ZStack本身的来龙去脉。 

691
00:29:02,086 --> 00:29:05,059
现在Group和ForEach，这些是容器视图

692
00:29:05,059 --> 00:29:07,839
但是由于他们在屏幕上的任何地方都不会放任何东西， 

693
00:29:07,839 --> 00:29:11,389
他们实际上只是在分组或创建视图

694
00:29:11,390 --> 00:29:13,910
从可识别列表中， 

695
00:29:13,910 --> 00:29:16,509
他们确实将.transition分发到其内容视图。 

696
00:29:16,509 --> 00:29:18,879
因此，如果您说一堆东西， 

697
00:29:18,880 --> 00:29:20,150
你说.transition， 

698
00:29:20,150 --> 00:29:22,769
将会谈论其中的每一件事， 

699
00:29:22,769 --> 00:29:24,123
获得过渡。 

700
00:29:26,059 --> 00:29:27,859
这个.transition函数

701
00:29:27,859 --> 00:29:29,879
记得除了指定

702
00:29:29,880 --> 00:29:32,680
这两个ViewModifiers是什么。 

703
00:29:32,680 --> 00:29:35,769
在那里将单词transition视为一个名词。 

704
00:29:35,769 --> 00:29:38,900
这是要使用的过渡。 

705
00:29:38,900 --> 00:29:42,609
它不是动词，就像现在的视图过渡一样， 

706
00:29:42,809 --> 00:29:45,756
过渡仅在显式动画出现时发生

707
00:29:45,757 --> 00:29:46,879
正在进行。 

708
00:29:47,079 --> 00:29:50,809
那是过渡动画唯一发生的时间。 

709
00:29:50,809 --> 00:29:54,149
过渡实际上不适用于隐式动画。 

710
00:29:54,150 --> 00:29:57,089
如果您尝试制作隐式动画， 

711
00:29:57,289 --> 00:29:58,673
在带有过渡的视图上

712
00:29:58,673 --> 00:30:00,359
会有点困惑

713
00:30:00,359 --> 00:30:04,049
而且您可以理解为什么会记住这一点，您知道， 

714
00:30:04,049 --> 00:30:06,180
显式动画用于动画

715
00:30:06,180 --> 00:30:08,159
协调了许多不同的观点

716
00:30:08,359 --> 00:30:10,509
当视图来来去去时。 

717
00:30:10,509 --> 00:30:13,180
隐式动画是独立的， 

718
00:30:13,180 --> 00:30:17,129
独立的工作视图，使它们的动画有意义。 

719
00:30:17,329 --> 00:30:20,189
在我看来，这并不像Views来来去去。 

720
00:30:20,190 --> 00:30:22,769
过渡不打算使用

721
00:30:22,769 --> 00:30:24,039
带有隐式动画

722
00:30:24,039 --> 00:30:27,220
它们将与显式动画一起使用。 

723
00:30:27,220 --> 00:30:29,490
这是过渡动画唯一发生的时间

724
00:30:29,490 --> 00:30:32,480
是在制作动画时。 

725
00:30:32,480 --> 00:30:35,250
转换只是说要使用什么ViewModifier， 

726
00:30:35,250 --> 00:30:36,930
您仍然必须设置动画。 

727
00:30:36,930 --> 00:30:39,400
顺便说一句，如果您在

728
00:30:39,400 --> 00:30:42,759
有过渡的东西，视图就来了， 

729
00:30:42,759 --> 00:30:45,299
它会做一些动画， 

730
00:30:45,299 --> 00:30:47,649
但这可能不会达到您的期望。 

731
00:30:48,839 --> 00:30:50,799
过渡API， 

732
00:30:50,799 --> 00:30:53,129
你知道，就像创建一个实际的过渡

733
00:30:53,130 --> 00:30:54,869
有点有趣。 

734
00:30:55,069 --> 00:30:58,119
并且已被类型擦除。 

735
00:30:58,119 --> 00:31:00,659
这意味着实际的过渡类型

736
00:31:00,660 --> 00:31:03,669
真正的过渡类型将是

737
00:31:03,869 --> 00:31:06,939
不在乎这是两个ViewModifiers 

738
00:31:06,940 --> 00:31:08,880
您正在使用的所有内容。 

739
00:31:08,880 --> 00:31:10,630
它们可能非常复杂。 

740
00:31:10,630 --> 00:31:13,960
我们正在尝试将它们作为.transition的参数传递

741
00:31:13,960 --> 00:31:16,130
我们不想那样，所以我们要简单。 

742
00:31:16,130 --> 00:31:19,089
 .transition函数的参数

743
00:31:19,289 --> 00:31:22,009
被称为AnyTransition。 

744
00:31:22,009 --> 00:31:24,819
而且此AnyTransition是类型擦除的过渡。 

745
00:31:24,819 --> 00:31:27,212
想像一下， 

746
00:31:27,212 --> 00:31:32,089
那AnyTransition只是一个带有初始化程序的结构

747
00:31:32,089 --> 00:31:35,039
不用理会， 

748
00:31:35,039 --> 00:31:38,549
这是我们拥有修饰符和所有其他东西的过渡。 

749
00:31:38,549 --> 00:31:42,559
而且它只知道如何使用它进行过渡。 

750
00:31:42,559 --> 00:31:45,029
而您得到的只是AnyTransition 

751
00:31:45,029 --> 00:31:47,442
没有任何不在乎或任何业务。 

752
00:31:48,319 --> 00:31:52,159
如此擦除类型，就可以简化和丢失。 

753
00:31:52,160 --> 00:31:52,792
我们并没有真正失去它， 

754
00:31:52,992 --> 00:31:55,296
但我们看不到所有细节

755
00:31:55,296 --> 00:31:57,664
就像它使用的是哪种ViewModifiers， 

756
00:31:57,664 --> 00:32:00,499
我们在许多情况下都在Swift中做到了， 

757
00:32:00,499 --> 00:32:02,029
您甚至可以使用View 

758
00:32:02,029 --> 00:32:04,690
有一个名为AnyView的视图， 

759
00:32:04,690 --> 00:32:06,940
它的初始化程序将采用任何一种View 

760
00:32:06,940 --> 00:32:09,400
不管有多复杂并返回您的AnyView 

761
00:32:09,400 --> 00:32:11,109
并删除所有这些信息， 

762
00:32:11,309 --> 00:32:13,599
您现在将拥有一个称为AnyView的视图， 

763
00:32:13,599 --> 00:32:14,907
它是AnyView类型的

764
00:32:14,907 --> 00:32:17,240
你对里面的东西一无所知

765
00:32:17,240 --> 00:32:19,421
或修改过的内容，或全部都没有。 

766
00:32:19,421 --> 00:32:21,059
如果你不明白我在说什么

767
00:32:21,059 --> 00:32:23,089
关于类型擦除，不必太担心

768
00:32:23,089 --> 00:32:25,049
我们将在本季度晚些时候再次看到它。 

769
00:32:25,049 --> 00:32:26,889
但重要的是要意识到

770
00:32:26,890 --> 00:32:29,659
那AnyTransition只是一个结构。 

771
00:32:29,859 --> 00:32:32,859
它具有一些用于内置过渡的静态var 

772
00:32:32,859 --> 00:32:36,329
就像不透明，它可以动画化不透明度， 

773
00:32:36,329 --> 00:32:39,329
为框架修改器设置动画的比例

774
00:32:39,329 --> 00:32:42,549
使帧降为零然后返回。 

775
00:32:42,549 --> 00:32:45,289
您的作业有一个非常重要的过渡

776
00:32:45,289 --> 00:32:47,480
叫做offset CGSize， 

777
00:32:47,480 --> 00:32:50,940
这会导致视图在屏幕上移动

778
00:32:50,940 --> 00:32:54,379
在它来去去时有一些偏移。 

779
00:32:54,579 --> 00:32:57,500
好吧，在你的家庭作业中

780
00:32:57,500 --> 00:32:59,809
使您的卡片被处理

781
00:32:59,809 --> 00:33:02,450
从屏幕外飞到屏幕上

782
00:33:02,450 --> 00:33:06,059
所以您将要使用此偏移过渡

783
00:33:06,059 --> 00:33:07,452
对于那些意见。 

784
00:33:08,579 --> 00:33:11,599
您当然可以创建自己的过渡

785
00:33:11,599 --> 00:33:14,589
通过仅指定两个ViewModifiers。 

786
00:33:14,589 --> 00:33:18,369
屏幕上有东西时使用的修饰符

787
00:33:18,369 --> 00:33:21,919
并在不正确的时候使用，对，所以

788
00:33:21,920 --> 00:33:25,523
身份是开启时的状态，而活跃时则是活动的状态。 

789
00:33:27,609 --> 00:33:30,179
您还可以覆盖使用的动画

790
00:33:30,180 --> 00:33:32,700
如果您一直想要过渡，请进行过渡

791
00:33:32,700 --> 00:33:35,400
例如，要快或慢。 

792
00:33:35,400 --> 00:33:37,119
您可以使用此.animation 

793
00:33:37,319 --> 00:33:40,299
您对过渡的重视，好吧， 

794
00:33:40,299 --> 00:33:42,869
您知道吗，像.animation一样附加它。 

795
00:33:42,869 --> 00:33:44,949
不要被这个小东西弄糊涂

796
00:33:44,950 --> 00:33:46,650
这不是隐式动画， 

797
00:33:46,650 --> 00:33:49,640
隐式动画过渡，它们不能一起使用。 

798
00:33:49,640 --> 00:33:54,150
这只是覆盖持续时间的一种方法

799
00:33:54,150 --> 00:33:56,879
和曲线以及所有过渡动画

800
00:33:57,079 --> 00:33:58,762
这样总是这样。 

801
00:34:01,150 --> 00:34:05,639
过渡可能很棘手，并且有些令人沮丧

802
00:34:05,839 --> 00:34:07,720
有时候，当您第一次使用它们时， 

803
00:34:07,720 --> 00:34:11,110
因为这个限制

804
00:34:11,110 --> 00:34:13,237
具有视图的屏幕必须已经在屏幕上。 

805
00:34:13,436 --> 00:34:16,597
例如，在您的家庭作业三中， 

806
00:34:16,597 --> 00:34:21,349
您需要以动画方式分发卡片

807
00:34:21,349 --> 00:34:24,060
时尚到屏幕上。不能像在哪里记忆

808
00:34:24,061 --> 00:34:26,010
记住发射，哦， 

809
00:34:26,010 --> 00:34:27,730
屏幕上已经有卡片了。 

810
00:34:27,730 --> 00:34:31,315
不，必须暂时启动

811
00:34:31,315 --> 00:34:34,375
然后卡片飞起来并自动运行， 

812
00:34:34,375 --> 00:34:37,163
屏幕上会出现一种交易动画。 

813
00:34:38,119 --> 00:34:40,940
你如何摆脱这个难题

814
00:34:41,829 --> 00:34:44,904
包含卡片的视图必须首先出现在屏幕上

815
00:34:44,905 --> 00:34:46,297
然后在屏幕上显示之后

816
00:34:46,297 --> 00:34:51,221
那么您可以做一些导致卡片发生的事情。 

817
00:34:51,221 --> 00:34:55,699
 View有一个很棒的功能可以帮助您

818
00:34:55,699 --> 00:34:58,609
叫做onAppear，非常简单。 

819
00:34:58,610 --> 00:35:00,367
有点像onTapGesture，对， 

820
00:35:00,367 --> 00:35:05,170
 onTapGesture，在发生轻按时会调用此闭包， 

821
00:35:05,170 --> 00:35:08,519
执行一些代码，这是一样的， 

822
00:35:08,519 --> 00:35:13,170
当视图出现在屏幕上时，它将调用此代码。 

823
00:35:13,170 --> 00:35:15,264
所以我们将使用这个不错的小功能

824
00:35:15,264 --> 00:35:17,903
在我们的容器视图上。 

825
00:35:17,903 --> 00:35:20,664
在容器视图上，我们将添加onAppear 

826
00:35:20,664 --> 00:35:23,471
在该代码中，我们将进行更改

827
00:35:23,471 --> 00:35:26,538
我们模型中的某些东西可能使它

828
00:35:26,538 --> 00:35:29,719
所以那些不存在的卡， 

829
00:35:29,719 --> 00:35:31,709
当我的容器视图首次出现时， 

830
00:35:31,710 --> 00:35:32,978
关于他们的一些改变

831
00:35:32,978 --> 00:35:35,309
现在他们需要在那里。 

832
00:35:35,309 --> 00:35:37,409
现在，他们将在屏幕上播放动画。 

833
00:35:38,307 --> 00:35:41,628
我们正在使用这样的事实，我们知道您在Appear上知道

834
00:35:41,628 --> 00:35:43,558
我们的容器视图终于出现在屏幕上了

835
00:35:43,559 --> 00:35:48,036
继续对模型做一些意图，说，好吧， 

836
00:35:48,036 --> 00:35:50,409
您可以立即发卡。 

837
00:35:50,409 --> 00:35:52,274
因此，模型必须以某种方式更改

838
00:35:52,275 --> 00:35:56,664
现在突然被扔进了视野， 

839
00:35:56,664 --> 00:35:59,779
因为视图只是反映了模型中的内容。 

840
00:35:59,780 --> 00:36:01,211
因此，如果模型说卡片在那里， 

841
00:36:01,211 --> 00:36:03,722
当应用启动时，它们将在那里。 

842
00:36:03,722 --> 00:36:06,559
因此，在应用启动时，卡片不必在那儿， 

843
00:36:06,559 --> 00:36:08,913
然后在容器上发生onAppear之后， 

844
00:36:08,914 --> 00:36:13,074
然后卡片在那里的地方发生了一些事情。 

845
00:36:13,074 --> 00:36:16,474
所以您已经得到了信息，我敢肯定， 

846
00:36:16,474 --> 00:36:19,159
实际的动画是由ViewModifiers完成的

847
00:36:19,159 --> 00:36:20,539
和形状。 

848
00:36:20,539 --> 00:36:23,621
它们是真正活跃的东西。 

849
00:36:23,621 --> 00:36:26,539
他们如何参与整个动画系统？ 

850
00:36:26,539 --> 00:36:29,672
 ViewModifiers和Shapes，如何动画化？ 

851
00:36:29,672 --> 00:36:30,679
好吧，本质上， 

852
00:36:30,679 --> 00:36:33,769
动画系统将持续时间分开

853
00:36:33,769 --> 00:36:36,170
动画分成小块， 

854
00:36:36,170 --> 00:36:37,610
取决于曲线。 

855
00:36:37,610 --> 00:36:40,920
然后它只询问所有形状和ViewModifiers 

856
00:36:40,920 --> 00:36:41,980
可以动画的

857
00:36:41,980 --> 00:36:44,349
在这里，画这幅画，画这幅画，画这幅画，对， 

858
00:36:44,349 --> 00:36:45,679
只是一遍又一遍地吸引他们

859
00:36:45,679 --> 00:36:48,799
然后将其拼凑成小电影， 

860
00:36:48,800 --> 00:36:50,731
这是动画。 

861
00:36:50,731 --> 00:36:51,579
而已。 

862
00:36:51,579 --> 00:36:53,135
这件事就是这样

863
00:36:53,135 --> 00:36:57,743
要使它正常工作，它是非常优雅和简单的。 

864
00:36:58,659 --> 00:37:01,190
动画系统之间的通讯

865
00:37:01,190 --> 00:37:05,539
而ViewModifiers和Shapes只是一个变量， 

866
00:37:05,539 --> 00:37:08,230
此var animatableData。 

867
00:37:08,230 --> 00:37:11,289
这个animatableData在Animatable协议中， 

868
00:37:11,289 --> 00:37:13,349
这是那里唯一的变种。 

869
00:37:13,349 --> 00:37:16,409
您所要做的就是实现这一点。 

870
00:37:16,409 --> 00:37:18,929
如果您是Shape或ViewModifier， 

871
00:37:18,929 --> 00:37:22,652
您可以参加这个分段动画。 

872
00:37:23,539 --> 00:37:26,949
 animatableData的类型是无关紧要的。 

873
00:37:26,949 --> 00:37:28,529
其实有点关怀

874
00:37:28,530 --> 00:37:31,097
因为该类型必须实现协议

875
00:37:31,097 --> 00:37:33,670
 VectorArithmetic，这很有意义

876
00:37:33,670 --> 00:37:36,125
因为我们要使用这个animableData， 

877
00:37:36,125 --> 00:37:38,784
无论是角度的旋转

878
00:37:38,784 --> 00:37:42,539
派的东西，或者类似的东西

879
00:37:42,539 --> 00:37:43,909
我们将切成小块

880
00:37:43,909 --> 00:37:45,889
所以我们必须能够对此做一些数学运算

881
00:37:45,889 --> 00:37:49,982
用那条漂亮的曲线把它切成碎片

882
00:37:49,983 --> 00:37:52,940
所以类型几乎总是浮点数

883
00:37:52,940 --> 00:37:55,528
很多时候是浮动的，两倍的或CGFloat的

884
00:37:55,528 --> 00:37:58,489
因为我们正在这里做很多绘图。 

885
00:37:58,489 --> 00:38:01,003
但是还有另一个实现VectorArithmetic的结构

886
00:38:01,003 --> 00:38:04,269
叫做AnimatablePair真的很酷。 

887
00:38:04,269 --> 00:38:08,653
它将两个VectorArithmetic事物组合为一个

888
00:38:08,653 --> 00:38:10,670
动画VectorArithmetic事物。 

889
00:38:10,670 --> 00:38:12,369
当然，您可以拥有AnimatablePairs 

890
00:38:12,369 --> 00:38:13,799
 AnimatablePairs。 

891
00:38:13,800 --> 00:38:16,414
因此，您可以拥有任意数量的动画对象。 

892
00:38:16,614 --> 00:38:19,869
另外，如果您有自己的复杂结构， 

893
00:38:19,869 --> 00:38:22,619
封装了动画数据， 

894
00:38:22,619 --> 00:38:24,873
您可以使其实现VectorArithmetic， 

895
00:38:24,873 --> 00:38:25,903
那只是一个协议。 

896
00:38:26,103 --> 00:38:28,789
它可以直接制作动画。 

897
00:38:28,789 --> 00:38:31,670
 animatableData只能是某种东西

898
00:38:31,670 --> 00:38:34,070
可以切成小块。 

899
00:38:34,070 --> 00:38:36,677
因此，它必须实现VectorArithmetic。 

900
00:38:36,677 --> 00:38:39,519
正如我所说，这个变种正在双向交流

901
00:38:39,719 --> 00:38:40,929
动画系统之间

902
00:38:40,929 --> 00:38:43,169
以及Shapes和ViewModifiers。 

903
00:38:43,170 --> 00:38:44,623
因此，此var的设置

904
00:38:44,623 --> 00:38:46,248
那就是动画系统说的

905
00:38:46,248 --> 00:38:47,626
这是一小块，画出来， 

906
00:38:47,626 --> 00:38:49,299
这是一小块，画出来， 

907
00:38:49,300 --> 00:38:52,914
所以基本上是在说曲线中的哪个位置

908
00:38:53,114 --> 00:38:56,029
你的一些动画数据是

909
00:38:56,030 --> 00:38:57,780
在这个动画中。 

910
00:38:57,780 --> 00:38:59,699
现在，获取var也对

911
00:38:59,699 --> 00:39:02,802
动画系统知道动画的开始和结束。 

912
00:39:04,907 --> 00:39:07,929
现在，这个animableData 

913
00:39:07,929 --> 00:39:10,773
通常是计算型变数，不是因为必须

914
00:39:10,773 --> 00:39:12,402
绝对不是必须的。 

915
00:39:12,402 --> 00:39:16,599
就像我们在Pie中的代码一样， 

916
00:39:16,599 --> 00:39:19,692
或者您知道我们的Cardify ViewModifier， 

917
00:39:19,693 --> 00:39:22,750
我们将对其进行修改，以便卡片翻转

918
00:39:22,949 --> 00:39:23,782
它旋转了。 

919
00:39:23,782 --> 00:39:25,873
所以在那边，我真的很想称呼轮换

920
00:39:25,873 --> 00:39:27,863
我的翻转卡“旋转” 

921
00:39:27,864 --> 00:39:29,744
我不想称它为animatableData， 

922
00:39:29,744 --> 00:39:31,665
它不是var的好名字。 

923
00:39:31,666 --> 00:39:33,804
所以很多时候我们要创建一个计算变量

924
00:39:33,804 --> 00:39:38,085
只是本质上重命名一些内部变量

925
00:39:38,085 --> 00:39:40,342
这样动画系统才能看到它。 

926
00:39:41,465 --> 00:39:43,355
因此，让我们开始进行演示。 

927
00:39:43,554 --> 00:39:46,523
我们将在这里做很多动画工作。 

928
00:39:46,523 --> 00:39:49,699
我们将做隐式动画， 

929
00:39:49,699 --> 00:39:51,003
但显然是做明确的动画

930
00:39:51,003 --> 00:39:52,703
我们要过渡

931
00:39:52,704 --> 00:39:55,210
我们将要修改一个ViewModifier， 

932
00:39:55,409 --> 00:39:58,539
我们将修改Shape的所有内容， 

933
00:39:58,539 --> 00:40:00,264
这是一个很大的，很长的演示。 

934
00:40:00,264 --> 00:40:02,583
因此，让我们现在就深入研究它。 

935
00:40:04,170 --> 00:40:05,960
让我们从这里开始动画演示

936
00:40:05,960 --> 00:40:08,184
带有一些隐式动画。 

937
00:40:08,184 --> 00:40:10,103
再次，这是一个动画，我们将要

938
00:40:10,103 --> 00:40:12,696
有一些非常独立的动画

939
00:40:12,697 --> 00:40:15,525
无论如何，它总是适用。 

940
00:40:15,525 --> 00:40:19,483
它并没有真正与许多其他活动协调

941
00:40:19,483 --> 00:40:21,590
在动画系统中进行。 

942
00:40:21,590 --> 00:40:25,672
为此我们要做的是拥有表情符号

943
00:40:25,871 --> 00:40:27,650
真的很兴奋并庆祝

944
00:40:27,650 --> 00:40:31,603
当他们通过翻筋斗来比赛时。 

945
00:40:31,603 --> 00:40:35,373
所以翻筋斗实际上是在旋转

946
00:40:35,373 --> 00:40:37,069
周围的表情符号。 

947
00:40:37,070 --> 00:40:39,280
旋转真的很容易

948
00:40:39,280 --> 00:40:41,751
在SwiftUI中，有一个ViewModifier 

949
00:40:41,751 --> 00:40:43,860
因为它称为旋转效果。 

950
00:40:44,059 --> 00:40:47,806
所以我要去这里查看我的文字，这是我的表情符号， 

951
00:40:47,806 --> 00:40:52,255
我只是要添加旋转效果

952
00:40:52,255 --> 00:40:53,369
在上面。 

953
00:40:53,369 --> 00:40:56,940
它需要一个角度，所以我要做角度。 

954
00:40:56,940 --> 00:40:59,268
我们在做Pie时就知道了这一点。 

955
00:40:59,268 --> 00:41:01,222
我要说的是，如果卡片匹配， 

956
00:41:01,422 --> 00:41:05,031
然后让我们开始颠倒一下， 

957
00:41:05,032 --> 00:41:07,871
 180度旋转

958
00:41:08,070 --> 00:41:10,163
我们最终将不得不进行完全的翻筋斗

959
00:41:10,163 --> 00:41:11,570
一路走来

960
00:41:12,550 --> 00:41:13,383
并运行。 

961
00:41:17,800 --> 00:41:19,500
点击卡片，我们正在寻找比赛。 

962
00:41:19,699 --> 00:41:21,782
哦，是的，它倒过来了

963
00:41:21,782 --> 00:41:25,132
但在那里没有做任何形式的动画。 

964
00:41:25,132 --> 00:41:26,753
就和bloop匹配了

965
00:41:26,753 --> 00:41:27,914
他们颠倒了。 

966
00:41:28,114 --> 00:41:30,584
那么我们该如何制作动画呢？ 

967
00:41:30,585 --> 00:41:33,501
好吧，假设我一直想翻筋斗

968
00:41:33,501 --> 00:41:34,786
当卡片匹配时， 

969
00:41:34,786 --> 00:41:36,905
我要做的就是在这里隐式动画

970
00:41:36,905 --> 00:41:39,283
并说动画。 

971
00:41:40,280 --> 00:41:43,840
我只指定动画的参数。 

972
00:41:43,840 --> 00:41:48,059
所以我要让这个动画是线性的

973
00:41:48,059 --> 00:41:52,299
我们将持续一秒钟。 

974
00:41:52,300 --> 00:41:55,690
我们在讲座中谈到的这个动画对象

975
00:41:55,690 --> 00:41:57,909
这绝对是您想要的

976
00:41:57,909 --> 00:42:01,194
查看此处的开发人员文档， 

977
00:42:01,195 --> 00:42:03,695
我们可以看到所有不同种类的动画

978
00:42:03,695 --> 00:42:07,135
 easeIn，easyInOut，线性等所有其他内容。 

979
00:42:07,335 --> 00:42:09,736
我说我们可以做：延迟动画， 

980
00:42:09,737 --> 00:42:13,146
显然会创建具有一定持续时间的内容。 

981
00:42:13,146 --> 00:42:15,739
这是所有需要学习的温泉

982
00:42:15,739 --> 00:42:17,586
关于动画。 

983
00:42:17,586 --> 00:42:20,320
今天我们将做很多这样的事情。 

984
00:42:20,320 --> 00:42:23,019
因此，让我们尝试一下，看看是否可行。 

985
00:42:23,019 --> 00:42:26,117
现在，这会在一秒钟内实现吗， 

986
00:42:26,117 --> 00:42:28,869
这是一个，哦，哇， 

987
00:42:28,869 --> 00:42:32,554
好吧，其中一个动画在这里，而不是两个。 

988
00:42:32,753 --> 00:42:33,922
让我们尝试另一个。 

989
00:42:33,922 --> 00:42:37,202
但同样，它会在一秒钟内完成该动画

990
00:42:37,202 --> 00:42:40,630
做到这一点，但它没有做到这一点。 

991
00:42:40,630 --> 00:42:44,043
现在，事实是，它仅执行其中一项操作， 

992
00:42:44,043 --> 00:42:45,288
有一个很好的理由

993
00:42:45,487 --> 00:42:47,347
我们稍后再讲。 

994
00:42:47,347 --> 00:42:49,278
现在，让我们确定一个正在运行的

995
00:42:49,278 --> 00:42:50,606
在做我们想要的。 

996
00:42:50,606 --> 00:42:55,029
让我们说360 

997
00:42:55,030 --> 00:42:56,213
所以一直。 

998
00:43:01,659 --> 00:43:03,559
我们正在尝试找到一个匹配的配对， 

999
00:43:03,559 --> 00:43:05,183
喔，一直到处翻筋斗。 

1000
00:43:05,184 --> 00:43:06,440
这些家伙呢？ 

1001
00:43:06,639 --> 00:43:11,109
喔，也许一旦配对，我们很兴奋

1002
00:43:11,110 --> 00:43:13,420
我们只是想继续前进或翻筋斗。 

1003
00:43:13,619 --> 00:43:15,438
让我们来看看这里的动画

1004
00:43:15,438 --> 00:43:19,542
这个线性动画，让我们重复RepeatForever。 

1005
00:43:23,250 --> 00:43:24,277
所以它正在做相同的动画

1006
00:43:24,277 --> 00:43:26,475
只是现在它会继续前进。 

1007
00:43:26,476 --> 00:43:29,030
现在的事情是，注意它确实做到了

1008
00:43:29,030 --> 00:43:30,230
但是它有点逆转

1009
00:43:30,429 --> 00:43:32,534
然后它再次执行并反转自身。 

1010
00:43:32,534 --> 00:43:33,869
这真的不是我们想要的

1011
00:43:33,869 --> 00:43:35,121
我们想四处走走。 

1012
00:43:35,121 --> 00:43:39,789
幸运的是，repeatForever在这里有一个争论， 

1013
00:43:39,989 --> 00:43:43,739
这是自动反转，我们会说自动反转为假， 

1014
00:43:43,739 --> 00:43:45,049
我们不希望它扭转

1015
00:43:45,050 --> 00:43:47,987
我们只想不断重复播放该动画。 

1016
00:43:47,987 --> 00:43:49,744
那是因为这个动画返回

1017
00:43:49,744 --> 00:43:51,304
到它开始的地方，所以很有意义

1018
00:43:51,304 --> 00:43:54,301
不断做下去。 

1019
00:43:54,302 --> 00:43:55,985
关于这个动画的唯一一件事

1020
00:43:55,985 --> 00:43:59,068
想在这里稍微小心一点的是

1021
00:44:00,740 --> 00:44:02,110
最终我们要添加一个新游戏

1022
00:44:02,110 --> 00:44:03,480
你在家庭作业中所做的

1023
00:44:03,480 --> 00:44:06,539
当我们这样做时，这些视图将被重用。 

1024
00:44:06,739 --> 00:44:08,809
而且我们不希望这个动画开始

1025
00:44:08,809 --> 00:44:09,643
在一个新游戏中。 

1026
00:44:09,643 --> 00:44:13,567
因此，从本质上讲，只要卡不匹配， 

1027
00:44:13,567 --> 00:44:17,300
我们不想永远重复一次。 

1028
00:44:17,300 --> 00:44:18,856
因此，无论何时您进行重复的永久动画， 

1029
00:44:18,856 --> 00:44:20,893
您要小心将其关闭

1030
00:44:20,893 --> 00:44:22,724
当它不再适用时。 

1031
00:44:22,724 --> 00:44:27,052
您只需说出卡片是否匹配即可在此处进行操作。 

1032
00:44:27,052 --> 00:44:29,362
我们将永远重复这一过程。 

1033
00:44:29,561 --> 00:44:31,690
但是否则，我们要回去做

1034
00:44:31,690 --> 00:44:34,070
不管默认动画是什么。 

1035
00:44:34,070 --> 00:44:37,893
就像别再做这个动画了。 

1036
00:44:38,860 --> 00:44:41,228
确保没有破坏任何东西。 

1037
00:44:41,228 --> 00:44:42,259
我们去比赛了。 

1038
00:44:42,259 --> 00:44:44,278
 Who，它在工作

1039
00:44:44,278 --> 00:44:45,623
它正在工作。 

1040
00:44:48,440 --> 00:44:50,860
现在，我们完成了此隐式动画。 

1041
00:44:50,860 --> 00:44:54,307
让我们继续做一个明确的动画。 

1042
00:44:54,307 --> 00:44:56,797
在做显式动画之前， 

1043
00:44:56,797 --> 00:45:00,029
我将执行您所做的一些工作

1044
00:45:00,030 --> 00:45:01,514
特别是在您的作业中， 

1045
00:45:01,514 --> 00:45:04,224
我要实施洗牌

1046
00:45:04,224 --> 00:45:07,289
而且我还要实施新游戏。 

1047
00:45:07,489 --> 00:45:08,322
洗牌， 

1048
00:45:08,322 --> 00:45:10,992
这是一个简单的到这里的模型

1049
00:45:10,992 --> 00:45:13,452
当我们创建卡片时， 

1050
00:45:13,452 --> 00:45:16,293
我只是说cards.shuffle。 

1051
00:45:17,269 --> 00:45:19,527
显然，如果您还没有做完一项作业， 

1052
00:45:19,527 --> 00:45:22,440
希望您不会观看此视频。 

1053
00:45:22,440 --> 00:45:25,420
但是接下来我要做新游戏

1054
00:45:25,420 --> 00:45:28,760
我们在那里有新游戏，这是第二本作业。 

1055
00:45:28,760 --> 00:45:29,840
希望您已经完成了第二个作业， 

1056
00:45:30,039 --> 00:45:31,704
这是在本次讲座之前。 

1057
00:45:31,704 --> 00:45:33,759
但是如果您还没有完成两个作业， 

1058
00:45:33,760 --> 00:45:36,150
现在该暂停该视频了， 

1059
00:45:36,349 --> 00:45:39,174
去提交你的作业二，然后回来

1060
00:45:39,175 --> 00:45:41,472
并继续观看。 

1061
00:45:41,672 --> 00:45:45,944
因此，使用cards.shuffle可以修复好那根衬纸。 

1062
00:45:45,945 --> 00:45:49,233
喔，这两个东西现在都洗了

1063
00:45:49,233 --> 00:45:50,650
彼此相邻。 

1064
00:45:50,849 --> 00:45:54,212
好吧，我们仍然可以匹配它们。 

1065
00:45:54,213 --> 00:45:56,440
好吧，新游戏怎么样？ 

1066
00:45:56,639 --> 00:46:01,639
新游戏要求我们在ViewModel中有一个Intent， 

1067
00:46:01,862 --> 00:46:03,902
就像我们有选择卡片的意图一样， 

1068
00:46:03,902 --> 00:46:07,105
我们将需要一个意图来创建一个新游戏。 

1069
00:46:07,105 --> 00:46:10,019
所以我叫这个resetGame 

1070
00:46:10,019 --> 00:46:13,269
我将通过创建一个新模型来重置游戏

1071
00:46:13,269 --> 00:46:16,483
我会说Model = EmojiMemoryGame.createMemoryGame 

1072
00:46:20,648 --> 00:46:22,748
创建新的记忆游戏， 

1073
00:46:22,748 --> 00:46:24,106
这就是我要做的。 

1074
00:46:24,106 --> 00:46:25,943
显然这将改变模型

1075
00:46:25,943 --> 00:46:28,793
这将导致这个ObservableObject 

1076
00:46:28,793 --> 00:46:30,840
因为此模型是@Published， 

1077
00:46:30,840 --> 00:46:34,387
所有这些都会发生，我们的整体视图将会重绘

1078
00:46:34,387 --> 00:46:36,290
因为这种变化。 

1079
00:46:36,291 --> 00:46:39,278
所以现在我需要在用户界面的某个位置添加一个按钮，对吗？ 

1080
00:46:39,478 --> 00:46:41,963
在我的界面中，我实际上没有新的游戏按钮， 

1081
00:46:41,963 --> 00:46:44,336
我无法让新游戏出现。 

1082
00:46:44,336 --> 00:46:48,550
因此，我将在底部非常简单的方法中添加一个新按钮。 

1083
00:46:48,550 --> 00:46:50,663
我要把我的纸牌放在这里

1084
00:46:50,862 --> 00:46:53,590
在VStack中

1085
00:46:53,590 --> 00:46:55,469
与

1086
00:46:55,469 --> 00:46:56,899
一个按钮。 

1087
00:46:56,900 --> 00:46:58,230
我们没有谈论巴顿

1088
00:46:58,230 --> 00:47:00,909
我没想到你在第二作业中

1089
00:47:00,909 --> 00:47:03,442
一定要做一个按钮， 

1090
00:47:03,443 --> 00:47:05,710
您可以轻松完成文本

1091
00:47:05,909 --> 00:47:09,243
在那儿使用onTapGesture可以了。 

1092
00:47:09,244 --> 00:47:10,840
但是当我们在这里时，让我们继续

1093
00:47:10,840 --> 00:47:12,480
并了解有关Button的知识。 

1094
00:47:12,480 --> 00:47:13,313
按钮很简单

1095
00:47:13,313 --> 00:47:16,440
它只有一个动作，需要执行一些关闭操作

1096
00:47:16,639 --> 00:47:17,799
当按钮被按下时。 

1097
00:47:17,800 --> 00:47:19,222
然后有这个标签

1098
00:47:19,222 --> 00:47:22,940
实际上，这就是您要成为标签的任何视图。 

1099
00:47:22,940 --> 00:47:26,119
所以我要在这里贴上文字标签

1100
00:47:26,119 --> 00:47:28,731
上面写着“新游戏”。 

1101
00:47:28,731 --> 00:47:31,940
就我将要采取的行动而言， 

1102
00:47:31,940 --> 00:47:33,769
让我们双击那里。 

1103
00:47:33,769 --> 00:47:37,998
我要执行刚才提到的Intent。 

1104
00:47:37,998 --> 00:47:40,756
所以self.viewModel.resetgame。 

1105
00:47:42,014 --> 00:47:44,522
通常，当用户界面发生问题时， 

1106
00:47:44,523 --> 00:47:47,800
就像我们点击卡片或单击按钮一样， 

1107
00:47:47,800 --> 00:47:49,420
我们要去做

1108
00:47:49,420 --> 00:47:50,590
两种意图

1109
00:47:50,590 --> 00:47:53,079
否则我们将要做一些完全

1110
00:47:53,079 --> 00:47:56,003
只影响用户界面，只是以某种方式调整用户界面

1111
00:47:56,003 --> 00:47:58,719
它并不会真正影响我们模型中的内容。 

1112
00:47:58,719 --> 00:48:00,338
让我们看看我们的新游戏Button是否有效。 

1113
00:48:00,338 --> 00:48:04,259
我们单击此处运行，嗯，下面有我们的新游戏

1114
00:48:04,259 --> 00:48:05,840
然后我们单击。 

1115
00:48:05,840 --> 00:48:06,750
让我们看看它在做什么。 

1116
00:48:06,949 --> 00:48:08,536
我们在那里有了新游戏。 

1117
00:48:08,536 --> 00:48:12,817
哇，是的，它确实改组了他们，在那里放了新卡。 

1118
00:48:12,817 --> 00:48:14,552
好吧，让我们看看是否有一些卡匹配

1119
00:48:14,552 --> 00:48:16,012
然后把它们放回去。 

1120
00:48:16,012 --> 00:48:18,007
因此，我们的新游戏Button正常运行。 

1121
00:48:18,007 --> 00:48:21,380
顺便说一句，这里使用Button和有什么区别

1122
00:48:21,380 --> 00:48:23,744
和带有onTapGesture的文本？ 

1123
00:48:23,744 --> 00:48:28,126
好吧，Button很强大，它知道这是一个Button。 

1124
00:48:28,126 --> 00:48:30,480
因此，由于它出现在不同的平台上， 

1125
00:48:30,480 --> 00:48:32,668
也许是Apple TV或Apple Watch等等

1126
00:48:32,668 --> 00:48:34,690
它会以某种方式绘制此按钮

1127
00:48:34,889 --> 00:48:36,656
在那个平台上有意义。 

1128
00:48:36,657 --> 00:48:38,626
尽管我们使用onTapGesture进行文本处理， 

1129
00:48:38,626 --> 00:48:40,603
它总是看起来像一段文字

1130
00:48:40,603 --> 00:48:41,764
我们点击。 

1131
00:48:41,764 --> 00:48:44,788
所以我们总是想用一个按钮来实现

1132
00:48:44,788 --> 00:48:46,250
当我们做一个按钮。 

1133
00:48:46,250 --> 00:48:49,429
我们不想做一个文本onTapGesture解决方案。 

1134
00:48:49,429 --> 00:48:51,679
我想提及的另一件事，就是我们在这里

1135
00:48:51,679 --> 00:48:55,050
是这个红色的“ New Game”字符串。 

1136
00:48:55,050 --> 00:48:57,010
这些琴弦是红色的，我很高兴它们是红色的。 

1137
00:48:57,010 --> 00:49:00,110
红色通常表示我会注意并且确实

1138
00:49:00,110 --> 00:49:02,219
您确实要注意红色的弦， 

1139
00:49:02,219 --> 00:49:04,445
如果您有红色的弦将出现

1140
00:49:04,445 --> 00:49:07,440
在用户面前，您需要做一些工作， 

1141
00:49:07,639 --> 00:49:08,625
我们现在不讨论

1142
00:49:08,625 --> 00:49:10,784
使它们国际化。 

1143
00:49:10,784 --> 00:49:12,865
这样你可以说

1144
00:49:12,865 --> 00:49:16,155
法语，中文或阿拉伯文的新游戏

1145
00:49:16,155 --> 00:49:18,775
或任何必须解决的问题。 

1146
00:49:18,974 --> 00:49:21,809
因此，我们不再谈论这个， 

1147
00:49:21,809 --> 00:49:23,630
如果您对此有兴趣， 

1148
00:49:23,630 --> 00:49:24,990
也许通过查看开始文档

1149
00:49:25,190 --> 00:49:28,639
在称为localizedString键的位置。 

1150
00:49:28,639 --> 00:49:30,222
那是至少获得你的弦乐的一种方法

1151
00:49:30,222 --> 00:49:32,119
开始本地化。 

1152
00:49:32,119 --> 00:49:34,118
还有其他地方也需要本地化

1153
00:49:34,119 --> 00:49:37,291
像日期之类的东西，日期出现的方式有所不同。 

1154
00:49:37,291 --> 00:49:38,931
再说一次，我们没有时间谈论这个。 

1155
00:49:38,931 --> 00:49:40,351
今天我们在谈论动画。 

1156
00:49:40,351 --> 00:49:42,900
我只想提个提要，那就是事情， 

1157
00:49:42,900 --> 00:49:45,528
我们最终要小心的地方

1158
00:49:45,528 --> 00:49:47,682
关于我们放在这里的字符串。 

1159
00:49:49,199 --> 00:49:51,019
好吧，新游戏成功了

1160
00:49:51,019 --> 00:49:55,059
但是正如我们在这里看到的那样，它没有激活动画， 

1161
00:49:55,059 --> 00:49:57,519
这样做，哇，它马上就变了。 

1162
00:49:57,519 --> 00:49:58,353
没有动画。 

1163
00:49:58,353 --> 00:50:01,144
所以我们希望整个过程都充满生气， 

1164
00:50:01,144 --> 00:50:03,594
事实证明，这确实很容易

1165
00:50:03,594 --> 00:50:05,076
使用显式动画， 

1166
00:50:05,076 --> 00:50:09,269
我们将包装这个重置游戏，它产生了很大的影响

1167
00:50:09,269 --> 00:50:10,992
在我们的模型上，并更改了所有卡片。 

1168
00:50:10,992 --> 00:50:13,960
好吧，所有这些更改，我们都可以制作动画

1169
00:50:13,960 --> 00:50:17,170
在此处用animation编写了简单的一行代码。 

1170
00:50:17,170 --> 00:50:19,076
就像我们做隐式动画一样， 

1171
00:50:19,076 --> 00:50:22,329
我们将指定所需的动画。 

1172
00:50:22,329 --> 00:50:25,295
我要使用easyInOut。注意我没有打字

1173
00:50:25,295 --> 00:50:30,295
完整的动画点easeInOut，Swift可以推断出

1174
00:50:30,717 --> 00:50:34,704
这是withAnimation的明显论点。 

1175
00:50:34,704 --> 00:50:38,000
然后需要一个闭包，不带参数， 

1176
00:50:38,199 --> 00:50:39,032
不返回任何参数， 

1177
00:50:39,032 --> 00:50:40,706
您可以在此处放置任何所需的代码。 

1178
00:50:40,706 --> 00:50:44,063
无论这对我们的用户界面造成了什么影响

1179
00:50:44,063 --> 00:50:45,940
它会变得生动起来。 

1180
00:50:45,940 --> 00:50:47,940
让我们看看这样做的样子。 

1181
00:50:51,639 --> 00:50:54,567
喔，我的天哪，实际上是一大堆

1182
00:50:54,567 --> 00:50:58,070
那里的动画效果很好。 

1183
00:50:58,070 --> 00:51:00,289
现在，如果我们想看看这里到底发生了什么

1184
00:51:00,289 --> 00:51:02,420
因为那里还有其他东西

1185
00:51:02,420 --> 00:51:04,340
持续褪色

1186
00:51:04,340 --> 00:51:08,000
我们可以通过easyInOut来更改持续时间

1187
00:51:08,199 --> 00:51:11,199
持续时间的动画，例如， 

1188
00:51:11,199 --> 00:51:13,419
两三秒。 

1189
00:51:13,420 --> 00:51:14,695
我会放慢动画的速度， 

1190
00:51:14,695 --> 00:51:16,630
我总是建议这样做

1191
00:51:16,630 --> 00:51:19,182
当你做动画的时候是放慢脚步

1192
00:51:19,182 --> 00:51:20,500
看看发生了什么。 

1193
00:51:20,500 --> 00:51:22,742
因此，我们开始尝试新游戏。 

1194
00:51:23,789 --> 00:51:27,396
好吧，看到卡片逐渐消失，朝下， 

1195
00:51:27,396 --> 00:51:30,510
他们就搬到了新位置。 

1196
00:51:30,510 --> 00:51:33,360
这就是动画。 

1197
00:51:33,360 --> 00:51:35,349
那么为什么会这样呢？ 

1198
00:51:35,349 --> 00:51:36,259
这些东西正在消失， 

1199
00:51:36,260 --> 00:51:41,260
那个幽灵，看到他淡出，回到他的卡背上？ 

1200
00:51:41,539 --> 00:51:42,373
那是因为我告诉你

1201
00:51:42,373 --> 00:51:45,000
那过渡

1202
00:51:45,000 --> 00:51:46,860
默认情况下

1203
00:51:46,860 --> 00:51:48,150
不透明。 

1204
00:51:48,150 --> 00:51:49,936
当我们切换时发生了什么

1205
00:51:49,936 --> 00:51:52,257
它正在过渡到新的视图

1206
00:51:52,257 --> 00:51:54,860
所以我们只是在淡化新的

1207
00:51:54,860 --> 00:51:56,750
并将旧的褪色。 

1208
00:51:56,750 --> 00:51:58,661
我们真的不想要那个，我们想要我们的卡片

1209
00:51:58,661 --> 00:52:00,829
他们走时实际上要翻身

1210
00:52:00,829 --> 00:52:03,460
从后到前，从前到后， 

1211
00:52:03,460 --> 00:52:05,519
我们将在几分钟后解决此问题。 

1212
00:52:05,719 --> 00:52:09,439
但首先，让我们使用显式动画的相同功能

1213
00:52:09,440 --> 00:52:12,400
为此，请点击卡片上的动画， 

1214
00:52:12,400 --> 00:52:13,556
因为现在非常突然

1215
00:52:13,556 --> 00:52:16,796
如果您点击卡片，事情就会立即出现

1216
00:52:16,797 --> 00:52:18,659
这样不好

1217
00:52:18,659 --> 00:52:21,779
同样，在这里我们选择卡片

1218
00:52:21,780 --> 00:52:25,471
从我们可以用动画说的命令性代码中

1219
00:52:25,471 --> 00:52:28,869
让我们继续前进，使其成为线性动画

1220
00:52:28,869 --> 00:52:31,391
而且我们会尽可能长，这样我们才能真正

1221
00:52:31,590 --> 00:52:34,799
看到它的实际效果，看看发生了什么。 

1222
00:52:34,800 --> 00:52:37,019
在内部，我们会做我们将要做的一切， 

1223
00:52:37,219 --> 00:52:39,043
那会导致很多变化发生

1224
00:52:39,043 --> 00:52:41,292
所有这些更改都将被动画化。 

1225
00:52:46,414 --> 00:52:49,769
好的，我们去点击

1226
00:52:49,769 --> 00:52:53,724
我们可以看到我们正在逐渐淡出

1227
00:52:53,724 --> 00:52:55,039
当我们选择一张卡时。 

1228
00:52:55,239 --> 00:52:57,813
并请注意，我点击了这张卡片，但它动画了

1229
00:52:57,813 --> 00:52:59,594
发生的所有变化，包括

1230
00:52:59,594 --> 00:53:03,168
这些其他卡片朝下翻转。 

1231
00:53:03,168 --> 00:53:05,980
这样，当您放置此显式动画时， 

1232
00:53:06,179 --> 00:53:08,219
它将使发生的一切都充满生气

1233
00:53:08,219 --> 00:53:10,560
做在那里的事的结果。 

1234
00:53:10,561 --> 00:53:12,844
包括类似比赛的内容

1235
00:53:13,043 --> 00:53:17,139
让我们尝试在这里找到自己的比赛。 

1236
00:53:17,139 --> 00:53:18,788
我们不是很擅长这款游戏。 

1237
00:53:18,788 --> 00:53:20,224
让我们看看，有一场比赛。 

1238
00:53:20,224 --> 00:53:23,478
顺便说一下，我们在那里获得了隐式动画

1239
00:53:23,478 --> 00:53:25,299
如果我们点击此处的另一张卡片， 

1240
00:53:25,300 --> 00:53:27,170
这两张卡将消失。 

1241
00:53:27,170 --> 00:53:31,050
让我们看看它们消失的方式，对吗？ 

1242
00:53:31,050 --> 00:53:32,280
因为这是默认过渡

1243
00:53:32,280 --> 00:53:34,170
我们尚未指定任何转换

1244
00:53:34,170 --> 00:53:36,112
我们得到淡入和淡出过渡

1245
00:53:36,112 --> 00:53:38,048
在这里的所有地方。 

1246
00:53:38,048 --> 00:53:41,039
如果我们希望那些东西消失

1247
00:53:41,039 --> 00:53:43,529
成为更酷的动画

1248
00:53:43,530 --> 00:53:47,231
像我们如何让它们缩小并消失？ 

1249
00:53:47,231 --> 00:53:49,637
真的很容易再做一次，我们要去这里

1250
00:53:49,836 --> 00:53:51,927
找到那个视图，那个视图在哪里？ 

1251
00:53:51,927 --> 00:53:53,902
就在这里

1252
00:53:53,902 --> 00:53:57,577
这是View，这是ZStack的名称， 

1253
00:53:57,577 --> 00:54:00,480
当它面朝上时才存在

1254
00:54:00,480 --> 00:54:02,369
或者卡不匹配。 

1255
00:54:02,369 --> 00:54:05,384
因此，一旦卡片匹配且没有面朝上， 

1256
00:54:05,385 --> 00:54:07,554
此视图消失。 

1257
00:54:07,753 --> 00:54:12,753
它过渡出来，好了，从视图中消失了， 

1258
00:54:13,050 --> 00:54:15,730
所以我们可以在这里说过渡

1259
00:54:15,929 --> 00:54:19,782
并选择例如AnyTransition.scale。 

1260
00:54:21,260 --> 00:54:24,519
因此规模是使用框架制造事物的尺度

1261
00:54:24,719 --> 00:54:28,880
放大，缩小到虚无或从无到有。 

1262
00:54:28,880 --> 00:54:32,050
因此，让我们看看是否可以在这里找到另一个匹配项。 

1263
00:54:32,050 --> 00:54:35,409
现在，很难做，因为

1264
00:54:35,409 --> 00:54:37,067
这里的动画太慢了

1265
00:54:37,067 --> 00:54:38,570
哦，有比赛。 

1266
00:54:38,570 --> 00:54:40,039
好吧，当我们点击其他东西时， 

1267
00:54:40,239 --> 00:54:43,402
让我们来看看如何为这些汽车的消失制作动画。 

1268
00:54:44,239 --> 00:54:48,912
哇，现在注意，只有缩小后它们才会消失， 

1269
00:54:48,913 --> 00:54:52,650
但所有其他动画，包括该隐式动画， 

1270
00:54:52,650 --> 00:54:53,882
他们继续前进。 

1271
00:54:53,882 --> 00:54:56,409
关于SwiftUI，您要了解的一件事是

1272
00:54:56,409 --> 00:54:58,221
所有动画都可以同时发生

1273
00:54:58,420 --> 00:55:00,489
他们都在一起工作。 

1274
00:55:00,489 --> 00:55:03,575
确实，这是SwiftUI最好的东西之一， 

1275
00:55:03,576 --> 00:55:05,478
是如何处理所有交互的

1276
00:55:05,478 --> 00:55:08,639
动画同时发生。 

1277
00:55:08,639 --> 00:55:11,737
现在在您的作业中，您将收到卡片

1278
00:55:11,737 --> 00:55:13,128
以及进行。 

1279
00:55:13,128 --> 00:55:15,648
但是你不会让他们缩小规模， 

1280
00:55:15,648 --> 00:55:19,190
您将要让您的卡在屏幕上飞行。 

1281
00:55:19,190 --> 00:55:21,461
因此它们将飞离屏幕而不是屏幕， 

1282
00:55:21,461 --> 00:55:23,050
你知道，缩小。 

1283
00:55:23,050 --> 00:55:25,190
当它们被处理后，当它们出现在屏幕上时， 

1284
00:55:25,190 --> 00:55:27,500
他们会飞进去，不会去

1285
00:55:27,500 --> 00:55:29,652
具有很好的收缩效果。 

1286
00:55:30,710 --> 00:55:32,460
并添加该过渡

1287
00:55:32,460 --> 00:55:34,929
对于这些来来往往的事情， 

1288
00:55:34,929 --> 00:55:38,059
还可以使它们回来时，您单击

1289
00:55:38,059 --> 00:55:41,512
在新游戏上，它们又回来了，应该放大。 

1290
00:55:43,489 --> 00:55:45,839
这个AnyTransition和记住的是

1291
00:55:45,840 --> 00:55:48,380
该类型删除的过渡版本。 

1292
00:55:48,380 --> 00:55:51,079
因此，让我们在开发人员文档中进行研究

1293
00:55:51,079 --> 00:55:53,349
真的很快，这里是AnyTransition。 

1294
00:55:53,349 --> 00:55:55,719
这就是我们谈论的身份，不透明性

1295
00:55:55,719 --> 00:55:59,679
这是默认的，缩放，滑动，向下滑动到侧面， 

1296
00:55:59,679 --> 00:56:01,039
这边是偏移量

1297
00:56:01,039 --> 00:56:03,690
这是使视图飞来飞去的一种

1298
00:56:03,690 --> 00:56:04,559
进进出出。 

1299
00:56:04,559 --> 00:56:06,610
因此，这可能就是您要做家庭作业的目的。 

1300
00:56:06,610 --> 00:56:10,521
这是修饰符，您可以在其中指定两个

1301
00:56:10,521 --> 00:56:13,864
 ViewModifiers。顺便说一下，这种不对称性使您可以

1302
00:56:13,864 --> 00:56:16,210
可以让卡片带有一个动画

1303
00:56:16,210 --> 00:56:19,210
然后根据需要消失，并显示另一个动画。 

1304
00:56:20,170 --> 00:56:21,880
看到AnyTransition在这里说， 

1305
00:56:21,880 --> 00:56:24,519
这是一种类型擦除的过渡。 

1306
00:56:24,719 --> 00:56:26,239
这种类型擦除是使

1307
00:56:26,239 --> 00:56:28,122
这一切都非常简单。 

1308
00:56:28,123 --> 00:56:30,659
这是这些东西的回报类型

1309
00:56:30,659 --> 00:56:35,039
不是过渡角括号的ViewModifier 

1310
00:56:35,039 --> 00:56:38,210
抵消...这只是AnyTransition。 

1311
00:56:38,210 --> 00:56:41,340
再说一次，我们将更多地讨论类型擦除

1312
00:56:41,340 --> 00:56:42,809
在本季度晚些时候。 

1313
00:56:42,809 --> 00:56:44,239
现在您可以忽略它

1314
00:56:44,239 --> 00:56:47,129
并认为过渡只是哦过渡

1315
00:56:47,130 --> 00:56:49,077
不用担心所有的不在乎

1316
00:56:49,077 --> 00:56:51,000
和其他可能涉及的东西

1317
00:56:51,000 --> 00:56:53,639
具有非类型擦除的过渡。 

1318
00:56:53,639 --> 00:56:56,532
所以这里的房间动画里的大象， 

1319
00:56:56,532 --> 00:57:00,139
我们没有的是卡片翻转。 

1320
00:57:00,139 --> 00:57:02,670
真的，当我们玩纸牌游戏时， 

1321
00:57:02,670 --> 00:57:04,670
当我们点击这些卡片时， 

1322
00:57:04,670 --> 00:57:06,880
你不希望他们像这样淡入淡出

1323
00:57:06,880 --> 00:57:09,170
我们希望他们翻身。 

1324
00:57:09,170 --> 00:57:11,300
这就是纸牌的作用，它们会翻转。 

1325
00:57:11,300 --> 00:57:14,570
那么我们该怎么做翻转动画呢？ 

1326
00:57:14,570 --> 00:57:17,170
好吧，斯威夫特将对我们有很大帮助

1327
00:57:17,170 --> 00:57:20,269
因为它有一个Animatable ViewModifier 

1328
00:57:20,269 --> 00:57:22,920
称为旋转3D效果

1329
00:57:22,920 --> 00:57:26,500
就像我们旋转比赛一样旋转它。 

1330
00:57:26,500 --> 00:57:30,460
如果您还记得，在比赛中，我们以2D旋转， 

1331
00:57:30,460 --> 00:57:31,869
本质上是一圈又一圈。 

1332
00:57:31,869 --> 00:57:35,000
我们也可以3D旋转让此View旋转

1333
00:57:35,000 --> 00:57:37,132
在围绕不同轴的3D中， 

1334
00:57:37,132 --> 00:57:40,719
这个y垂直轴，而不是围绕旋转

1335
00:57:40,719 --> 00:57:43,259
该点的轴线直指我们。 

1336
00:57:43,259 --> 00:57:46,219
因此，让我们对该卡进行3D旋转

1337
00:57:46,219 --> 00:57:47,039
然后看看它是否有效。 

1338
00:57:47,239 --> 00:57:51,329
这就是所谓的rotation3DEffect。 

1339
00:57:51,329 --> 00:57:55,319
然后指定要旋转卡的数量。 

1340
00:57:55,320 --> 00:57:59,519
再次，在这里，我们将做Angle.degrees。 

1341
00:57:59,719 --> 00:58:02,939
如果卡面朝上， 

1342
00:58:02,940 --> 00:58:05,730
那么就不要让它旋转正常

1343
00:58:05,730 --> 00:58:09,519
但是如果它面朝下，让我们将其旋转180度。 

1344
00:58:09,519 --> 00:58:11,509
让我们将其完全翻转。 

1345
00:58:11,510 --> 00:58:14,681
现在，由于这是3D旋转，所以该轴

1346
00:58:14,681 --> 00:58:18,487
该轴表示您要围绕哪个轴旋转， 

1347
00:58:18,487 --> 00:58:19,320
这是三个数字

1348
00:58:19,320 --> 00:58:23,320
因此，例如（0，0，1）将是2D旋转， 

1349
00:58:23,320 --> 00:58:26,250
原因1，最后一个是z轴。 

1350
00:58:26,250 --> 00:58:29,260
那是从屏幕上指向你的那个， 

1351
00:58:29,260 --> 00:58:33,070
而我们想要的是y轴

1352
00:58:33,070 --> 00:58:35,007
 y轴是垂直轴， 

1353
00:58:35,206 --> 00:58:36,869
从屏幕顶部开始的那个

1354
00:58:36,869 --> 00:58:38,449
一直到屏幕底部

1355
00:58:38,449 --> 00:58:42,549
我们希望这种旋转围绕该轴发生。 

1356
00:58:42,550 --> 00:58:45,510
看看有什么用，那是不对的。 

1357
00:58:45,510 --> 00:58:47,400
让我们看看我们得到了什么。 

1358
00:58:47,599 --> 00:58:49,619
哇，哇

1359
00:58:49,619 --> 00:58:52,190
所以这很有趣。 

1360
00:58:52,190 --> 00:58:54,420
它在旋转， 

1361
00:58:54,420 --> 00:58:57,460
但是视图在那里出现和消失

1362
00:58:57,460 --> 00:58:59,269
褪色仍在发生

1363
00:58:59,469 --> 00:59:01,429
那真的不是我们想要的。 

1364
00:59:01,429 --> 00:59:03,000
当我们第一次点击该卡片时， 

1365
00:59:03,000 --> 00:59:05,690
如果前后都可见

1366
00:59:05,690 --> 00:59:08,889
一个人逐渐消失，然后逐渐消失， 

1367
00:59:08,889 --> 00:59:12,362
背面完全淡出，正面已经淡入。 

1368
00:59:13,489 --> 00:59:16,087
这很近，很近， 

1369
00:59:16,088 --> 00:59:18,440
我们正在努力完成这项工作， 

1370
00:59:18,440 --> 00:59:20,099
但这不是很正确。 

1371
00:59:20,099 --> 00:59:23,719
因此，有两种方法可以使我完成这项工作。 

1372
00:59:23,719 --> 00:59:27,869
第一，我们可以有自己的自定义过渡， 

1373
00:59:27,869 --> 00:59:30,089
正在过渡的过渡

1374
00:59:30,090 --> 00:59:32,329
在前后之间

1375
00:59:32,329 --> 00:59:36,469
后面有点像我们将它向上翻转， 

1376
00:59:36,469 --> 00:59:38,489
背面显示

1377
00:59:39,784 --> 00:59:41,769
一会儿，直到它站起来

1378
00:59:41,769 --> 00:59:42,940
然后它消失了

1379
00:59:42,940 --> 00:59:44,500
然后当正面出现时， 

1380
00:59:44,500 --> 00:59:47,880
它从边缘开始，然后向下旋转。 

1381
00:59:47,880 --> 00:59:52,289
我们绝对可以编写一个做到这一点的ViewModifier 

1382
00:59:52,289 --> 00:59:53,719
然后从中过渡出来

1383
00:59:53,719 --> 00:59:57,539
或者我们正在使用这种半翻转的方式

1384
00:59:57,539 --> 00:59:59,619
让卡进出。 

1385
00:59:59,619 --> 01:00:01,609
确实有点复杂， 

1386
01:00:01,610 --> 01:00:03,150
比我认为我们需要做的

1387
01:00:03,150 --> 01:00:05,639
因为如果我们还记得动画是如何工作的

1388
01:00:05,639 --> 01:00:08,920
我们知道ViewModifiers是主要的东西

1389
01:00:08,920 --> 01:00:11,000
做动画。 

1390
01:00:11,000 --> 01:00:14,500
那为什么不随便拿我们的ViewModifier 

1391
01:00:14,500 --> 01:00:19,500
这张卡并使其旋转时变得很聪明

1392
01:00:19,960 --> 01:00:23,099
本身，这样它只显示前半部分的前部

1393
01:00:23,099 --> 01:00:26,880
动画，仅在下半场显示背面。 

1394
01:00:26,880 --> 01:00:29,900
换句话说，我们将在这里进行Cardify。 

1395
01:00:29,900 --> 01:00:31,460
这是我们的Cardify 

1396
01:00:31,460 --> 01:00:33,369
当它旋转时

1397
01:00:33,369 --> 01:00:35,420
我们会做到的，这样您就可以旋转自己。 

1398
01:00:35,420 --> 01:00:36,639
这样做的时候

1399
01:00:36,639 --> 01:00:41,639
它将协调旋转时面朝上的内容。 

1400
01:00:41,769 --> 01:00:43,309
轮换的前半部分

1401
01:00:43,309 --> 01:00:46,452
脸朝下将是他们的下半部分旋转，脸朝下。 

1402
01:00:47,679 --> 01:00:50,619
好吧，我们要做的第一件事就是吃这个

1403
01:00:50,619 --> 01:00:52,940
 rotation3DEffect在这里

1404
01:00:52,940 --> 01:00:54,980
并将其移入

1405
01:00:54,980 --> 01:00:55,813
我们的

1406
01:00:56,880 --> 01:00:58,210
修饰符。 

1407
01:00:58,210 --> 01:01:00,150
所以如果我们把它放在这里

1408
01:01:00,150 --> 01:01:03,630
并将这个ZStack旋转到这里。 

1409
01:01:03,630 --> 01:01:07,539
不用旋转卡

1410
01:01:07,739 --> 01:01:11,439
在0到180之间的二进制意义上， 

1411
01:01:11,440 --> 01:01:13,650
我们希望能够控制

1412
01:01:13,650 --> 01:01:15,559
整个旋转

1413
01:01:15,559 --> 01:01:17,739
因为在上半年，我们只想露出脸

1414
01:01:17,739 --> 01:01:20,459
下半场，我们只想朝下展示。 

1415
01:01:20,460 --> 01:01:23,550
所以我们要在这里更改ViewModifier， 

1416
01:01:23,550 --> 01:01:27,920
其中涉及的主要变量是旋转。 

1417
01:01:28,119 --> 01:01:29,329
所以我要轮换

1418
01:01:29,329 --> 01:01:31,409
我要成为双打，这将成为

1419
01:01:31,409 --> 01:01:34,942
我的度数旋转很简单。 

1420
01:01:36,193 --> 01:01:40,300
如果我要跟踪旋转并为其设置动画， 

1421
01:01:40,300 --> 01:01:42,800
然后isFaceUp真的变成了

1422
01:01:42,800 --> 01:01:44,000
旋转的函数

1423
01:01:44,199 --> 01:01:46,989
如果旋转小于90度

1424
01:01:46,989 --> 01:01:49,359
我旋转了180度

1425
01:01:49,360 --> 01:01:53,349
则该卡面朝上，否则面朝下

1426
01:01:53,349 --> 01:01:56,532
因此，现在我将旋转和面朝上朝下联系在一起。 

1427
01:01:57,409 --> 01:02:00,210
然后当我有这个rotation3DEffect时

1428
01:02:00,210 --> 01:02:02,512
卡isFaceUp控制旋转的过程， 

1429
01:02:02,512 --> 01:02:05,072
让我们进行实际的旋转。 

1430
01:02:06,070 --> 01:02:08,690
无论我们将此修改器设置为哪种旋转， 

1431
01:02:08,889 --> 01:02:11,089
那将是旋转，它将被选中

1432
01:02:11,090 --> 01:02:15,222
右脸，正面或不正面，旋转

1433
01:02:16,429 --> 01:02:18,899
我仍然希望能够有一个init 

1434
01:02:18,900 --> 01:02:20,663
那就是isFaceUp。 

1435
01:02:21,619 --> 01:02:23,309
但是现在当我这样做时

1436
01:02:23,309 --> 01:02:26,079
那只是将我的旋转设置为零

1437
01:02:26,079 --> 01:02:29,099
如果是正面朝上，如果是正面朝下，则为180， 

1438
01:02:29,099 --> 01:02:33,012
假设isFaceUp问号为零，否则为180。 

1439
01:02:34,400 --> 01:02:36,960
所以我在这里转换了ViewModifier 

1440
01:02:36,960 --> 01:02:40,130
以轮换为基础，而不是面朝上

1441
01:02:40,130 --> 01:02:42,380
并且正面朝上总是跟踪旋转

1442
01:02:42,380 --> 01:02:43,559
因为这是FaceUp它的

1443
01:02:43,559 --> 01:02:46,710
只是看旋转，看看我们是否旋转足够。 

1444
01:02:46,710 --> 01:02:48,750
现在我们如何制作动画

1445
01:02:48,750 --> 01:02:50,500
因为这还不足以使其具有动画效果

1446
01:02:50,500 --> 01:02:51,679
如果我们不在这里跑

1447
01:02:54,280 --> 01:02:55,500
然后点击这些东西。 

1448
01:02:55,699 --> 01:02:58,799
它在做翻转，但仍然做错了事

1449
01:02:58,800 --> 01:02:59,960
关于面朝上和面朝下。 

1450
01:03:00,159 --> 01:03:02,969
当正面朝上和正面朝下的视图在此处来回移动时， 

1451
01:03:02,969 --> 01:03:05,309
他们仍然只是不透明。 

1452
01:03:05,309 --> 01:03:06,840
那是因为这个ViewModifier 

1453
01:03:06,840 --> 01:03:09,289
未标记为可动画。 

1454
01:03:09,289 --> 01:03:12,360
因此SwiftUI认为，这个ViewModifier 

1455
01:03:12,360 --> 01:03:14,110
不知道如何制作动画。 

1456
01:03:14,110 --> 01:03:16,650
所以我只是在这里做普通的动画。 

1457
01:03:16,650 --> 01:03:19,820
我通常会为它设置动画

1458
01:03:19,820 --> 01:03:22,380
通过此处的init来彼此初始化。 

1459
01:03:22,579 --> 01:03:24,989
我只是考虑即将到来的这些观点

1460
01:03:24,989 --> 01:03:27,269
因为isFaceUp而去

1461
01:03:27,269 --> 01:03:28,639
而我只是在过渡他们

1462
01:03:28,639 --> 01:03:31,862
使用标准转换，即不透明度。 

1463
01:03:32,851 --> 01:03:34,440
所以我们可以打开一个ViewModifier 

1464
01:03:34,440 --> 01:03:38,329
通过更改协议进入Animatable修改器

1465
01:03:38,329 --> 01:03:42,980
实现到AnimatableModifier。 

1466
01:03:42,980 --> 01:03:47,340
所以Animatable修饰符实际上只是ViewModifier 

1467
01:03:47,340 --> 01:03:52,150
可动画的，这是可动画的

1468
01:03:52,150 --> 01:03:56,940
如果我们查找它，这个animatableData变量， 

1469
01:03:56,940 --> 01:03:59,800
动画系统之间的这种通信

1470
01:03:59,800 --> 01:04:02,920
以及我们的ViewModifier或Shape。 

1471
01:04:02,920 --> 01:04:05,000
所以我们只需要实现这个animatableData 

1472
01:04:06,210 --> 01:04:09,429
 animatableData放在这里，让我们开始吧。 

1473
01:04:09,429 --> 01:04:13,769
让我们将其放在此处，var animatableData。 

1474
01:04:13,769 --> 01:04:16,190
我们的ViewModifier会动画显示什么？ 

1475
01:04:16,190 --> 01:04:18,289
动画旋转

1476
01:04:19,130 --> 01:04:22,519
我们的视图就是您要设置的动画。 

1477
01:04:22,519 --> 01:04:25,590
所以这个Double是我们的轮换。 

1478
01:04:25,590 --> 01:04:28,269
现在，我可以使用这个单词animatableData 

1479
01:04:28,469 --> 01:04:30,299
在这里而不是旋转

1480
01:04:30,300 --> 01:04:34,630
但这不是在此处具有animatableData的很好的代码。 

1481
01:04:34,630 --> 01:04:36,500
所以让我们做我在说的那个把戏

1482
01:04:36,699 --> 01:04:38,149
在我要放的幻灯片上

1483
01:04:38,150 --> 01:04:39,639
这是一个计算属性

1484
01:04:39,639 --> 01:04:42,099
我要归还我的轮换

1485
01:04:42,099 --> 01:04:44,809
然后我将轮换设为相等

1486
01:04:44,809 --> 01:04:47,989
此属性的新值。 

1487
01:04:47,989 --> 01:04:50,119
记住，获取并设置，这就是我们要做的

1488
01:04:50,119 --> 01:04:54,109
计算属性就是读写的。 

1489
01:04:54,110 --> 01:04:57,440
所以我基本上只是将旋转重命名为animatableData 

1490
01:04:57,639 --> 01:04:59,889
因为这是动画系统的名称

1491
01:04:59,889 --> 01:05:01,319
要寻找。 

1492
01:05:01,320 --> 01:05:04,670
顺便说一句，即使这只是全部，您也无法

1493
01:05:04,869 --> 01:05:05,719
发生在这里， 

1494
01:05:05,719 --> 01:05:07,559
你实际上不能只说这个

1495
01:05:07,559 --> 01:05:11,389
您需要说这是一个AnimatableModifier 

1496
01:05:11,389 --> 01:05:14,400
因为这个AnimatableModifier协议

1497
01:05:14,400 --> 01:05:18,230
虽然这和ViewModifier在一起， 

1498
01:05:18,230 --> 01:05:19,869
它也向系统发出信号

1499
01:05:19,869 --> 01:05:22,599
我想参加，我将成为ViewModifier 

1500
01:05:22,599 --> 01:05:25,059
想参加动画系统的人

1501
01:05:25,059 --> 01:05:28,523
因此请确保您说的是冒号AnimatableModifier。 

1502
01:05:30,010 --> 01:05:31,210
好吧，让我们尝试一下。 

1503
01:05:34,605 --> 01:05:36,512
轻按该卡，哦，天哪， 

1504
01:05:38,673 --> 01:05:40,360
真的很简单。 

1505
01:05:40,360 --> 01:05:42,670
在翻转的前半部分看到

1506
01:05:42,869 --> 01:05:44,409
当卡片正面朝下时， 

1507
01:05:44,409 --> 01:05:46,929
它只显示背面，当它面朝上时， 

1508
01:05:46,929 --> 01:05:49,029
它只显示正面，让我们尝试

1509
01:05:49,030 --> 01:05:50,550
并使卡消失

1510
01:05:50,550 --> 01:05:53,143
这样您就可以看到卡片面朝下。 

1511
01:05:56,090 --> 01:05:59,440
这是一场比赛，让它消失。 

1512
01:05:59,440 --> 01:06:01,670
并注意当它消失时仍然可以使用

1513
01:06:01,670 --> 01:06:05,460
动画效果就好于缩放动画。 

1514
01:06:05,460 --> 01:06:07,750
还要注意，当我们翻转卡片时， 

1515
01:06:07,750 --> 01:06:09,619
不再有淡入。 

1516
01:06:09,619 --> 01:06:13,369
这些卡不褪色，背面或正面不褪色。 

1517
01:06:13,369 --> 01:06:15,789
那是因为这个ViewModifier 

1518
01:06:15,789 --> 01:06:17,889
已经控制了动画。 

1519
01:06:17,889 --> 01:06:19,889
因此动画系统不再尝试

1520
01:06:19,889 --> 01:06:22,309
进入这里并自己制作动画

1521
01:06:22,309 --> 01:06:25,259
假定此ViewModifier知道它在做什么。 

1522
01:06:27,000 --> 01:06:30,659
让我们回到一开始就遇到的问题， 

1523
01:06:30,659 --> 01:06:32,710
这是当事物匹配时，让我们找到一些卡片

1524
01:06:32,710 --> 01:06:33,693
在这里匹配。 

1525
01:06:37,592 --> 01:06:38,480
现在我又不太擅长这款游戏。 

1526
01:06:38,480 --> 01:06:41,840
好吧，我认为这是。是的，好的，准备好了，我们开始比赛了。 

1527
01:06:41,840 --> 01:06:43,539
这一个旋转。 

1528
01:06:43,539 --> 01:06:45,659
这一个不旋转。 

1529
01:06:45,659 --> 01:06:48,762
让我们调查一下为什么不旋转？ 

1530
01:06:49,650 --> 01:06:53,619
这不会旋转，因为当我们触摸此卡时， 

1531
01:06:53,619 --> 01:06:56,949
它匹配并且当时被朝下

1532
01:06:56,949 --> 01:06:58,859
我们将其切换为正面朝上。 

1533
01:06:58,860 --> 01:07:02,769
因此，当它出现在屏幕上时，所有这些融合都在这里， 

1534
01:07:02,969 --> 01:07:06,492
它面朝上并且已经匹配。 

1535
01:07:08,039 --> 01:07:10,250
所以没有变化

1536
01:07:10,250 --> 01:07:13,210
此卡isMatched已经是真实的

1537
01:07:13,210 --> 01:07:16,519
因此无需进行任何更改。 

1538
01:07:16,519 --> 01:07:20,199
动画仅动画更改。 

1539
01:07:20,199 --> 01:07:21,639
所以没有变化

1540
01:07:21,639 --> 01:07:23,925
导致“视图”出现在屏幕上匹配， 

1541
01:07:23,925 --> 01:07:25,746
它永远不会改变以匹配

1542
01:07:25,746 --> 01:07:28,052
它刚匹配时就匹配了。 

1543
01:07:30,610 --> 01:07:33,400
所以如果我们想要一场比赛

1544
01:07:33,400 --> 01:07:36,070
要跟空翻一起动画

1545
01:07:36,070 --> 01:07:39,039
我们需要这张卡，这个文本， 

1546
01:07:39,039 --> 01:07:43,360
基本上是卡的正面，需要在屏幕上

1547
01:07:43,360 --> 01:07:45,420
当比赛发生时。 

1548
01:07:45,420 --> 01:07:47,820
但这是一张卡的问题， 

1549
01:07:47,820 --> 01:07:50,880
比赛中的第二张牌，因为它面朝下。 

1550
01:07:51,079 --> 01:07:54,289
让表情符号位于卡片的正面

1551
01:07:54,289 --> 01:07:58,309
它不在屏幕上，但我们仍然可以在屏幕上显示它， 

1552
01:07:58,309 --> 01:08:01,349
但隐藏起来，这是另一种应对方式

1553
01:08:01,349 --> 01:08:04,219
与正在出现和消失的视图

1554
01:08:04,219 --> 01:08:08,989
而不是让它们实际上是-如果-然后-从

1555
01:08:08,989 --> 01:08:11,099
存在。相反，我们可以将它们隐藏起来。 

1556
01:08:11,099 --> 01:08:13,170
而我们隐藏事物的方式就是

1557
01:08:13,170 --> 01:08:16,520
从上次我们已经知道不透明

1558
01:08:16,520 --> 01:08:19,460
完全透明被隐藏

1559
01:08:19,460 --> 01:08:22,649
并且完全不透明在屏幕上完全可见。 

1560
01:08:22,649 --> 01:08:25,779
因此，让我们使用不透明度来获得前后

1561
01:08:25,779 --> 01:08:27,699
我们的卡片是否显示， 

1562
01:08:27,699 --> 01:08:29,510
而不是如果

1563
01:08:29,510 --> 01:08:31,710
使它们完全消失或没有消失。 

1564
01:08:32,560 --> 01:08:34,880
所以这是一种不同的思考方式

1565
01:08:35,079 --> 01:08:37,059
 ZStack中发生了什么。 

1566
01:08:37,060 --> 01:08:40,310
而不是随着这些前视图的来临而思考

1567
01:08:40,310 --> 01:08:41,289
当它面朝上时

1568
01:08:41,489 --> 01:08:43,166
然后当面朝下时他们走了

1569
01:08:43,167 --> 01:08:45,699
当它面朝下时就来了，面朝上了。 

1570
01:08:45,899 --> 01:08:49,629
相反，我将总是拥有所有这四个

1571
01:08:49,630 --> 01:08:51,170
卡上。 

1572
01:08:51,170 --> 01:08:52,449
当它面朝下时

1573
01:08:52,449 --> 01:08:55,529
我看不到这三个。 

1574
01:08:55,529 --> 01:08:57,399
因此，让我们采用这三个， 

1575
01:08:57,399 --> 01:09:00,829
我什至会把它们分组以使自己更轻松。 

1576
01:09:00,829 --> 01:09:05,229
然后设置它们的不透明度，以便如果卡片朝上， 

1577
01:09:05,229 --> 01:09:06,750
他们是完全不透明的

1578
01:09:06,750 --> 01:09:08,930
否则它们是完全透明的。 

1579
01:09:08,930 --> 01:09:12,920
而且这个同样会说它的不透明性

1580
01:09:12,920 --> 01:09:16,779
如果面朝上，则完全透明。 

1581
01:09:16,979 --> 01:09:19,202
否则，基于此， 

1582
01:09:19,203 --> 01:09:21,690
移动这些东西，使它们更容易阅读

1583
01:09:24,420 --> 01:09:27,029
所以现在在这里，如果没有， 

1584
01:09:27,229 --> 01:09:28,989
这个ViewBuilder内部没有ifs 

1585
01:09:28,989 --> 01:09:31,699
意见不再来去去了。 

1586
01:09:31,699 --> 01:09:34,069
这也意味着该内容， 

1587
01:09:34,069 --> 01:09:35,949
此文本始终显示在屏幕上

1588
01:09:35,949 --> 01:09:38,289
即使我们面朝下，也只是隐藏起来。 

1589
01:09:38,289 --> 01:09:41,269
因此，这意味着当它稍后设置为匹配时， 

1590
01:09:41,270 --> 01:09:44,380
这种隐式动画将有所改变

1591
01:09:44,579 --> 01:09:45,912
直到它开始运行。 

1592
01:09:46,880 --> 01:09:47,980
让我们尝试一下。 

1593
01:09:50,350 --> 01:09:54,880
这是我们的卡片，哎呀，在那儿仍然可以正常使用， 

1594
01:09:54,880 --> 01:09:56,869
卡的正面没有显示

1595
01:09:56,869 --> 01:09:58,729
看到卡的正面就在那里

1596
01:09:58,729 --> 01:10:00,379
在这张卡的另一面

1597
01:10:00,380 --> 01:10:01,930
如果你想这样想

1598
01:10:01,930 --> 01:10:04,077
尽管它是隐藏的，但其不透明度为零。 

1599
01:10:04,077 --> 01:10:05,747
当我单击它时，它的不透明度仍为零

1600
01:10:05,747 --> 01:10:07,079
现在它的不透明度是

1601
01:10:07,279 --> 01:10:09,202
背面的不透明度设为零。 

1602
01:10:10,119 --> 01:10:12,686
因此，希望我们能在这里找到比赛的地方， 

1603
01:10:14,239 --> 01:10:15,072
这家伙

1604
01:10:16,579 --> 01:10:18,850
和这个家伙，他们都会旋转

1605
01:10:18,850 --> 01:10:22,083
您会看到该卡转过身时正在旋转。 

1606
01:10:23,173 --> 01:10:24,930
让我们在这里再配一个

1607
01:10:24,930 --> 01:10:26,880
看着卡片转过身来

1608
01:10:26,880 --> 01:10:29,430
你会看到它已经旋转了

1609
01:10:29,430 --> 01:10:33,170
因为它在那里藏着，正在旋转， 

1610
01:10:33,170 --> 01:10:35,859
隐藏直到它变得可见。 

1611
01:10:35,859 --> 01:10:40,859
使用不透明度使事情来去去来的技巧

1612
01:10:41,319 --> 01:10:43,779
这实际上是您可以控制自己是否在做的一种方式

1613
01:10:43,779 --> 01:10:46,840
随Views转换而来的动画， 

1614
01:10:46,840 --> 01:10:50,500
还是直接在屏幕上进行控制

1615
01:10:50,500 --> 01:10:52,420
使用不透明度。 

1616
01:10:52,420 --> 01:10:55,859
而且它们都是完全有效的方法。 

1617
01:10:55,859 --> 01:10:58,179
您可以决定是否有意义

1618
01:10:58,180 --> 01:10:59,743
在本演示的稍后部分，您将看到

1619
01:10:59,743 --> 01:11:02,220
我们实际上将要利用

1620
01:11:02,220 --> 01:11:04,930
使我们的小馅饼来来去去。 

1621
01:11:04,930 --> 01:11:06,350
当我们的派动画时， 

1622
01:11:06,350 --> 01:11:08,630
我们希望它在那里有动画效果， 

1623
01:11:08,630 --> 01:11:10,510
但是我们要放一个不同的派

1624
01:11:10,510 --> 01:11:12,750
如果不是，那将是一个巨大的优势

1625
01:11:12,750 --> 01:11:14,680
知道什么时候来来去去。 

1626
01:11:14,680 --> 01:11:17,039
因此，并非总是要使用不透明度

1627
01:11:17,039 --> 01:11:19,449
有时您想要视图来去去， 

1628
01:11:19,449 --> 01:11:22,479
这仅取决于您是否触发了此事

1629
01:11:22,479 --> 01:11:24,129
以及您是否要使用过渡， 

1630
01:11:24,130 --> 01:11:26,949
或只是普通动画。 

1631
01:11:26,949 --> 01:11:28,899
现在我要做的最后一件事是， 

1632
01:11:28,899 --> 01:11:32,129
现在我们有了动画， 

1633
01:11:32,130 --> 01:11:34,569
可以很好地翻转卡片

1634
01:11:34,569 --> 01:11:36,579
为了让它们消失， 

1635
01:11:36,579 --> 01:11:38,779
我将再次加速它们

1636
01:11:38,779 --> 01:11:40,409
然后我们去制作动画

1637
01:11:40,409 --> 01:11:41,659
这个小馅饼。 

1638
01:11:41,659 --> 01:11:44,119
因此，让我们加快备份速度，这很容易做到。 

1639
01:11:44,119 --> 01:11:47,489
回到这里，继续努力

1640
01:11:47,489 --> 01:11:49,010
也许我们有默认的持续时间， 

1641
01:11:49,010 --> 01:11:52,890
让我们尝试这两者的默认持续时间， 

1642
01:11:52,890 --> 01:11:57,310
通常是默认时间的一秒以内。 

1643
01:11:57,310 --> 01:11:58,657
看看这是什么样子

1644
01:11:58,657 --> 01:12:00,930
嗯，实际上可能有点快， 

1645
01:12:00,930 --> 01:12:03,079
我对此不满意

1646
01:12:03,079 --> 01:12:05,460
我很快就消失了

1647
01:12:05,460 --> 01:12:07,920
但是当我翻转卡片时我想放慢速度

1648
01:12:07,920 --> 01:12:08,752
一点点。 

1649
01:12:08,752 --> 01:12:10,179
所以我要说持续时间

1650
01:12:10,180 --> 01:12:13,050
假设0.75， 

1651
01:12:13,050 --> 01:12:14,682
看看效果如何。 

1652
01:12:17,952 --> 01:12:19,720
好吧，对我来说看起来更好

1653
01:12:19,720 --> 01:12:22,560
当然不会比这更慢

1654
01:12:22,560 --> 01:12:24,310
但我认为这看起来不错。 

1655
01:12:25,760 --> 01:12:27,909
这种蓝色显然是某种东西

1656
01:12:28,109 --> 01:12:30,609
我们想放下我们的绘图常数。 

1657
01:12:30,609 --> 01:12:32,049
我现在不打算这样做以节省时间

1658
01:12:32,050 --> 01:12:34,420
但是只要您看到那里有一个蓝色数字， 

1659
01:12:34,420 --> 01:12:36,960
这些蓝色的数字也是我们上次没有做的

1660
01:12:36,960 --> 01:12:38,779
这些东西都应该放在这里

1661
01:12:38,779 --> 01:12:41,239
在绘图常量中，您可以使用控制面板

1662
01:12:41,239 --> 01:12:42,809
在这里进行调整并转动拨盘

1663
01:12:42,810 --> 01:12:44,563
使您的用户界面看起来像您想要的那样。 

1664
01:12:45,649 --> 01:12:47,416
我们有这个派

1665
01:12:47,417 --> 01:12:50,329
现在Pie被卡在这个位置上

1666
01:12:50,529 --> 01:12:52,800
但实际上，每当卡片翻转时， 

1667
01:12:52,800 --> 01:12:54,390
我们希望它开始倒计时

1668
01:12:54,390 --> 01:12:55,199
当它向下翻转时， 

1669
01:12:55,399 --> 01:12:57,259
我们停止计数，然后再向上推。 

1670
01:12:57,260 --> 01:12:58,409
它一直计数然后向下翻转

1671
01:12:58,609 --> 01:13:00,049
它停止计数，然后当然

1672
01:13:00,050 --> 01:13:02,279
当它匹配时，我们停止计数

1673
01:13:02,279 --> 01:13:03,689
因为现在您已经匹配了它。 

1674
01:13:03,689 --> 01:13:05,029
如果它完全消失， 

1675
01:13:05,029 --> 01:13:08,300
你得的积分不及你做的多

1676
01:13:08,300 --> 01:13:09,949
在它消失之前。 

1677
01:13:09,949 --> 01:13:12,670
为此，我们需要做一些事情。 

1678
01:13:12,670 --> 01:13:15,829
一个是我们将不得不改进我们的模型

1679
01:13:15,829 --> 01:13:20,050
知道还剩下多少奖金时间，等等。 

1680
01:13:20,050 --> 01:13:23,630
所以我实际上放了一些代码

1681
01:13:23,630 --> 01:13:26,220
在这里，我向你们提供了

1682
01:13:26,220 --> 01:13:30,020
在之前的论坛上，所以你们所有人都拥有它。 

1683
01:13:30,020 --> 01:13:32,840
如果没有，您可以暂停该视频

1684
01:13:32,840 --> 01:13:34,670
并从这里复制它

1685
01:13:34,670 --> 01:13:36,779
以其他方式获得它。 

1686
01:13:36,779 --> 01:13:40,059
但是这段代码基本上是在做跟踪

1687
01:13:40,060 --> 01:13:41,779
每当卡上下时

1688
01:13:41,979 --> 01:13:44,500
或被映射它跟踪使用的时间

1689
01:13:44,500 --> 01:13:45,957
然后它回答诸如

1690
01:13:45,957 --> 01:13:47,839
还剩多少时间

1691
01:13:47,840 --> 01:13:51,829
或剩余的时间百分比

1692
01:13:51,829 --> 01:13:54,029
我们可以了解我们是否获得奖金

1693
01:13:54,029 --> 01:13:56,369
并开始使用奖励时间

1694
01:13:56,369 --> 01:13:58,319
并停止使用奖励时间。 

1695
01:13:58,319 --> 01:14:00,130
通过这些功能，我要确保

1696
01:14:00,130 --> 01:14:03,289
当卡片正面朝上和正面朝下时，我称这些为

1697
01:14:03,289 --> 01:14:05,439
在我的模型中以及匹配时。 

1698
01:14:05,439 --> 01:14:08,009
因此，让我们使用我们讨论过的那些财产观察员

1699
01:14:08,010 --> 01:14:10,090
调用这些功能。 

1700
01:14:10,090 --> 01:14:12,039
这是我的

1701
01:14:12,039 --> 01:14:13,769
卡的vars。 

1702
01:14:13,770 --> 01:14:15,233
我要做到，每次

1703
01:14:15,233 --> 01:14:16,657
 isFaceUp在这里更改了， 

1704
01:14:16,657 --> 01:14:19,789
我将使用幻灯片中显示的willSet的didSet， 

1705
01:14:19,789 --> 01:14:21,356
但我只是在这里与众不同

1706
01:14:21,356 --> 01:14:23,039
并向您显示didSet。 

1707
01:14:23,039 --> 01:14:24,560
当这种情况发生时，我要说

1708
01:14:24,560 --> 01:14:28,789
如果isFaceUp更改为true。 

1709
01:14:28,789 --> 01:14:30,489
因此，卡面朝上

1710
01:14:30,489 --> 01:14:33,369
然后我将开始再次运行奖金时间， 

1711
01:14:33,369 --> 01:14:35,239
开始使用奖励时间。 

1712
01:14:35,239 --> 01:14:36,969
否则，如果卡面朝下， 

1713
01:14:36,970 --> 01:14:39,222
我将停止使用奖励时间。 

1714
01:14:40,060 --> 01:14:43,170
所以我只是在我的卡片上看着这个面朝上和面朝下

1715
01:14:43,170 --> 01:14:44,407
每当它发生变化时， 

1716
01:14:44,407 --> 01:14:47,279
这比尝试更可靠

1717
01:14:47,279 --> 01:14:51,319
一直看我说isFaceUp是对还是错

1718
01:14:51,319 --> 01:14:55,210
然后尝试同时调用startUsingBonusTime 

1719
01:14:55,210 --> 01:14:57,439
我可能会犯一个错误，却忘记了它。 

1720
01:14:57,439 --> 01:14:59,829
这样，每次我更改此设置时，它都是可靠的

1721
01:14:59,829 --> 01:15:01,859
繁荣我们开始和停止的时间。 

1722
01:15:01,859 --> 01:15:03,849
同样，对于isMatched在这里， 

1723
01:15:03,850 --> 01:15:08,430
当didSet时，我们可以停止使用奖励时间。 

1724
01:15:08,430 --> 01:15:10,119
如果isMatched设置为false，则可能

1725
01:15:10,319 --> 01:15:12,549
也许我们正在重置游戏或重置卡片， 

1726
01:15:12,550 --> 01:15:14,619
不知道我们在那做什么。 

1727
01:15:14,619 --> 01:15:15,939
但似乎是奖金时间

1728
01:15:15,939 --> 01:15:17,809
不应该再开始了。 

1729
01:15:17,810 --> 01:15:20,829
该属性观察器，一种非常强大的同步方式

1730
01:15:21,029 --> 01:15:23,539
您的代码内部发生了什么。 

1731
01:15:23,539 --> 01:15:27,050
所以现在我们的模型知道还剩多少时间

1732
01:15:27,050 --> 01:15:28,430
在奖金和所有这些东西上。 

1733
01:15:28,430 --> 01:15:30,640
这就是我在这里所做的所有代码。 

1734
01:15:30,640 --> 01:15:32,560
因此，让我们使用这些东西

1735
01:15:32,560 --> 01:15:35,560
在我们的用户界面中显示该动画。 

1736
01:15:35,560 --> 01:15:38,710
现在让我们的卡片派动画

1737
01:15:38,909 --> 01:15:42,979
我们必须在此处增强Shape的动画效果。 

1738
01:15:42,979 --> 01:15:46,299
现在形状真的已经有了这个Animatable， 

1739
01:15:46,300 --> 01:15:49,210
与ViewModifier使用的协议相同， 

1740
01:15:49,210 --> 01:15:51,069
在所有形状上都差不多

1741
01:15:51,069 --> 01:15:55,159
假定所有形状都可以动画

1742
01:15:55,159 --> 01:15:57,319
这只是形状的一部分。 

1743
01:15:57,319 --> 01:15:59,479
这种情况太普遍了，我们甚至不必说

1744
01:15:59,479 --> 01:16:00,750
逗号可在此处动画化， 

1745
01:16:00,750 --> 01:16:02,789
形状只是假设您要这样做。 

1746
01:16:02,789 --> 01:16:04,869
现在，如果您不放置animatableData， 

1747
01:16:04,869 --> 01:16:06,979
你不会得到任何动画

1748
01:16:06,979 --> 01:16:09,009
但是通常我们想要它。 

1749
01:16:09,010 --> 01:16:10,579
所以我们要在这里制作动画

1750
01:16:10,579 --> 01:16:12,500
在我们的Cardify ViewModifier中， 

1751
01:16:12,500 --> 01:16:15,170
我们四处走动时动画旋转， 

1752
01:16:15,170 --> 01:16:18,539
好吧，在我们的Pie动画中， 

1753
01:16:18,539 --> 01:16:20,720
我们有点想动画化这个角度， 

1754
01:16:20,720 --> 01:16:22,199
看到这里的角度， 

1755
01:16:22,199 --> 01:16:25,109
当它绕这个角度变化时

1756
01:16:25,109 --> 01:16:26,519
此处的结束角度。 

1757
01:16:26,520 --> 01:16:28,130
如果我们要成为一个好馅饼， 

1758
01:16:28,130 --> 01:16:30,970
让我们使两个角度都可以动画

1759
01:16:30,970 --> 01:16:32,800
开始和结束。 

1760
01:16:32,800 --> 01:16:34,369
这样我们就可以为任何一侧设置动画， 

1761
01:16:34,369 --> 01:16:36,470
取决于我们认为看起来不错。 

1762
01:16:36,470 --> 01:16:40,119
因此，基本上我该如何同时为两件事设置动画

1763
01:16:40,319 --> 01:16:42,502
我要用那个AnimatablePair， 

1764
01:16:43,829 --> 01:16:44,662
对。 

1765
01:16:44,662 --> 01:16:46,509
而AnimatablePair将是一对Doubles， 

1766
01:16:46,510 --> 01:16:49,989
那些双打将成为我的视角

1767
01:16:49,989 --> 01:16:52,250
他们以弧度为单位。 

1768
01:16:52,250 --> 01:16:56,180
角度本身不是VectorArithmetic的东西

1769
01:16:56,180 --> 01:17:00,279
但是显然弧度的角度是Double 

1770
01:17:00,479 --> 01:17:02,109
所以这个animableData再次

1771
01:17:02,109 --> 01:17:03,869
我将使用相同的技巧

1772
01:17:03,869 --> 01:17:06,935
获取和设置。有点棘手

1773
01:17:06,935 --> 01:17:09,485
因为我们必须在这里使用AnimatablePair， 

1774
01:17:09,485 --> 01:17:12,819
但是AnimatablePair只有两个变量，第一个和第二个， 

1775
01:17:12,819 --> 01:17:14,699
返回第一个可动画的东西

1776
01:17:14,699 --> 01:17:17,059
关于第二个可动画化的事情。 

1777
01:17:17,060 --> 01:17:19,900
所以对于我们来说，我们将返回一个AnimatablePair 

1778
01:17:21,020 --> 01:17:24,950
首先是startAngle的弧度。 

1779
01:17:26,590 --> 01:17:28,893
第二个是endAngle的

1780
01:17:30,905 --> 01:17:32,579
角弧度。 

1781
01:17:32,579 --> 01:17:34,769
那就是我们的animableData 

1782
01:17:34,770 --> 01:17:37,750
然后设置它只是设置我们的startAngle 

1783
01:17:37,750 --> 01:17:42,159
成为弧度为

1784
01:17:42,159 --> 01:17:46,849
这是AnimatablePair，即newValue，先点

1785
01:17:46,850 --> 01:17:49,460
和endAngle 

1786
01:17:49,659 --> 01:17:52,599
是一个角度，弧度， 

1787
01:17:52,600 --> 01:17:55,463
这是AnimatablePair的第二个。 

1788
01:17:56,930 --> 01:18:01,039
所以在这里我们连接了两个变量

1789
01:18:01,239 --> 01:18:04,719
此动画，分段动画

1790
01:18:04,720 --> 01:18:07,720
这就是我们需要做的。 

1791
01:18:07,720 --> 01:18:10,020
因为这只是意味着这个形状将会

1792
01:18:10,020 --> 01:18:13,460
在动画过程中反复绘制

1793
01:18:13,460 --> 01:18:15,409
这两件事都被动画化了

1794
01:18:15,409 --> 01:18:17,099
因为它们是东西被切成薄片

1795
01:18:17,100 --> 01:18:19,529
动画系统将其分解成小块。 

1796
01:18:19,729 --> 01:18:22,000
这就是animatableData的全部内容。 

1797
01:18:22,000 --> 01:18:24,210
现在，我告诉你，这个动画系统很优雅， 

1798
01:18:24,210 --> 01:18:26,289
就是只有一个变种

1799
01:18:26,289 --> 01:18:29,800
作为双向双向访问的唯一入口

1800
01:18:29,800 --> 01:18:34,739
动画的东西。我认为设计很不错。 

1801
01:18:34,739 --> 01:18:35,739
我不为苹果工作

1802
01:18:35,739 --> 01:18:39,219
因此，我认为我是独立的第三方， 

1803
01:18:39,220 --> 01:18:41,640
我认为他们在这方面做得很好。 

1804
01:18:41,640 --> 01:18:45,140
好吧，现在这个Pie可以动画了

1805
01:18:45,140 --> 01:18:48,750
现在我们的模型知道如何追踪

1806
01:18:48,949 --> 01:18:50,119
剩余时间。 

1807
01:18:50,119 --> 01:18:53,800
因此，让我们采用“视图”并将这两件事放在一起。 

1808
01:18:53,800 --> 01:18:56,220
这是我们的派，就在这里

1809
01:18:56,220 --> 01:18:59,039
我们想要，我要离开起点

1810
01:18:59,239 --> 01:19:02,649
始终笔直向上，零度，向上向上。 

1811
01:19:02,649 --> 01:19:05,099
我要改变我的endAngle取决于

1812
01:19:05,100 --> 01:19:06,779
我还剩下多少时间。 

1813
01:19:06,979 --> 01:19:09,529
让我们从一个简单的开始，即

1814
01:19:09,529 --> 01:19:13,109
让我们拿卡剩余的红利， 

1815
01:19:13,109 --> 01:19:17,299
这是剩余的百分比奖金乘以360。 

1816
01:19:17,300 --> 01:19:20,560
我要倒退，因为这个派

1817
01:19:20,560 --> 01:19:22,460
负面地下降到零

1818
01:19:22,460 --> 01:19:25,579
我最终希望将其降低到零。 

1819
01:19:25,579 --> 01:19:26,693
看看有什么用。 

1820
01:19:29,989 --> 01:19:33,149
好吧，我们开始吧，哦，这不是动画。 

1821
01:19:33,149 --> 01:19:34,399
嗯，这很奇怪。 

1822
01:19:34,399 --> 01:19:37,099
哦，但我以为我在那里看到了什么。 

1823
01:19:37,100 --> 01:19:41,060
哦，看起来它实际上是在显示剩余时间

1824
01:19:41,060 --> 01:19:43,460
因为我花了差不多那张卡片

1825
01:19:43,659 --> 01:19:46,470
这是六秒钟，我将其设置为绕转。 

1826
01:19:46,470 --> 01:19:49,800
所以我认为这张卡面朝上大约四秒钟

1827
01:19:49,800 --> 01:19:51,529
可以，但是实际上并没有为它设置动画

1828
01:19:51,729 --> 01:19:54,679
然后这样一看，好像一直都在

1829
01:19:54,680 --> 01:19:56,449
但是，如果我单击离开然后再单击返回， 

1830
01:19:56,649 --> 01:19:58,139
哦，实际上我一直都在用光

1831
01:19:58,140 --> 01:20:00,460
导致该卡面朝上坐了这么长时间。 

1832
01:20:00,659 --> 01:20:03,130
现在，我认为这只是一点点。 

1833
01:20:03,130 --> 01:20:05,382
是的，那只是一点点。 

1834
01:20:06,289 --> 01:20:09,550
这个刚刚出现，所以它实际上在工作

1835
01:20:09,550 --> 01:20:13,029
它正在对此进行调整，但不是对其进行动画处理。 

1836
01:20:13,229 --> 01:20:15,569
那么我们该如何对其进行动画处理？ 

1837
01:20:15,569 --> 01:20:18,889
要对此进行动画处理有些挑战

1838
01:20:18,890 --> 01:20:22,500
因为这真正使人生气的是这个角度

1839
01:20:22,699 --> 01:20:27,699
从现在的位置（如此处）到零。 

1840
01:20:28,260 --> 01:20:31,250
我告诉你动画只显示你的东西

1841
01:20:31,250 --> 01:20:32,970
那已经发生了。 

1842
01:20:32,970 --> 01:20:36,829
但是当显示卡时，此时钟开始计时， 

1843
01:20:36,829 --> 01:20:38,590
它还没有达到零。 

1844
01:20:38,590 --> 01:20:41,210
那我该如何开始要制作的动画

1845
01:20:41,210 --> 01:20:44,029
当零还没有发生时，这个东西变成零吗？ 

1846
01:20:44,229 --> 01:20:47,839
那是个难题22。 

1847
01:20:47,840 --> 01:20:51,619
所以这个陷阱22会阻止我们

1848
01:20:51,619 --> 01:20:56,619
使用此奖励后直接从模型中获得。 

1849
01:20:56,659 --> 01:20:58,779
现在，如果我问模型， 

1850
01:20:58,779 --> 01:21:01,019
奖金剩余百分比是多少？ 

1851
01:21:01,020 --> 01:21:03,140
它会告诉我它总是会做的正确答案

1852
01:21:03,140 --> 01:21:04,600
那是模型的工作。 

1853
01:21:04,600 --> 01:21:06,260
因此，模型正在履行职责

1854
01:21:06,260 --> 01:21:08,880
但是，模型并没有不断变化。 

1855
01:21:08,880 --> 01:21:10,569
哦，还剩4.1秒， 

1856
01:21:10,569 --> 01:21:12,359
哦，我改变了，现在只有四秒钟， 

1857
01:21:12,359 --> 01:21:15,079
哦，我改变了，现在还剩下3.9秒， 

1858
01:21:15,079 --> 01:21:18,050
该模型不能做到这一点可笑。 

1859
01:21:18,050 --> 01:21:20,300
它正在做它的工作，但它以某种方式做到了

1860
01:21:20,300 --> 01:21:23,159
不会导致我们的用户界面发生变化

1861
01:21:23,159 --> 01:21:26,180
而动画只能使变化动起来。 

1862
01:21:26,180 --> 01:21:28,770
我们只是不能直接在模型中使用它， 

1863
01:21:28,770 --> 01:21:30,840
我们仍然必须与模型保持同步

1864
01:21:31,039 --> 01:21:33,560
但是我们不能直接使用它。 

1865
01:21:33,560 --> 01:21:35,470
所以我要动画这个角度

1866
01:21:35,470 --> 01:21:39,579
在这里使用我自己的小临时变量

1867
01:21:39,579 --> 01:21:41,579
它必须是可写的。 

1868
01:21:41,579 --> 01:21:43,449
我将不得不将其与模型同步。 

1869
01:21:43,449 --> 01:21:45,000
所以它将是一个@State 

1870
01:21:45,000 --> 01:21:47,539
正如我们在幻灯片中谈到的

1871
01:21:47,539 --> 01:21:50,079
而且是私人的，仅供我使用

1872
01:21:50,079 --> 01:21:54,399
因此，var，我将其命名为我的animatedBonusRemaining。 

1873
01:21:54,399 --> 01:21:56,719
我们将其设为度数的Double 

1874
01:21:56,720 --> 01:21:58,430
当然必须初始化

1875
01:21:58,430 --> 01:22:00,430
因为所有的变量都必须初始化

1876
01:22:00,430 --> 01:22:02,949
甚至是@State。 

1877
01:22:03,149 --> 01:22:05,979
所以我要用它代替奖金

1878
01:22:05,979 --> 01:22:08,069
直接来自模型

1879
01:22:08,069 --> 01:22:11,822
我将使用我的animatedBonusRemaining。 

1880
01:22:13,119 --> 01:22:16,029
现在我必须以某种方式使它成为正确的价值观

1881
01:22:16,029 --> 01:22:18,139
使动画发生。 

1882
01:22:18,140 --> 01:22:19,720
我要做的第一件事

1883
01:22:19,720 --> 01:22:21,800
得到它与模型同步。 

1884
01:22:21,800 --> 01:22:24,119
这必须与模型同步。 

1885
01:22:24,319 --> 01:22:25,769
我该怎么办？ 

1886
01:22:25,770 --> 01:22:28,590
好吧，真的，我什么时候要使其同步？ 

1887
01:22:28,590 --> 01:22:30,970
每次出现此视图时， 

1888
01:22:30,970 --> 01:22:32,619
我希望它与模型同步。 

1889
01:22:33,500 --> 01:22:35,409
现在，什么时候出现在屏幕上？ 

1890
01:22:35,409 --> 01:22:38,319
现在它以其容器出现在屏幕上

1891
01:22:38,319 --> 01:22:39,880
我们没有任何过渡

1892
01:22:39,880 --> 01:22:42,319
如果我们不知道什么时候发生，等等。 

1893
01:22:42,319 --> 01:22:44,649
所以我要让它只出现在屏幕上

1894
01:22:44,649 --> 01:22:47,679
如果我的卡是ConsumingBonusTime。 

1895
01:22:47,680 --> 01:22:51,750
所以这只是我模型中的变量告诉我

1896
01:22:51,750 --> 01:22:54,920
目前是否有卡

1897
01:22:54,920 --> 01:22:56,409
消耗奖金时间。 

1898
01:22:56,409 --> 01:22:59,229
这意味着它面朝上，尚未匹配

1899
01:22:59,229 --> 01:23:01,809
还有一些剩余时间可能是其他原因。 

1900
01:23:01,810 --> 01:23:03,920
我不在乎由我的模特告诉我

1901
01:23:04,119 --> 01:23:07,159
当前是否正在消耗骨骼时间。 

1902
01:23:07,159 --> 01:23:10,363
如果是，则此视图将显示在屏幕上。 

1903
01:23:11,239 --> 01:23:14,019
现在，为什么我只希望将其显示在屏幕上

1904
01:23:14,020 --> 01:23:15,699
当它实际上是动画时？ 

1905
01:23:15,899 --> 01:23:18,299
好吧，因为我正在使用这个动画值

1906
01:23:18,300 --> 01:23:19,789
剩下的奖金，好吗？ 

1907
01:23:19,789 --> 01:23:22,279
那真的，我只想这样做

1908
01:23:22,279 --> 01:23:23,789
当我实际上在做动画时

1909
01:23:23,789 --> 01:23:26,552
而且，它还允许我使用onAppear。 

1910
01:23:27,819 --> 01:23:30,809
所以您还记得我们在幻灯片中讨论过的onAppear。 

1911
01:23:30,810 --> 01:23:33,789
这是一个调用此关闭的函数

1912
01:23:33,789 --> 01:23:36,920
只要此视图出现在屏幕上。 

1913
01:23:36,920 --> 01:23:38,420
而这正是我想要的

1914
01:23:38,420 --> 01:23:40,789
因为每当这个东西出现在屏幕上时， 

1915
01:23:40,789 --> 01:23:44,250
我要重设我的奖金时间

1916
01:23:44,250 --> 01:23:46,300
成为模型中的内容。 

1917
01:23:46,300 --> 01:23:48,449
所以这个视图总是会开始的

1918
01:23:48,449 --> 01:23:50,029
与模型同步， 

1919
01:23:50,029 --> 01:23:51,949
然后我可以开始制作动画

1920
01:23:51,949 --> 01:23:54,019
但我们必须使其同步。 

1921
01:23:54,020 --> 01:23:56,560
所以我们在这里做一些功能

1922
01:23:56,560 --> 01:23:59,393
另一个小私人，称它为func。 

1923
01:24:00,591 --> 01:24:05,189
假设是startBonusTimeAnimation。 

1924
01:24:05,189 --> 01:24:08,549
我想在这里做的第一件事就是设定

1925
01:24:08,550 --> 01:24:13,550
我的animationBonusRemaining等于模型中的值。 

1926
01:24:13,789 --> 01:24:15,000
这样我就一直保持同步。 

1927
01:24:15,000 --> 01:24:17,675
总是叫这个东西， 

1928
01:24:17,675 --> 01:24:19,930
 startBonusTimeAnimation。 

1929
01:24:19,930 --> 01:24:22,710
每当这个Pie出现在屏幕上时， 

1930
01:24:22,710 --> 01:24:25,300
它会与模型同步，非常重要

1931
01:24:25,300 --> 01:24:29,090
如果您要拥有自己的版本

1932
01:24:29,090 --> 01:24:31,069
至少要在模型中进行动画处理

1933
01:24:31,069 --> 01:24:33,722
当它第一次出现在屏幕上时使其同步。 

1934
01:24:34,760 --> 01:24:36,199
那么，现在我该怎么办？ 

1935
01:24:36,399 --> 01:24:38,449
我的派出现在屏幕上，正在显示

1936
01:24:38,449 --> 01:24:40,199
剩余适当数量的奖励时间， 

1937
01:24:40,199 --> 01:24:43,689
但现在它希望将滴答声设置为零。 

1938
01:24:43,689 --> 01:24:46,049
所以我要照我说的去做

1939
01:24:46,050 --> 01:24:48,270
动画滴答声降为零

1940
01:24:48,270 --> 01:24:50,170
 withAnimation 

1941
01:24:50,369 --> 01:24:52,403
让我们使用线性动画。 

1942
01:24:53,729 --> 01:24:56,172
请打零。 

1943
01:24:57,569 --> 01:25:00,689
我只是在动画剩余的奖金

1944
01:25:00,689 --> 01:25:02,329
滴答作响到零。 

1945
01:25:02,329 --> 01:25:03,210
等一下

1946
01:25:03,210 --> 01:25:06,539
制作动画需要多长时间？ 

1947
01:25:06,539 --> 01:25:10,149
好吧，最好剩下多少时间， 

1948
01:25:10,149 --> 01:25:12,259
我不希望它降到零慢

1949
01:25:12,260 --> 01:25:14,250
或比剩余时间快。 

1950
01:25:14,250 --> 01:25:15,119
所以我要

1951
01:25:15,119 --> 01:25:17,289
我动画的持续时间， 

1952
01:25:17,289 --> 01:25:20,090
等于卡的BonusTimeRemaining。 

1953
01:25:20,090 --> 01:25:21,520
剩下多少秒了

1954
01:25:21,520 --> 01:25:23,699
这是剩余的百分比

1955
01:25:23,899 --> 01:25:27,571
这是剩余的秒数。 

1956
01:25:27,572 --> 01:25:29,770
就是这样，所以这真的是我需要做的。 

1957
01:25:29,770 --> 01:25:33,630
我只剩下一点自己的奖金时间， 

1958
01:25:33,630 --> 01:25:35,000
我同步到模型

1959
01:25:35,000 --> 01:25:37,500
然后立即开始向零动画。 

1960
01:25:38,369 --> 01:25:40,539
如果派呆了那么久

1961
01:25:40,539 --> 01:25:42,519
我们将看到动画一直到零。 

1962
01:25:42,520 --> 01:25:44,520
如果停止消耗奖金时间， 

1963
01:25:44,520 --> 01:25:46,090
此视图将消失。 

1964
01:25:46,289 --> 01:25:48,010
它可能不会完成其动画

1965
01:25:48,010 --> 01:25:51,380
没关系，它只会在这里消失。 

1966
01:25:51,380 --> 01:25:54,800
现在，如果我们不浪费奖金时间， 

1967
01:25:54,800 --> 01:25:57,079
比如说卡片是匹配的。 

1968
01:25:57,079 --> 01:25:59,109
他们已经被配对，没有花费额外的时间。 

1969
01:25:59,109 --> 01:26:01,109
我实际上还是要在那里派

1970
01:26:01,109 --> 01:26:03,559
我只是不想让它动画。 

1971
01:26:03,560 --> 01:26:05,789
这很容易，在其他情况下， 

1972
01:26:05,989 --> 01:26:08,679
我也要放一个馅饼。 

1973
01:26:08,680 --> 01:26:09,829
现在，这个派， 

1974
01:26:10,029 --> 01:26:11,619
我们不在乎它何时出现

1975
01:26:11,619 --> 01:26:12,849
因为我们没有动画。 

1976
01:26:12,850 --> 01:26:15,420
它当然不能使用此animationBonusRemaining 

1977
01:26:15,619 --> 01:26:17,250
这就是这个派的意思。 

1978
01:26:17,250 --> 01:26:20,109
因此，让我们将其与

1979
01:26:20,109 --> 01:26:22,672
无论模型中说什么。 

1980
01:26:23,859 --> 01:26:26,029
现在，我不喜欢这里重复的代码， 

1981
01:26:26,029 --> 01:26:28,429
看到他们两个都有这种填充和不透明度

1982
01:26:28,430 --> 01:26:30,567
所以让我们离开这里。 

1983
01:26:30,567 --> 01:26:34,479
相反，我们将在整个过程中使用一个组

1984
01:26:34,479 --> 01:26:37,789
对它应用填充和不透明度。 

1985
01:26:37,789 --> 01:26:40,380
希望这应该涵盖这里的所有基础。 

1986
01:26:40,380 --> 01:26:43,199
这是动画时出现的Pie， 

1987
01:26:43,199 --> 01:26:44,750
我们与模型同步

1988
01:26:44,750 --> 01:26:46,960
然后开始趋向于零

1989
01:26:46,960 --> 01:26:48,430
但是还剩下很多时间。 

1990
01:26:48,430 --> 01:26:51,130
如果我们不浪费奖金时间，就没有动画

1991
01:26:51,130 --> 01:26:52,760
那我们就做一个普通的派

1992
01:26:52,760 --> 01:26:54,310
奖金留在那里。 

1993
01:26:55,231 --> 01:26:56,131
看看是否可行。 

1994
01:26:59,390 --> 01:27:01,050
好吧，让我们看。 

1995
01:27:01,050 --> 01:27:03,670
喔，看看这个动画

1996
01:27:03,670 --> 01:27:05,510
哦，甚至匹配。 

1997
01:27:05,510 --> 01:27:07,489
这是一个很好的例子，因为

1998
01:27:07,489 --> 01:27:09,219
我一点击就匹配了这个

1999
01:27:09,220 --> 01:27:12,210
所以我没有用我的奖金时间，所以看起来不错

2000
01:27:12,210 --> 01:27:13,760
然后，一旦我有一场比赛， 

2001
01:27:13,760 --> 01:27:15,699
它切换到这里使用这个派

2002
01:27:15,699 --> 01:27:17,949
只是告诉我我还有多少钱

2003
01:27:17,949 --> 01:27:20,000
当事物匹配时。 

2004
01:27:20,000 --> 01:27:20,841
对，让我们在这里再看一个

2005
01:27:20,841 --> 01:27:24,889
鬼和这个家伙，让我们远离这些

2006
01:27:24,890 --> 01:27:26,210
这将开始并返回

2007
01:27:26,210 --> 01:27:28,380
看看是否还有剩余的奖金时间

2008
01:27:28,380 --> 01:27:31,060
当我们面朝下继续时。 

2009
01:27:31,060 --> 01:27:32,850
哦，是的。 

2010
01:27:32,850 --> 01:27:34,653
好的， 

2011
01:27:35,810 --> 01:27:38,390
看看那里发生了什么事

2012
01:27:38,390 --> 01:27:39,039
就那么简单。 

2013
01:27:39,239 --> 01:27:44,239
现在，这比

2014
01:27:44,590 --> 01:27:45,810
一些动画

2015
01:27:45,810 --> 01:27:49,050
但是有这样的情况并不少见

2016
01:27:49,886 --> 01:27:52,060
您的模型或任何数据源

2017
01:27:52,060 --> 01:27:53,880
可以告诉你发生了什么事， 

2018
01:27:53,880 --> 01:27:56,039
但它并没有不断变化。 

2019
01:27:56,039 --> 01:27:57,380
这就是为什么有时您必须创建

2020
01:27:57,380 --> 01:28:01,130
您可以在此处创建动画的自己的变体， 

2021
01:28:01,130 --> 01:28:02,819
但请确保您将其与模型同步

2022
01:28:02,819 --> 01:28:04,393
在您这样做之前。 

2023
01:28:05,359 --> 01:28:08,179
好，今天是动画

2024
01:28:08,180 --> 01:28:10,560
我们覆盖了很多领域。 

2025
01:28:10,560 --> 01:28:12,710
我们谈到了隐式动画， 

2026
01:28:12,909 --> 01:28:16,710
我们的筋斗表情很激动

2027
01:28:16,710 --> 01:28:17,869
他们有一场比赛。 

2028
01:28:17,869 --> 01:28:20,349
我们有几个明确的动画

2029
01:28:20,350 --> 01:28:22,880
当我们选择一张卡时，我们在这里做了一个

2030
01:28:22,880 --> 01:28:25,533
当我们制作新游戏时，我们在这里又做了一个。 

2031
01:28:26,449 --> 01:28:30,500
我们还展示了动画ViewModifiers 

2032
01:28:30,500 --> 01:28:33,119
我们的卡片正在制作动画

2033
01:28:33,119 --> 01:28:36,800
我们甚至展示了如何不让View来来去去

2034
01:28:36,800 --> 01:28:39,619
如果我们不希望他们来来去去， 

2035
01:28:39,619 --> 01:28:41,140
我们动画了我们的形状

2036
01:28:42,199 --> 01:28:43,880
我们要做的就是说

2037
01:28:43,880 --> 01:28:46,930
 Shape内的哪些数据可以动画显示， 

2038
01:28:46,930 --> 01:28:49,789
在我们的情况下，这是此处的起始终止角度。 

2039
01:28:49,989 --> 01:28:51,800
我们也做了一些过渡，对， 

2040
01:28:51,800 --> 01:28:54,510
我们进行了比例转换，以便当卡片匹配时， 

2041
01:28:54,510 --> 01:28:55,630
他们会消失。 

2042
01:28:55,630 --> 01:28:58,239
顺便说一下，我们可以进行类似的转换

2043
01:28:58,439 --> 01:29:01,439
例如，如果我们把这些饼放在这里， 

2044
01:29:01,439 --> 01:29:04,159
 .scale饼图上的过渡， 

2045
01:29:04,159 --> 01:29:06,449
然后当我们的馅饼出现时， 

2046
01:29:09,279 --> 01:29:12,509
放大到不错的样子

2047
01:29:12,510 --> 01:29:13,489
有点放大。 

2048
01:29:13,489 --> 01:29:16,069
如果我们没有规模，我不知道你以前是否注意到， 

2049
01:29:16,069 --> 01:29:18,006
但这实际上是一种淡入

2050
01:29:18,006 --> 01:29:20,359
也许我们可能想说我们不想要任何一个

2051
01:29:20,359 --> 01:29:23,819
我们将使用身份转换

2052
01:29:23,819 --> 01:29:26,398
然后这个派，不管它来来去去， 

2053
01:29:26,398 --> 01:29:28,789
它会出现。很好，因为通常

2054
01:29:28,789 --> 01:29:30,890
卡片正面朝下时发生

2055
01:29:30,890 --> 01:29:32,560
或在两个派之间切换

2056
01:29:32,560 --> 01:29:36,463
如果我们匹配，则它们具有完全相同的值。 

2057
01:29:37,689 --> 01:29:39,000
动画就是这样

2058
01:29:39,000 --> 01:29:40,560
希望这就是您所需要知道的

2059
01:29:40,560 --> 01:29:41,800
关于动画。 

2060
01:29:41,800 --> 01:29:45,039
我的意思是，动画当然是一个强大的子系统， 

2061
01:29:45,039 --> 01:29:47,500
我们不必在应用程序中添加很多行代码

2062
01:29:47,500 --> 01:29:49,960
使其做所有这些疯狂的事情。 

2063
01:29:49,960 --> 01:29:52,239
但我并没有尽一切可能给你看

2064
01:29:52,239 --> 01:29:54,679
您可以通过任何方式在动画中使用。 

2065
01:29:54,680 --> 01:29:55,829
所以还有很多东西要学

2066
01:29:55,829 --> 01:29:57,592
但现在让您了解基本知识。 

2067
01:29:58,479 --> 01:30:00,559
下周，我不确定我们要做什么

2068
01:30:00,560 --> 01:30:03,420
下周，我们要做一些手势， 

2069
01:30:03,420 --> 01:30:06,840
你可能知道，捏手势之类的东西

2070
01:30:06,840 --> 01:30:09,409
否则我们可能会做

2071
01:30:09,409 --> 01:30:13,069
 TextFields和Pickers，我看到了这个问题

2072
01:30:13,069 --> 01:30:14,606
在班级论坛上， 

2073
01:30:14,606 --> 01:30:15,960
也许我们会这样做。 

2074
01:30:15,960 --> 01:30:19,119
我们不太确定下周要去哪里

2075
01:30:19,119 --> 01:30:21,592
但请继续关注，然后您会发现的， 

2076
01:30:22,430 --> 01:30:27,430
 -[旁白]欲了解更多信息，请访问stanford.edu 

1
00:00:00,121 --> 00:00:02,704
(gentle music)

2
00:00:04,236 --> 00:00:06,250
- [Narrator] Stanford University

3
00:00:08,500 --> 00:00:12,012
- [Instructor] CS193P Spring of 2020.

4
00:00:12,012 --> 00:00:13,952
This is lecture six

5
00:00:13,952 --> 00:00:18,800
and today I'm gonna
cover two brief topics,

6
00:00:18,800 --> 00:00:21,603
either brief because they're minor topic

7
00:00:21,603 --> 00:00:22,950
like property observer,

8
00:00:22,950 --> 00:00:25,390
or I'm only gonna get into
so much detail in them

9
00:00:25,390 --> 00:00:26,940
like @State.

10
00:00:26,940 --> 00:00:29,070
And then we're gonna dive
into our main topic today,

11
00:00:29,070 --> 00:00:31,881
which is animation, which
is what our demo is gonna be

12
00:00:31,881 --> 00:00:32,900
all about.

13
00:00:32,900 --> 00:00:34,370
So let's get started.

14
00:00:34,370 --> 00:00:37,920
Property observers, only
do a quick word on this.

15
00:00:37,920 --> 00:00:39,360
The main thing I want you to understand

16
00:00:39,360 --> 00:00:43,940
about property observers,
it's just a way to watch a var

17
00:00:43,940 --> 00:00:47,280
and see when it changes
and then take some action.

18
00:00:47,280 --> 00:00:49,164
Now, a lot of times people get confused

19
00:00:49,164 --> 00:00:51,723
between property observers
and computed vars.

20
00:00:51,723 --> 00:00:53,735
They're completely different things,

21
00:00:53,735 --> 00:00:55,870
nothing to do with each other.

22
00:00:55,870 --> 00:00:57,844
Here, I have this var isFaceUp

23
00:00:57,844 --> 00:01:00,144
which has a property observer on it.

24
00:01:00,144 --> 00:01:02,270
That var is stored in memory,

25
00:01:02,270 --> 00:01:04,493
it's not a computed var in any way.

26
00:01:05,690 --> 00:01:08,953
In the property observer there
willSet I'm just watching

27
00:01:08,953 --> 00:01:11,743
for when isFaceUp is gonna be set

28
00:01:11,743 --> 00:01:14,240
and if the new value
it's gonna get is set,

29
00:01:14,240 --> 00:01:16,810
so in other words thing is gonna face-up,

30
00:01:16,810 --> 00:01:18,310
then for example, in this case,

31
00:01:18,310 --> 00:01:20,280
like maybe in our Memorize game,

32
00:01:20,280 --> 00:01:24,370
I'm gonna start using bonus
time, start the little pie

33
00:01:24,370 --> 00:01:26,730
behind our emoji started ticking.

34
00:01:26,730 --> 00:01:30,960
And if the isFaceUp is just
about to be set to false,

35
00:01:30,960 --> 00:01:32,887
I'm gonna stop using the bonus time.

36
00:01:32,887 --> 00:01:35,220
So the newValue in here that purple thing

37
00:01:35,220 --> 00:01:37,046
that's a special var that only appears

38
00:01:37,046 --> 00:01:38,717
in the will sets here.

39
00:01:38,717 --> 00:01:40,260
And of course, there's a didSet

40
00:01:40,260 --> 00:01:42,064
I'll use that in the demo
just to be different,

41
00:01:42,064 --> 00:01:45,963
inside that one oldValue is
what the value used to be

42
00:01:45,963 --> 00:01:47,453
before it changed.

43
00:01:48,290 --> 00:01:51,262
Alright, for this next topic,
I want to explain something

44
00:01:51,262 --> 00:01:54,460
that not obvious about what's going on

45
00:01:54,460 --> 00:01:56,970
and I haven't really
talked about this before,

46
00:01:56,970 --> 00:02:01,502
but your View like CardView,
and your EmojiGameView,

47
00:02:01,502 --> 00:02:03,713
they're all read-only.

48
00:02:04,690 --> 00:02:07,047
In other words, if you
look at the top View

49
00:02:07,047 --> 00:02:10,789
and all the SwiftUI on your
device, there's a let there.

50
00:02:10,789 --> 00:02:12,620
And you might think that's impossible.

51
00:02:12,620 --> 00:02:13,840
How can we not be changing the Views

52
00:02:13,840 --> 00:02:16,070
views are changing all the time.

53
00:02:16,070 --> 00:02:17,910
But we are not, the read-only,

54
00:02:17,910 --> 00:02:21,950
and that means that
having a var that stored

55
00:02:21,950 --> 00:02:23,644
in our View is kinda useless.

56
00:02:23,644 --> 00:02:25,084
We can't set its value anyway

57
00:02:25,084 --> 00:02:28,393
the only exception is vars that are set

58
00:02:28,393 --> 00:02:30,130
when you create

59
00:02:30,130 --> 00:02:31,430
the View.

60
00:02:31,430 --> 00:02:33,190
So like in CardView we have isFaceUp,

61
00:02:33,190 --> 00:02:35,110
it's set by people who create it,

62
00:02:35,110 --> 00:02:38,080
so that kind of makes
sense for that to be a var.

63
00:02:38,080 --> 00:02:39,635
But anything else that's not set that way,

64
00:02:39,635 --> 00:02:41,010
it might as well be a let.

65
00:02:41,010 --> 00:02:42,386
Or if it's a computed var definitely

66
00:02:42,386 --> 00:02:44,522
just wants to be a read-only computed var,

67
00:02:44,522 --> 00:02:48,323
which is the only kind of
computed vars we've had so far.

68
00:02:48,323 --> 00:02:49,960
Why?

69
00:02:49,960 --> 00:02:51,661
Why are they all read-only?

70
00:02:51,661 --> 00:02:54,110
Well, functional programming,

71
00:02:54,110 --> 00:02:55,860
one of the awesome things about it,

72
00:02:55,860 --> 00:02:58,430
is that it's very clear about mutability,

73
00:02:58,430 --> 00:03:00,360
when can this be changed?

74
00:03:00,360 --> 00:03:02,890
And there's a huge premium on good designs

75
00:03:02,890 --> 00:03:05,040
to having things be immutable.

76
00:03:05,040 --> 00:03:05,959
When things are immutable,

77
00:03:05,959 --> 00:03:08,193
nobody's changing it behind the scenes

78
00:03:08,193 --> 00:03:11,810
or doing something that is
messing up the provability

79
00:03:11,810 --> 00:03:13,721
that your code actually works.

80
00:03:13,721 --> 00:03:17,180
And also, when things
are mutable or immutable,

81
00:03:17,180 --> 00:03:19,057
when they change, you know they change,

82
00:03:19,057 --> 00:03:20,233
and you can do something about it.

83
00:03:20,233 --> 00:03:22,933
That's how we can use
these property observers on

84
00:03:22,933 --> 00:03:25,964
value types so effectively.

85
00:03:25,964 --> 00:03:27,822
In the case of SwiftUI,

86
00:03:27,822 --> 00:03:30,501
it wants to be knowing
when things are changing,

87
00:03:30,501 --> 00:03:33,014
and when they're changing, It
wants to do the minimum amount

88
00:03:33,014 --> 00:03:37,930
of work to replace the View
hierarchy with the right Views.

89
00:03:37,930 --> 00:03:39,735
And in fact, that is what's happening,

90
00:03:39,735 --> 00:03:41,520
if isFaceUp

91
00:03:41,520 --> 00:03:42,810
changes,

92
00:03:42,810 --> 00:03:46,375
it makes a new CardView that has that.

93
00:03:46,375 --> 00:03:48,493
That is how this is all working.

94
00:03:48,493 --> 00:03:51,611
This is actually a wonderful thing for you

95
00:03:51,611 --> 00:03:52,957
you might not think so.

96
00:03:52,957 --> 00:03:55,480
The fact you can't have
read-write vars is really good

97
00:03:55,480 --> 00:03:57,794
because remember that your Views

98
00:03:57,794 --> 00:03:59,723
are supposed to be stateless.

99
00:03:59,723 --> 00:04:02,511
They're supposed to always be reflecting

100
00:04:02,511 --> 00:04:04,000
what the state of the Model is.

101
00:04:04,000 --> 00:04:06,528
That's where the state
is, is in the Model.

102
00:04:06,528 --> 00:04:09,627
So you shouldn't need any
state of their own, right?

103
00:04:09,627 --> 00:04:12,563
No need for them to be not read-only.

104
00:04:13,540 --> 00:04:15,792
Well, mostly,

105
00:04:15,792 --> 00:04:17,841
and not 100% true.

106
00:04:17,841 --> 00:04:21,181
So let's talk about when
Views do need some state.

107
00:04:21,181 --> 00:04:23,510
And there are a few rare times,

108
00:04:23,510 --> 00:04:26,839
when it does need state,
it's always temporary.

109
00:04:26,839 --> 00:04:28,878
Views never have any long-term storage

110
00:04:28,878 --> 00:04:30,799
that's always gonna be in your Model.

111
00:04:30,799 --> 00:04:32,437
This is just temporary situations

112
00:04:32,437 --> 00:04:34,750
where you might need a little storage.

113
00:04:34,750 --> 00:04:37,283
What are some examples of
temporary storage you might need?

114
00:04:37,283 --> 00:04:40,530
Well, you might enter an "editing mode",

115
00:04:40,530 --> 00:04:42,670
where you're gonna collect
some data from the user

116
00:04:42,670 --> 00:04:45,870
and gather it up and then call
an Intent to change the Model

117
00:04:45,870 --> 00:04:47,990
with that data you've
collected or whatever.

118
00:04:47,990 --> 00:04:50,760
So just temporarily, you're collecting it.

119
00:04:50,760 --> 00:04:53,580
You might have been
displaying another View,

120
00:04:53,580 --> 00:04:55,200
some other View that
is collecting some data

121
00:04:55,200 --> 00:04:57,540
like a TextField, or a Picker,

122
00:04:57,540 --> 00:05:00,030
like we saw on that post in Piazza

123
00:05:00,030 --> 00:05:02,260
or have a View that's an Alert,

124
00:05:02,260 --> 00:05:03,650
you're giving the user an Alert,

125
00:05:03,650 --> 00:05:05,690
you just wanna keep track
of the fact that it's up

126
00:05:05,690 --> 00:05:06,950
until the user hits cancel,

127
00:05:06,950 --> 00:05:08,150
then you're like, "argh it's gone."

128
00:05:08,150 --> 00:05:09,800
And so you're just having a Bool,

129
00:05:09,800 --> 00:05:11,240
whether that thing is up or not

130
00:05:11,240 --> 00:05:15,050
that kinda really tiny
temporary data, or an animation.

131
00:05:15,050 --> 00:05:17,480
Animation only reflects
things in the past.

132
00:05:17,480 --> 00:05:18,618
So if you wanna have an
animation that's kinda

133
00:05:18,618 --> 00:05:20,720
going along with the present,

134
00:05:20,720 --> 00:05:23,310
you have to have a little
var, which is the future.

135
00:05:23,310 --> 00:05:25,380
So you can set that var to the future

136
00:05:25,380 --> 00:05:28,490
and animation will start
animating towards the future.

137
00:05:28,490 --> 00:05:30,230
Hopefully, you're setting the future to be

138
00:05:30,230 --> 00:05:32,070
the same thing that's gonna eventually be

139
00:05:32,070 --> 00:05:33,370
in your permanent state.

140
00:05:33,370 --> 00:05:35,109
But you're only using that var

141
00:05:35,109 --> 00:05:36,580
during the time the animation is happening

142
00:05:36,580 --> 00:05:38,770
and we know that animations are short,

143
00:05:38,770 --> 00:05:40,024
they're little temporary things.

144
00:05:40,024 --> 00:05:43,323
So animations, another case
of these temporary storage,

145
00:05:43,323 --> 00:05:45,833
and we'll see doing that in the demo.

146
00:05:45,833 --> 00:05:50,660
We can, in fact, create
storage in our read-only Views

147
00:05:50,660 --> 00:05:53,100
and we do it by marking a var

148
00:05:53,100 --> 00:05:56,200
that stores the information
we want with @State.

149
00:05:56,200 --> 00:05:57,972
So @State you know,

150
00:05:57,972 --> 00:06:00,590
like @Published, @ObservedObject,

151
00:06:00,590 --> 00:06:02,362
it's a property wrapper.

152
00:06:02,362 --> 00:06:06,310
Note that I've marked this state private.

153
00:06:06,310 --> 00:06:09,341
That's because state is private to you

154
00:06:09,341 --> 00:06:12,930
It's just temporary storage
you're using in your View,

155
00:06:12,930 --> 00:06:14,720
nobody else is gonna be looking at it.

156
00:06:14,720 --> 00:06:16,560
So by marking it private,
just kind of remind yourself,

157
00:06:16,560 --> 00:06:18,699
yeah, yeah this is a little private state

158
00:06:18,699 --> 00:06:20,260
temporary state right there.

159
00:06:20,260 --> 00:06:23,650
And of course, the type of
this thing can be any type,

160
00:06:23,650 --> 00:06:26,230
you're just declaring
a var basically here,

161
00:06:26,230 --> 00:06:27,504
that's gonna be read-write.

162
00:06:27,504 --> 00:06:30,903
But it can be any type that you want.

163
00:06:30,903 --> 00:06:33,323
An important thing to
understand about this State var,

164
00:06:33,323 --> 00:06:36,412
something temporary
here is if I change it,

165
00:06:36,412 --> 00:06:38,374
my View might get redrawn.

166
00:06:38,374 --> 00:06:41,332
If my View depends on something temporary,

167
00:06:41,332 --> 00:06:44,694
and it changes in a way that
makes my body draw differently

168
00:06:44,694 --> 00:06:46,043
it'll get redrawn.

169
00:06:46,043 --> 00:06:48,690
It's the same as ObservedObject, right?

170
00:06:48,690 --> 00:06:50,530
We do observed object on our ViewModel.

171
00:06:50,530 --> 00:06:52,480
If the ViewModel changes in a way

172
00:06:52,480 --> 00:06:54,560
that would make our View look different.

173
00:06:54,560 --> 00:06:56,940
It's gonna get redrawn
same thing with state

174
00:06:56,940 --> 00:06:58,823
which is kind of cool
feature of it actually.

175
00:06:58,823 --> 00:07:01,750
The space for this @State var

176
00:07:01,750 --> 00:07:05,060
is gonna be allocated in the heap.

177
00:07:05,060 --> 00:07:07,204
It has to, it can't make
the space in your View,

178
00:07:07,204 --> 00:07:08,680
your View is read-only

179
00:07:08,680 --> 00:07:11,020
so it's basically making a pointer

180
00:07:11,020 --> 00:07:13,320
so your View has a pointer in it

181
00:07:13,320 --> 00:07:15,240
and it points into the heap.

182
00:07:15,240 --> 00:07:17,180
And when your View gets rebuilt,

183
00:07:17,180 --> 00:07:19,340
cause your View's getting
rebuilt all the time,

184
00:07:19,340 --> 00:07:21,530
when isFaceUp changes in your CardView,

185
00:07:21,530 --> 00:07:23,420
you gotta make a new CardView.

186
00:07:23,420 --> 00:07:24,906
And when that happens,

187
00:07:24,906 --> 00:07:28,036
this pointer gets moved to the new version

188
00:07:28,036 --> 00:07:30,370
so you're still pointing at
that same thing in the heap.

189
00:07:30,370 --> 00:07:32,490
So if isFaceUp changes,

190
00:07:32,490 --> 00:07:35,440
your CardView is not gonna
lose its temporary storage.

191
00:07:35,440 --> 00:07:37,930
Basically your temporary
storage will stay around even

192
00:07:37,930 --> 00:07:40,340
as other things that are causing your View

193
00:07:40,340 --> 00:07:42,050
to even be completely rebuilt

194
00:07:42,050 --> 00:07:43,773
you get to keep your @State.

195
00:07:45,115 --> 00:07:47,365
We're gonna learn what
these @ sign things are,

196
00:07:47,365 --> 00:07:50,176
you know, @Published,
@ObservedObject, @State

197
00:07:50,176 --> 00:07:52,225
they're called property wrappers.

198
00:07:52,225 --> 00:07:54,930
You can read about it, in your reading.

199
00:07:54,930 --> 00:07:57,020
I think it's assigned for next week.

200
00:07:57,020 --> 00:07:59,996
I'm gonna explain it
eventually in lecture.

201
00:07:59,996 --> 00:08:02,126
Not quite yet, though, almost there.

202
00:08:02,126 --> 00:08:06,183
For now, just know that you
can mark a var with @State

203
00:08:06,183 --> 00:08:07,731
and now you can write to it.

204
00:08:07,731 --> 00:08:10,970
But use this sparingly and certainly never

205
00:08:10,970 --> 00:08:13,583
put anything that's
not temporary in there.

206
00:08:15,459 --> 00:08:18,290
All right, main topic
of the day is animation.

207
00:08:18,290 --> 00:08:19,808
What is animation?

208
00:08:19,808 --> 00:08:23,180
It's essentially a kind of
a smoothed out portrayal

209
00:08:23,180 --> 00:08:26,670
in your UI, over a period of time,

210
00:08:26,670 --> 00:08:28,930
which is configurable by the way,

211
00:08:28,930 --> 00:08:33,670
of a change that has
happened in your UI already.

212
00:08:33,670 --> 00:08:35,190
When the user looked at an animation,

213
00:08:35,190 --> 00:08:37,260
they're seeing something
that has already changed

214
00:08:37,260 --> 00:08:38,920
in the Model, okay,

215
00:08:38,920 --> 00:08:40,550
or it's already changed somewhere

216
00:08:40,550 --> 00:08:42,776
at the very least has
changed in an @State.

217
00:08:42,776 --> 00:08:44,865
Something that's already happened,

218
00:08:44,865 --> 00:08:47,224
it can't do it any other way.

219
00:08:47,224 --> 00:08:49,719
Otherwise, all your variables
in your Model would have

220
00:08:49,719 --> 00:08:52,333
to be constantly changing
as the animation went on

221
00:08:52,333 --> 00:08:54,692
that's just untenable architecture, right?

222
00:08:54,692 --> 00:08:57,370
So your Model changes,

223
00:08:57,370 --> 00:09:00,560
your View changes and that change gets

224
00:09:00,560 --> 00:09:02,830
animated in front of the user's eyes.

225
00:09:02,830 --> 00:09:05,173
So it's showing you
their very recent past.

226
00:09:06,153 --> 00:09:09,035
The point of animations is
to make the user experience

227
00:09:09,035 --> 00:09:11,580
less herky-jerky, obviously,

228
00:09:11,580 --> 00:09:14,390
but also to draw attention
to things change.

229
00:09:14,390 --> 00:09:16,900
We wanna use the user
peripheral vision to notice

230
00:09:16,900 --> 00:09:18,420
Oh, that number over there change,

231
00:09:18,420 --> 00:09:20,795
oh, that View moved over here, whatever.

232
00:09:20,795 --> 00:09:23,191
That is what we use animation for

233
00:09:23,191 --> 00:09:25,100
and that's why we have animation.

234
00:09:25,100 --> 00:09:26,844
It also just makes more pleasant,

235
00:09:26,844 --> 00:09:29,250
less stressful experience
to have something

236
00:09:29,250 --> 00:09:31,150
jumping on screen at you all the time.

237
00:09:32,720 --> 00:09:34,905
So in SwiftUI, what can get animated?

238
00:09:34,905 --> 00:09:37,451
Well, I'm gonna talk about
what can get animated

239
00:09:37,451 --> 00:09:38,960
but first, I wanna make it clear

240
00:09:38,960 --> 00:09:41,814
that animation only works for Views

241
00:09:41,814 --> 00:09:43,742
that are in a container

242
00:09:43,742 --> 00:09:46,430
that is already on screen.

243
00:09:46,430 --> 00:09:48,691
So if they're in a container
that's already on screen

244
00:09:48,691 --> 00:09:49,871
and a change happens to them,

245
00:09:49,871 --> 00:09:52,580
what kind of change can be animated?

246
00:09:52,580 --> 00:09:55,782
Well, the appearance and
disappearance of Views again

247
00:09:55,782 --> 00:09:58,684
only if they're in a container
this already on screen

248
00:09:58,684 --> 00:10:03,684
also changes to the arguments
of animatable ViewModifiers,

249
00:09:58,684 --> 00:10:03,684
also changes to the arguments
of animatable ViewModifiers,

250
00:10:03,960 --> 00:10:06,660
like opacity and
rotation, things like this

251
00:10:06,660 --> 00:10:09,865
that boost ViewModifiers know
how to animate themselves.

252
00:10:09,865 --> 00:10:12,480
And we're gonna create
one of our own today,

253
00:10:12,480 --> 00:10:16,660
those changes to those
arguments can be animated.

254
00:10:16,660 --> 00:10:18,727
And also the changes to arguments

255
00:10:18,727 --> 00:10:21,480
are the creation of Shapes.

256
00:10:21,480 --> 00:10:22,970
If you create a Shape,

257
00:10:22,970 --> 00:10:24,670
with certain arguments
configured in some way,

258
00:10:24,670 --> 00:10:26,730
and then you change those,

259
00:10:26,730 --> 00:10:30,283
then it can be animated
to go to a new state.

260
00:10:32,170 --> 00:10:34,630
So how do we kick off an animation?

261
00:10:34,630 --> 00:10:36,150
By the way, that's it for changes,

262
00:10:36,150 --> 00:10:37,390
there's nothing else gonna be changed

263
00:10:37,390 --> 00:10:39,470
just ViewModifiers, Shapes,

264
00:10:39,470 --> 00:10:41,080
and the appearance and
disappearance of Views,

265
00:10:41,080 --> 00:10:42,910
wanna make that clear.

266
00:10:42,910 --> 00:10:44,990
Alright, so how do we
make an animation "go"?

267
00:10:44,990 --> 00:10:46,210
Well, there's two ways to do it.

268
00:10:46,210 --> 00:10:48,320
One is an implicit animation

269
00:10:48,320 --> 00:10:51,110
where we're going to
just mark a View and say,

270
00:10:51,110 --> 00:10:55,300
whenever one of the modifiers
on this View changes,

271
00:10:55,300 --> 00:10:57,450
we're going to animate that change.

272
00:10:57,450 --> 00:11:00,400
So that's implicit animation
is going to automatically

273
00:11:00,400 --> 00:11:03,720
every time that modifiers
on that View change,

274
00:11:03,720 --> 00:11:05,340
it's going to animate it.

275
00:11:05,340 --> 00:11:07,750
The second one is explicitly,

276
00:11:07,750 --> 00:11:11,410
where we are going to call some
code that is going to result

277
00:11:11,410 --> 00:11:14,410
in some changes to
ViewModifiers, or Shapes,

278
00:11:14,410 --> 00:11:16,700
or Views are gonna be coming and going.

279
00:11:16,700 --> 00:11:18,880
And we're gonna wrap that code

280
00:11:18,880 --> 00:11:21,720
by calling this function withAnimation.

281
00:11:21,720 --> 00:11:23,100
And inside the curly braces there,

282
00:11:23,100 --> 00:11:24,400
we're gonna put the code

283
00:11:24,400 --> 00:11:27,290
and that's gonna cause all
the things that would change

284
00:11:27,290 --> 00:11:29,015
all those ViewModifier
arguments that change,

285
00:11:29,015 --> 00:11:30,310
all the Views come and go.

286
00:11:30,310 --> 00:11:31,960
They're all gonna happen together

287
00:11:31,960 --> 00:11:35,070
in one concurrent animation.

288
00:11:35,070 --> 00:11:37,420
So we're explicitly animating right there,

289
00:11:37,420 --> 00:11:40,540
we're saying, animate
this and then we usually

290
00:11:40,540 --> 00:11:44,140
do something like call an
Intent in our ViewModel.

291
00:11:44,140 --> 00:11:46,590
And we know that's gonna
make a lot of changes

292
00:11:46,590 --> 00:11:49,740
we want the result of that
to all be animated together.

293
00:11:49,740 --> 00:11:51,433
So that's the explicit animation.

294
00:11:52,600 --> 00:11:55,520
So let's talk about the
implicit animation first.

295
00:11:55,520 --> 00:11:58,100
Some people call this automatic animation

296
00:11:58,100 --> 00:12:00,956
essentially just declares or tags a View

297
00:12:00,956 --> 00:12:02,770
so that all ViewModifier arguments

298
00:12:02,770 --> 00:12:05,280
are always animated

299
00:12:05,280 --> 00:12:06,163
for this View.

300
00:12:07,370 --> 00:12:10,440
You get to specify how
these things happen,

301
00:12:10,440 --> 00:12:12,660
like how long it takes for them to happen.

302
00:12:12,660 --> 00:12:14,980
And also a curve, which I'll talk about,

303
00:12:14,980 --> 00:12:17,580
you do get to control it a little bit.

304
00:12:17,580 --> 00:12:22,580
You do it by calling this
function animation on any View.

305
00:12:23,980 --> 00:12:28,130
So here I've called it
on opacity or rotation,

306
00:12:28,130 --> 00:12:30,820
modified Text of a ghost.

307
00:12:30,820 --> 00:12:34,130
I've said animation,
provided the argument there,

308
00:12:34,130 --> 00:12:36,540
which is the how to do the animation,

309
00:12:36,540 --> 00:12:37,970
how long and all that stuff.

310
00:12:37,970 --> 00:12:42,440
And now forevermore, whenever
the scary var changes,

311
00:12:42,440 --> 00:12:44,090
and thus the opacity changes,

312
00:12:44,090 --> 00:12:46,448
or the upsideDown var changes there

313
00:12:46,448 --> 00:12:49,220
rotation effect that's
gonna change the rotation.

314
00:12:49,220 --> 00:12:52,750
Anytime those changes happen,
it's going to animate it,

315
00:12:52,750 --> 00:12:57,230
because this View this
combination, things here in green,

316
00:12:57,230 --> 00:12:59,520
is now implicitly animated.

317
00:12:59,520 --> 00:13:02,313
That's always gonna be the
case that that happens.

318
00:13:03,850 --> 00:13:07,420
Warning here, little red
word warning so pay attention

319
00:13:08,677 --> 00:13:12,700
.animation on a container View

320
00:13:12,700 --> 00:13:15,500
does not work how you
would generally think

321
00:13:15,500 --> 00:13:18,470
you might imagine, it's just gonna animate

322
00:13:18,470 --> 00:13:23,470
the whole container like one
big, somehow blob of change.

323
00:13:24,000 --> 00:13:26,920
But it doesn't all of doing
animation on a container does,

324
00:13:26,920 --> 00:13:29,270
it just applies that
animation to all the things

325
00:13:29,270 --> 00:13:30,980
inside the container.

326
00:13:30,980 --> 00:13:34,817
In other words, .animation
is not like .padding, right.

327
00:13:34,817 --> 00:13:37,400
.padding puts padding
around the whole ZStack

328
00:13:37,400 --> 00:13:39,410
or the whole VStack or whatever.

329
00:13:39,410 --> 00:13:42,670
It's more like .font or if
you say .font on the ZStack,

330
00:13:42,670 --> 00:13:46,680
all the texts in the
ZStack, get that font, okay.

331
00:13:46,680 --> 00:13:48,150
Animation is more like .font

332
00:13:48,150 --> 00:13:51,210
if you say animation on ZStack,

333
00:13:51,210 --> 00:13:53,892
all the things inside are
gonna get that, and that's

334
00:13:53,892 --> 00:13:57,122
rarely what you actually want surprising.

335
00:13:57,122 --> 00:13:59,390
And so I'm just giving you a warning

336
00:13:59,390 --> 00:14:04,390
that we don't usually put
.animation on container Views,

337
00:14:04,610 --> 00:14:08,670
they're usually put on,
if not on leaf Views,

338
00:14:08,670 --> 00:14:11,493
at least on very small,
self-contained Views.

339
00:14:14,180 --> 00:14:16,010
So that animation argument

340
00:14:16,010 --> 00:14:18,120
that you're passing there you
saw in the previous slide,

341
00:14:18,120 --> 00:14:20,370
it was ease in and ease out, it's called,

342
00:14:20,370 --> 00:14:23,380
that lets you control the
animation like its duration.

343
00:14:23,380 --> 00:14:24,270
How long is this gonna take ?

344
00:14:24,270 --> 00:14:26,520
Two seconds or whatever, a delay,

345
00:14:26,520 --> 00:14:29,570
wait a half a second before
you start this animation.

346
00:14:29,570 --> 00:14:31,420
It can repeat a certain number of times,

347
00:14:31,420 --> 00:14:32,760
or even repeat forever,

348
00:14:32,760 --> 00:14:35,000
do the animation to make this change,

349
00:14:35,000 --> 00:14:36,930
and then just keep doing
the animation over and over.

350
00:14:36,930 --> 00:14:39,350
The change, of course, has
already been made in the past,

351
00:14:39,350 --> 00:14:41,380
but just keep doing the animation

352
00:14:41,380 --> 00:14:42,717
sometimes you wanna do that.

353
00:14:42,717 --> 00:14:46,350
And also you can set
the animation's curve.

354
00:14:46,350 --> 00:14:48,723
So what is the animation curve?

355
00:14:49,640 --> 00:14:51,250
This is actually determined by

356
00:14:51,250 --> 00:14:53,580
what kind of animation you choose.

357
00:14:53,580 --> 00:14:56,600
And the animation curve controls the rate

358
00:14:56,600 --> 00:14:59,240
at which the animation plays out

359
00:14:59,240 --> 00:15:02,220
in linear animation, for example,

360
00:15:02,220 --> 00:15:04,530
the rate is constant
throughout the whole time

361
00:15:04,530 --> 00:15:08,010
the whole animation from, you
know, one opacity to another,

362
00:15:08,010 --> 00:15:09,390
or from one rotation or another

363
00:15:09,390 --> 00:15:12,330
happens, linear constant rate.

364
00:15:12,330 --> 00:15:14,160
Then this ease in, ease out

365
00:15:14,160 --> 00:15:16,230
that I mentioned on the
previous one, it's different.

366
00:15:16,230 --> 00:15:19,440
It starts out slow, slowly
changing the opacity

367
00:15:19,440 --> 00:15:21,310
of the rotation and then speeds up,

368
00:15:21,310 --> 00:15:24,680
and then as it's almost
there, it slows back down.

369
00:15:24,680 --> 00:15:26,980
And why do you want something like that?

370
00:15:26,980 --> 00:15:28,440
Well, if you're, for example,

371
00:15:28,440 --> 00:15:31,880
moving a card across screen
from one place to another,

372
00:15:31,880 --> 00:15:34,800
it's kind of abrupt, if it
just picks up moves over.

373
00:15:34,800 --> 00:15:36,050
It's much nicer for it to

374
00:15:37,110 --> 00:15:40,100
start moving slow and then
move over and then slow down

375
00:15:40,100 --> 00:15:42,840
as it's arriving, kind of
like an airplane, right.

376
00:15:42,840 --> 00:15:45,701
Starts on the runway stop
and it's slowly taking off

377
00:15:45,701 --> 00:15:48,490
and then go in the air and
it goes to 500 miles an hour

378
00:15:48,490 --> 00:15:49,840
then it gets to the destination airport,

379
00:15:49,840 --> 00:15:52,630
and then slows down to
100, 150 miles an hour,

380
00:15:52,630 --> 00:15:53,463
and then it lands.

381
00:15:53,463 --> 00:15:57,470
So it's that kind of curve of the rate

382
00:15:57,470 --> 00:15:58,800
is ease in and ease out.

383
00:15:58,800 --> 00:16:00,950
You almost always want things to moving

384
00:16:00,950 --> 00:16:02,940
to at least do ease in, ease out

385
00:16:02,940 --> 00:16:05,150
if not the next one, which is spring.

386
00:16:05,150 --> 00:16:08,340
So spring is the thing
gets to its destination

387
00:16:08,340 --> 00:16:09,960
and then it kind of bounces a little bit

388
00:16:09,960 --> 00:16:11,800
has a little soft landing there

389
00:16:11,800 --> 00:16:14,190
overshoots the mark a
little bit and springs back

390
00:16:14,190 --> 00:16:16,330
a little bit like it's
got a spring connecting it

391
00:16:16,330 --> 00:16:18,160
to the destination.

392
00:16:18,160 --> 00:16:21,653
And these kinds of
animation curves make the UI

393
00:16:21,653 --> 00:16:24,649
a little more comfortable
for users less, you know,

394
00:16:24,649 --> 00:16:26,573
jarring, less abrupt.

395
00:16:29,630 --> 00:16:31,680
So let's talk about implicit animation

396
00:16:31,680 --> 00:16:34,650
when I think I was just
describing an explicit animation,

397
00:16:34,650 --> 00:16:36,650
which is what I'm gonna describe next.

398
00:16:36,650 --> 00:16:40,460
So these automatic, implicit animations,

399
00:16:40,460 --> 00:16:45,020
they're not really even the
primary way we do animation.

400
00:16:45,020 --> 00:16:47,270
It probably depends on
the app a little bit

401
00:16:47,270 --> 00:16:50,080
but mostly, we don't use them that much

402
00:16:50,080 --> 00:16:55,080
because when you have a
kind of a group of Views,

403
00:16:55,360 --> 00:16:58,680
they wanna work together to animate.

404
00:16:58,680 --> 00:17:03,680
That's why putting .animation
on a container like a ZStack,

405
00:17:04,000 --> 00:17:06,590
not just, we just don't do it very much.

406
00:17:06,590 --> 00:17:09,250
Because if a ZStack has a whole
bunch of Views inside of it

407
00:17:09,250 --> 00:17:12,150
maybe Views inside those
and this big construction,

408
00:17:12,150 --> 00:17:15,580
those Views want to animate all together,

409
00:17:15,580 --> 00:17:19,660
all the same duration, all the same curve,

410
00:17:19,660 --> 00:17:21,870
they wanna be in sync.

411
00:17:21,870 --> 00:17:26,360
Explicit animation is where we
cause an animation to happen

412
00:17:26,360 --> 00:17:29,210
all with the same duration,
all with the same curve

413
00:17:29,210 --> 00:17:31,600
for a whole bunch of Views.

414
00:17:31,600 --> 00:17:34,320
And the way we do it is we just take this

415
00:17:34,320 --> 00:17:37,220
withAnimation function, call it

416
00:17:37,220 --> 00:17:39,530
with this argument, which is a closure,

417
00:17:39,530 --> 00:17:41,540
Inside the closure, we're
just gonna do something

418
00:17:41,540 --> 00:17:44,010
like calling Intent on our ViewModel,

419
00:17:44,010 --> 00:17:46,540
that's a classic thing we do there.

420
00:17:46,540 --> 00:17:48,340
And Model can change like crazy,

421
00:17:48,340 --> 00:17:50,520
our View might change like crazy,

422
00:17:50,520 --> 00:17:54,290
and all those crazy changes
are all gonna happen together

423
00:17:54,290 --> 00:17:57,920
with this Animation that
we passed to withAnimation.

424
00:17:57,920 --> 00:18:00,980
Here I'm doing two
second linear Animation.

425
00:18:00,980 --> 00:18:04,130
So all of the changes are
gonna happen at a linear rate

426
00:18:04,130 --> 00:18:05,933
over the course of two seconds.

427
00:18:07,150 --> 00:18:09,360
Now, I'm calling a
function here withAnimation

428
00:18:09,360 --> 00:18:13,020
one has two arguments, an
animation, and then a closure,

429
00:18:13,020 --> 00:18:14,400
calling functions like this,

430
00:18:14,400 --> 00:18:17,750
that's more of an imperative
approach to programming.

431
00:18:17,750 --> 00:18:20,420
We know the SwiftUI is mostly declarative,

432
00:18:20,420 --> 00:18:22,460
we just saying the state of everything

433
00:18:22,460 --> 00:18:25,100
and the implicit
animations are declarative.

434
00:18:25,100 --> 00:18:26,690
You're just declaring that

435
00:18:26,690 --> 00:18:29,960
when these modifiers on this thing change,

436
00:18:29,960 --> 00:18:31,320
you're gonna animate it.

437
00:18:31,320 --> 00:18:33,010
But this is actually imperative.

438
00:18:33,010 --> 00:18:36,340
Here we are telling somebody

439
00:18:36,340 --> 00:18:38,360
do this and animate it

440
00:18:38,360 --> 00:18:39,360
so it's imperative.

441
00:18:39,360 --> 00:18:43,860
So there's not a lot of
places in SwiftUI code,

442
00:18:43,860 --> 00:18:46,840
where you're doing imperative programming.

443
00:18:46,840 --> 00:18:49,540
Remember, all this code
has to be in your View,

444
00:18:49,540 --> 00:18:51,730
cause ViewModels don't see the View

445
00:18:51,730 --> 00:18:52,980
so they can't be doing this.

446
00:18:52,980 --> 00:18:54,330
This is all in your View,

447
00:18:54,330 --> 00:18:57,100
it's in the spot in your SwiftUI code,

448
00:18:57,100 --> 00:19:00,749
where you do imperative code
which is like onTapGesture,

449
00:19:00,749 --> 00:19:02,210
Views are tapped, boom,

450
00:19:02,210 --> 00:19:03,540
you're gonna do something imperative,

451
00:19:03,540 --> 00:19:07,240
you're gonna say choose the
Intent, choose card or whatever.

452
00:19:07,240 --> 00:19:11,120
And those are the places
on things happening

453
00:19:11,120 --> 00:19:12,940
like on tap, just other gestures

454
00:19:12,940 --> 00:19:14,740
we're gonna learn about next week.

455
00:19:14,740 --> 00:19:17,643
That's when we're gonna
call withAnimation.

456
00:19:19,081 --> 00:19:22,070
Now, explicitly animations, as I said,

457
00:19:22,070 --> 00:19:24,390
are usually wrapped around
things like Intents,

458
00:19:24,390 --> 00:19:25,880
a ViewModel Intent.

459
00:19:25,880 --> 00:19:28,340
But you might also wrap it
around something that happens

460
00:19:28,340 --> 00:19:29,240
only in the UI.

461
00:19:29,240 --> 00:19:31,760
For example, that editing
mode I was talking about,

462
00:19:31,760 --> 00:19:33,580
let's say you're going into editing mode

463
00:19:33,580 --> 00:19:37,960
and little icons will appear
to delete things or whatever

464
00:19:37,960 --> 00:19:40,230
those things want to
kind of animate smoothly

465
00:19:40,230 --> 00:19:41,740
and appear on screen.

466
00:19:41,740 --> 00:19:44,920
And so you might be doing
withAnimation when the user

467
00:19:44,920 --> 00:19:49,920
hits the button to to say
enter edit mode or whatever.

468
00:19:50,200 --> 00:19:53,740
Another imperative place
is the action of a Button.

469
00:19:53,740 --> 00:19:56,090
And I'll show Buttons
today in the demo as well

470
00:19:56,090 --> 00:19:58,440
and you'll see the action
of a Button is another place

471
00:19:58,440 --> 00:20:00,610
we do imperative code
and where We would likely

472
00:19:58,440 --> 00:20:00,610
we do imperative code
and where We would likely

473
00:20:00,610 --> 00:20:02,293
do something like withAnimation.

474
00:20:03,430 --> 00:20:06,340
This is red again, the second red thing.

475
00:20:06,340 --> 00:20:08,767
First one was the red about doing

476
00:20:08,767 --> 00:20:11,290
.animation on container Views.

477
00:20:11,290 --> 00:20:15,050
This one is to remind you
that explicit animations

478
00:20:15,050 --> 00:20:18,630
do not override implicit animations.

479
00:20:18,630 --> 00:20:21,090
Implicit animations are
assumed to be on Views

480
00:20:21,090 --> 00:20:23,750
they are self-contained,
they work independently,

481
00:20:23,750 --> 00:20:25,630
whatever animation makes sense for them

482
00:20:25,630 --> 00:20:27,950
should always make sense
to them no matter what.

483
00:20:27,950 --> 00:20:29,030
So if there's a View,

484
00:20:29,030 --> 00:20:32,200
and it has an implicit
animation attached to it,

485
00:20:32,200 --> 00:20:35,100
then it's gonna be doing
that implicit animation

486
00:20:35,100 --> 00:20:37,099
whenever its things change.

487
00:20:37,099 --> 00:20:38,980
Even if there's an explicit animation

488
00:20:38,980 --> 00:20:40,330
going on at the same time.

489
00:20:40,330 --> 00:20:42,340
It's gonna have no effect on them.

490
00:20:42,340 --> 00:20:44,233
Implicitly animations always win.

491
00:20:46,670 --> 00:20:50,530
Now transitions specify
how to animate the arrival

492
00:20:50,530 --> 00:20:52,710
and departure of Views.

493
00:20:52,710 --> 00:20:54,450
Remember, those Views
have to be in containers

494
00:20:54,450 --> 00:20:56,090
that are already on screen.

495
00:20:56,090 --> 00:20:58,900
But whenever you arrives, you
want to be able to animate it

496
00:20:58,900 --> 00:21:02,890
fade in or flies in from
outer space or something

497
00:21:02,890 --> 00:21:06,370
you want some sort of animation
for that View arriving.

498
00:21:06,370 --> 00:21:08,180
Now a transition

499
00:21:08,180 --> 00:21:09,450
is only

500
00:21:09,450 --> 00:21:12,050
a pair of ViewModifiers, that's all it is

501
00:21:12,050 --> 00:21:14,480
one of the ViewModifiers is modifying

502
00:21:14,480 --> 00:21:17,080
the View for what is supposed
to look like when it's there

503
00:21:17,080 --> 00:21:18,673
and the other one is
modifying the View for what

504
00:21:18,673 --> 00:21:20,860
it's supposed to look
like when it's not there.

505
00:21:20,860 --> 00:21:24,380
In other words, it hasn't
arrived or it just left,

506
00:21:24,380 --> 00:21:26,240
the one that's on there's
probably gonna have,

507
00:21:26,240 --> 00:21:29,340
let's say it's a fade, it'll
start with the one, with

508
00:21:29,340 --> 00:21:32,490
the ViewModifier, where it's
on there of opacity one,

509
00:21:32,490 --> 00:21:36,260
and then the ViewModifier for
the other one is opacity zero.

510
00:21:36,260 --> 00:21:39,930
And system is gonna animate
between those two ViewModifiers

511
00:21:39,930 --> 00:21:42,690
to make that thing appear or disappear.

512
00:21:42,690 --> 00:21:46,740
So a transition is really just a version

513
00:21:46,740 --> 00:21:49,310
of changes to the
arguments of ViewModifier

514
00:21:49,310 --> 00:21:52,090
cause a transition is just
this pair of modifiers.

515
00:21:52,090 --> 00:21:54,370
the two modifiers can
have different arguments

516
00:21:54,370 --> 00:21:56,130
and so that's it, that's all it is.

517
00:21:56,130 --> 00:21:57,600
So transitioning is not really

518
00:21:57,600 --> 00:21:58,433
a different kind of animation,

519
00:21:58,433 --> 00:22:01,580
it's just a way of specifying
the two ViewModifiers

520
00:22:01,580 --> 00:22:03,663
for when Views appear and disappear.

521
00:22:05,250 --> 00:22:09,150
So how do we specify
what transition we want

522
00:22:09,150 --> 00:22:12,030
the system to use when it's
animating the appearance

523
00:22:12,030 --> 00:22:14,900
or disappearance of a given View?

524
00:22:14,900 --> 00:22:16,980
Remember a transition
just a pair of modifiers,

525
00:22:16,980 --> 00:22:19,470
so we're essentially just
gonna attach the two modifiers

526
00:22:19,470 --> 00:22:22,017
we want modifier for when it's
on screen and the modifier

527
00:22:22,017 --> 00:22:24,830
when it's not to a View.

528
00:22:24,830 --> 00:22:29,040
And we attach this
transition using .transition,

529
00:22:29,040 --> 00:22:31,160
very simple ViewModifier.

530
00:22:31,160 --> 00:22:33,100
I'm gonna show you by example here,

531
00:22:33,100 --> 00:22:36,110
and I'm gonna use two
built-in transitions.

532
00:22:36,110 --> 00:22:38,850
One is called .scale,
that's the blue one there,

533
00:22:38,850 --> 00:22:42,630
and the other is called .identity,
which is the purple one.

534
00:22:42,630 --> 00:22:44,870
So a .scale transition,

535
00:22:44,870 --> 00:22:49,210
its two ViewModifiers are frame modifiers.

536
00:22:49,210 --> 00:22:52,460
And the off-screen one
has a frame of zero,

537
00:22:52,460 --> 00:22:55,230
and the on-screen one has
a frame of like full size

538
00:22:55,230 --> 00:22:56,900
whenever its normal size is.

539
00:22:56,900 --> 00:23:01,900
So scale transition zooms the
View in and out from tiny,

540
00:23:02,080 --> 00:23:06,616
zero size up to full size
as it goes out or in.

541
00:23:06,616 --> 00:23:09,760
And the identity transition
is an interesting one,

542
00:23:09,760 --> 00:23:12,720
it's ViewModifier does nothing.

543
00:23:12,720 --> 00:23:16,740
So since nothing is changing
between when it's gone,

544
00:23:16,740 --> 00:23:19,230
and when it's there, it
just instantly appears

545
00:23:19,230 --> 00:23:20,710
and instantly disappears.

546
00:23:20,710 --> 00:23:22,480
In other words, there's
no animation because

547
00:23:22,480 --> 00:23:25,350
there's no differences
between the two ViewModifiers

548
00:23:25,350 --> 00:23:26,930
are exactly the same

549
00:23:26,930 --> 00:23:28,980
and they don't actually modify the View

550
00:23:28,980 --> 00:23:30,970
so there's no animation to happen.

551
00:23:30,970 --> 00:23:33,030
So bloop, it appears and disappears.

552
00:23:33,030 --> 00:23:34,760
And it is occasionally the case

553
00:23:34,760 --> 00:23:36,440
that when you're doing an animation,

554
00:23:36,440 --> 00:23:38,190
and you have Views coming and going,

555
00:23:38,190 --> 00:23:39,860
possibly you might want a View

556
00:23:39,860 --> 00:23:42,400
to just bloop appear and bloop disappear

557
00:23:42,400 --> 00:23:44,380
and not be animated.

558
00:23:44,380 --> 00:23:46,000
That's not the default

559
00:23:46,000 --> 00:23:50,090
so the default transition
is called .opacity,

560
00:23:50,090 --> 00:23:53,200
which is a fade, fades in and out, right.

561
00:23:53,200 --> 00:23:54,290
It's just taking the opacity

562
00:23:54,290 --> 00:23:55,940
which we learned about last time,

563
00:23:55,940 --> 00:23:58,137
making go from one to
zero when it goes out

564
00:23:58,137 --> 00:24:00,320
and from zero to one when it goes in.

565
00:24:00,320 --> 00:24:01,830
So we moderated that in that case

566
00:24:01,830 --> 00:24:04,635
is the opacity ViewModifier.

567
00:24:04,635 --> 00:24:06,890
Let's look at this ZStack right here,

568
00:24:06,890 --> 00:24:09,894
it's basically our card kind of

569
00:24:09,894 --> 00:24:12,050
simplified here.

570
00:24:12,050 --> 00:24:13,627
There's only so much room on the slides,

571
00:24:13,627 --> 00:24:17,530
and you can see that from my
face-up the front of my card,

572
00:24:17,530 --> 00:24:18,750
I got my RoundedRectangles,

573
00:24:18,750 --> 00:24:20,990
let's say don't have
them all specified there,

574
00:24:20,990 --> 00:24:22,170
but you know what they are.

575
00:24:22,170 --> 00:24:25,230
And I didn't put a .transition modifier

576
00:24:25,230 --> 00:24:26,322
on the RoundedRectangles.

577
00:24:26,322 --> 00:24:28,730
So they're gonna get
the default transition,

578
00:24:28,730 --> 00:24:31,177
which is opacity. So the
RoundedRectangles on the front

579
00:24:31,177 --> 00:24:34,240
are gonna fade in and
out as they come and go.

580
00:24:34,240 --> 00:24:36,417
But I did put a transition on the Text

581
00:24:36,417 --> 00:24:38,220
the little ghosts there.

582
00:24:38,220 --> 00:24:41,410
That is going to zoom up out of nowhere

583
00:24:41,410 --> 00:24:45,450
and then zoom back down to
zero size when it goes away.

584
00:24:45,450 --> 00:24:47,220
That's what .scale means.

585
00:24:47,220 --> 00:24:49,350
And then the RoundedRectangle on the back

586
00:24:49,350 --> 00:24:51,540
I put the transition identity that means

587
00:24:51,540 --> 00:24:54,010
when the back appears
it's gonna bloop appear

588
00:24:54,010 --> 00:24:57,220
it's not gonna fade in or
grow out, it's bloop appear.

589
00:24:57,220 --> 00:24:59,570
Now it'll bloop appear and meanwhile,

590
00:24:59,570 --> 00:25:02,500
the front will be fading out
and zooming shrinking down

591
00:25:02,500 --> 00:25:03,333
at the same time.

592
00:25:03,333 --> 00:25:05,680
So it's not gonna be
a very nice animation.

593
00:25:05,680 --> 00:25:08,160
This is kind of a kitchen
sink animation here,

594
00:25:08,160 --> 00:25:10,970
you would never do it actually like this

595
00:25:10,970 --> 00:25:12,120
but I just want you to understand

596
00:25:12,120 --> 00:25:13,840
what all these transitions do.

597
00:25:13,840 --> 00:25:16,750
By the way, you see here how isFaceUp,

598
00:25:16,750 --> 00:25:19,920
which is just a conditional
inside of a ViewBuilder, right?

599
00:25:19,920 --> 00:25:20,940
This is the ZStack,

600
00:25:20,940 --> 00:25:23,610
we know the content
ZStack is a ViewBuilder.

601
00:25:23,610 --> 00:25:25,450
And inside ViewBuilder,
it's a list of Views

602
00:25:25,450 --> 00:25:28,470
but we can use if-thens to
include or not include some,

603
00:25:28,470 --> 00:25:30,490
well, of course, as we include them,

604
00:25:30,490 --> 00:25:33,580
they appear on screen as
we don't include them,

605
00:25:33,580 --> 00:25:35,200
they disappear on screen.

606
00:25:35,200 --> 00:25:39,010
And these kinds of if-thens
inside of ViewBuilders

607
00:25:39,010 --> 00:25:41,480
is probably the number one way

608
00:25:41,480 --> 00:25:43,170
the Views are coming and going.

609
00:25:43,170 --> 00:25:46,630
So when you have
animations of the contents

610
00:25:46,630 --> 00:25:49,850
of some ViewBuilder thing like the ZStack,

611
00:25:49,850 --> 00:25:51,980
and it's got conditionals in there,

612
00:25:51,980 --> 00:25:53,170
you wanna think about transitions,

613
00:25:53,170 --> 00:25:54,996
because those things are
gonna be coming and going

614
00:25:54,996 --> 00:25:55,950
and if you don't think about it,

615
00:25:55,950 --> 00:25:57,370
you're gonna get fade-in and fade-out.

616
00:25:57,370 --> 00:25:59,820
That's the default, but
you might want something

617
00:25:59,820 --> 00:26:01,995
that looks a little better than that.

618
00:26:01,995 --> 00:26:06,107
Another way that Views
come and go is for example,

619
00:26:06,107 --> 00:26:07,310
in a ForEach.

620
00:26:07,310 --> 00:26:11,920
So ForEach takes an Array
of identifiable things,

621
00:26:11,920 --> 00:26:13,460
and makes Views for them.

622
00:26:13,460 --> 00:26:15,400
Well, if that Array changes,

623
00:26:15,400 --> 00:26:16,920
like new things got added to it,

624
00:26:16,920 --> 00:26:18,946
or some of the identifiers got pulled out,

625
00:26:18,946 --> 00:26:22,260
it's going to either add new
Views or take some of the Views

626
00:26:22,260 --> 00:26:24,270
it made in the past out of there.

627
00:26:24,270 --> 00:26:26,400
And those Views are gonna
be coming and going.

628
00:26:26,400 --> 00:26:28,020
You're gonna see this
definitely in your homework

629
00:26:28,020 --> 00:26:30,140
number three, you're gonna have your cards

630
00:26:30,140 --> 00:26:32,640
somehow displayed on
screen through some ForEach

631
00:26:32,640 --> 00:26:34,270
maybe inside grade or something.

632
00:26:34,270 --> 00:26:36,360
And it's a different game to the memorize

633
00:26:36,360 --> 00:26:39,290
the cards kind of come and
go in the game you're doing.

634
00:26:39,290 --> 00:26:41,880
Whereas memorize the cards are
just really always on screen,

635
00:26:41,880 --> 00:26:43,600
even when they're match
they're just hidden.

636
00:26:43,600 --> 00:26:45,840
There's kind of a space for them there,

637
00:26:45,840 --> 00:26:47,100
but wouldn't have to be that way.

638
00:26:47,100 --> 00:26:50,672
So those are probably number
one and number two ways that

639
00:26:50,672 --> 00:26:53,100
Views come and go: conditional
things inside ViewBuilders

640
00:26:53,100 --> 00:26:56,100
and things like ForEach that
are conditionally essentially

641
00:26:56,100 --> 00:26:58,750
building Views for you.

642
00:26:58,750 --> 00:27:00,330
All right, back to the screen code.

643
00:27:00,330 --> 00:27:01,560
So let's just walk through,

644
00:27:01,560 --> 00:27:04,960
if we change isFaceUp from
one thing to the other,

645
00:27:04,960 --> 00:27:05,910
what would happen?

646
00:27:05,910 --> 00:27:08,010
So if we change isFaceUp to false,

647
00:27:08,010 --> 00:27:09,600
in other words we wanna show the back,

648
00:27:09,600 --> 00:27:11,590
the back would instantly appear

649
00:27:11,590 --> 00:27:14,620
because we have said its
transition to be identity,

650
00:27:14,620 --> 00:27:17,620
which means don't do any modifications.

651
00:27:17,620 --> 00:27:18,600
So there's no animation

652
00:27:18,600 --> 00:27:20,930
so it just bloop instantly appears.

653
00:27:20,930 --> 00:27:23,610
The Text would shrink down to nothing,

654
00:27:23,610 --> 00:27:25,410
because it's using a scale transition,

655
00:27:25,410 --> 00:27:27,900
and the front RoundedRectangles
would fade out

656
00:27:27,900 --> 00:27:29,110
because they have no transition

657
00:27:29,110 --> 00:27:31,863
so they're getting the default opacity.

658
00:27:31,863 --> 00:27:33,970
And if isFaceUp changed
to true, by the way,

659
00:27:33,970 --> 00:27:36,020
the isFaceUp has to be changing here,

660
00:27:36,020 --> 00:27:38,573
while an explicit
animation is in progress.

661
00:27:38,573 --> 00:27:40,243
If we're not actually animating,

662
00:27:40,243 --> 00:27:42,430
then these transitions
mean nothing, right.

663
00:27:42,430 --> 00:27:44,670
These transitions don't do
the animation themselves

664
00:27:44,670 --> 00:27:47,390
they just specify what
ViewModifiers to use,

665
00:27:47,390 --> 00:27:49,420
when an animation is happening.

666
00:27:49,420 --> 00:27:52,775
So if isFaceUp changes from false to true,

667
00:27:52,775 --> 00:27:56,235
now the back would disappear
instantly just gone

668
00:27:56,235 --> 00:27:57,570
because again, its transition

669
00:27:57,570 --> 00:28:00,414
is the identity ViewModifier.

670
00:28:00,414 --> 00:28:03,190
So there's no difference between
the identity ViewModifier

671
00:28:03,190 --> 00:28:05,433
when it's there or not there. So it just,

672
00:28:05,433 --> 00:28:08,270
it's still going off screen
though, so it disappears.

673
00:28:08,270 --> 00:28:10,550
The Text would grow in from nothing

674
00:28:10,550 --> 00:28:13,810
would start at zero size and
grow up to its normal size.

675
00:28:13,810 --> 00:28:16,040
And the front
RoundedRectangles since again,

676
00:28:16,040 --> 00:28:18,380
no transition specified,
they would fade in.

677
00:28:18,380 --> 00:28:20,530
This would all be
happening simultaneously.

678
00:28:22,890 --> 00:28:25,750
Now one thing to consider
about transition,

679
00:28:25,750 --> 00:28:30,240
unlike animation, transition
does not get redistributed

680
00:28:30,240 --> 00:28:32,080
to a container's content Views.

681
00:28:32,080 --> 00:28:34,000
Remember, I told you
that we don't usually put

682
00:28:34,000 --> 00:28:36,510
implicit animations on container Views,

683
00:28:36,510 --> 00:28:38,980
because it just ends up
giving that animation

684
00:28:38,980 --> 00:28:40,410
to each of the things inside.

685
00:28:40,410 --> 00:28:42,320
Well, transition does not do that.

686
00:28:42,320 --> 00:28:46,190
Transition, when you put
it on a ZStack or a VStack

687
00:28:46,190 --> 00:28:48,120
it is now talking about the transition

688
00:28:48,120 --> 00:28:51,600
when the entire ZStack comes on screen

689
00:28:51,600 --> 00:28:53,070
or goes off screen.

690
00:28:53,070 --> 00:28:56,330
So it does not distribute it
off into its things inside.

691
00:28:56,330 --> 00:28:59,200
It's actually talking about the animation

692
00:28:59,200 --> 00:29:02,086
of the ZStack itself
when it comes and goes.

693
00:29:02,086 --> 00:29:05,060
Now Group and ForEach,
those are container Views

694
00:29:05,060 --> 00:29:07,840
but since they don't put
anything on screen anywhere,

695
00:29:07,840 --> 00:29:11,390
they're just essentially
grouping or creating Views

696
00:29:11,390 --> 00:29:13,910
from a list of Identifiables,

697
00:29:13,910 --> 00:29:16,510
they do distribute .transition
to their content View.

698
00:29:16,510 --> 00:29:18,880
So if you say group and a bunch of things,

699
00:29:18,880 --> 00:29:20,150
and you say .transition,

700
00:29:20,150 --> 00:29:22,770
it's going to be talking about
each one of those things,

701
00:29:22,770 --> 00:29:24,123
getting that transition.

702
00:29:26,060 --> 00:29:27,860
This .transition function,

703
00:29:27,860 --> 00:29:29,880
remember is doing nothing
more than the specifying

704
00:29:29,880 --> 00:29:32,680
what the two ViewModifiers are.

705
00:29:32,680 --> 00:29:35,770
Think of the word
transition there as a noun.

706
00:29:35,770 --> 00:29:38,900
This is the transitions to use.

707
00:29:38,900 --> 00:29:42,810
It's not a verb, like
this View transitions now,

708
00:29:42,810 --> 00:29:45,757
transitions only happen
when an explicit animation

709
00:29:45,757 --> 00:29:47,080
is going on.

710
00:29:47,080 --> 00:29:50,810
That is the only time that
transition animations happen.

711
00:29:50,810 --> 00:29:54,150
Transitions do not really
work with implicit animations.

712
00:29:54,150 --> 00:29:57,290
If you try to do implicit animations,

713
00:29:57,290 --> 00:29:58,673
on Views with transitions,

714
00:29:58,673 --> 00:30:00,360
it's gonna get a little confused

715
00:29:58,673 --> 00:30:00,360
it's gonna get a little confused

716
00:30:00,360 --> 00:30:04,050
and you can understand why this
is remember that, you know,

717
00:30:04,050 --> 00:30:06,180
explicit animations are for animations

718
00:30:06,180 --> 00:30:08,360
that are coordinating a
lot of different Views

719
00:30:08,360 --> 00:30:10,510
that when Views are coming and going.

720
00:30:10,510 --> 00:30:13,180
Implicit animations
are for self-contained,

721
00:30:13,180 --> 00:30:17,330
independent working Views, that
their animations make sense.

722
00:30:17,330 --> 00:30:20,190
That doesn't sound to me
like Views coming and going.

723
00:30:20,190 --> 00:30:22,770
Transitions are not intended to be used

724
00:30:22,770 --> 00:30:24,040
with implicit animations,

725
00:30:24,040 --> 00:30:27,220
they're to be used with
explicit animations.

726
00:30:27,220 --> 00:30:29,490
And that's the only time a
transition animation will happen

727
00:30:29,490 --> 00:30:32,480
is when you are animating it.

728
00:30:32,480 --> 00:30:35,250
Transitions are just saying
what ViewModifiers to use,

729
00:30:35,250 --> 00:30:36,930
you still have to animate.

730
00:30:36,930 --> 00:30:39,400
By the way, if you do
an implicit animation on

731
00:30:39,400 --> 00:30:42,760
something that has a transition
and the View comes or goes,

732
00:30:42,760 --> 00:30:45,300
it's gonna do some sort of animation,

733
00:30:45,300 --> 00:30:47,650
but it's probably not
gonna be what you expect.

734
00:30:48,840 --> 00:30:50,800
The transition API,

735
00:30:50,800 --> 00:30:53,130
you know, like creating
an actual transition

736
00:30:53,130 --> 00:30:55,070
is a little bit interesting.

737
00:30:55,070 --> 00:30:58,120
And it's type-erased.

738
00:30:58,120 --> 00:31:00,660
That means that the
actual type of transition,

739
00:31:00,660 --> 00:31:03,870
which the real type of a
transition is going to have

740
00:31:03,870 --> 00:31:06,940
don't cares is in there that
are the two ViewModifiers

741
00:31:06,940 --> 00:31:08,880
that you're using and all that.

742
00:31:08,880 --> 00:31:10,630
They can be quite complicated.

743
00:31:10,630 --> 00:31:13,960
And we're trying to pass them
as arguments to .transition

744
00:31:13,960 --> 00:31:16,130
we don't want that so
we want to be simple.

745
00:31:16,130 --> 00:31:19,290
The argument to the .transition function

746
00:31:19,290 --> 00:31:22,010
is something called an AnyTransition.

747
00:31:22,010 --> 00:31:24,820
And this AnyTransition is
a type-erased transition.

748
00:31:24,820 --> 00:31:27,213
Imagine, kind of like this,

749
00:31:27,213 --> 00:31:32,090
that AnyTransition is just a
struct that has an initializer

750
00:31:32,090 --> 00:31:35,040
that takes a don't care, kind of,

751
00:31:35,040 --> 00:31:38,550
which is a transition we had
modifiers and all that stuff.

752
00:31:38,550 --> 00:31:42,560
And it just knows how to do
the transition thing with it.

753
00:31:42,560 --> 00:31:45,030
And what you get back
is just an AnyTransition

754
00:31:45,030 --> 00:31:47,443
with no don't cares or
any of that business.

755
00:31:48,320 --> 00:31:52,160
So erasing types like this,
so we simplify and lose.

756
00:31:52,160 --> 00:31:52,993
We don't really lose it,

757
00:31:52,993 --> 00:31:55,296
but we can't see all the details

758
00:31:55,296 --> 00:31:57,665
like what kind of
ViewModifiers it's using,

759
00:31:57,665 --> 00:32:00,499
we do that in Swift on a number of cases,

760
00:32:00,499 --> 00:32:02,030
you can even do it with a View,

761
00:32:02,030 --> 00:32:04,690
there is a View called AnyView,

762
00:32:04,690 --> 00:32:06,940
and its initializer will
take any kind of View

763
00:32:06,940 --> 00:32:09,400
no matter how complicated
and return you AnyView

764
00:32:09,400 --> 00:32:11,310
and erase all that information,

765
00:32:11,310 --> 00:32:13,600
you'll now you'll have a
View it's called an AnyView,

766
00:32:13,600 --> 00:32:14,908
it's of type AnyView,

767
00:32:14,908 --> 00:32:17,240
you know nothing about what's inside

768
00:32:17,240 --> 00:32:19,421
or what's modified or none of that.

769
00:32:19,421 --> 00:32:21,060
If you didn't understand
what I'm saying there

770
00:32:21,060 --> 00:32:23,090
about type-erased, don't
worry about it too much

771
00:32:23,090 --> 00:32:25,050
we're gonna see it again
later in the quarter.

772
00:32:25,050 --> 00:32:26,890
But the important thing to realize is

773
00:32:26,890 --> 00:32:29,860
that AnyTransition is just a struct.

774
00:32:29,860 --> 00:32:32,860
It has some static vars on it
for the built in transitions

775
00:32:32,860 --> 00:32:36,330
like opacity, which animates the opacity,

776
00:32:36,330 --> 00:32:39,330
scale which animates the frame modifier

777
00:32:39,330 --> 00:32:42,550
to make the frame go
down to zero and back up.

778
00:32:42,550 --> 00:32:45,290
There's a really important
transition for your homework

779
00:32:45,290 --> 00:32:47,480
called offset CGSize,

780
00:32:47,480 --> 00:32:50,940
which causes a View to
move across the screen

781
00:32:50,940 --> 00:32:54,580
by some offset when it comes and goes.

782
00:32:54,580 --> 00:32:57,500
Alright, and in your
homework you're required

783
00:32:57,500 --> 00:32:59,810
to make your cards be dealt

784
00:32:59,810 --> 00:33:02,450
fly off from off the
screen to on the screen

785
00:33:02,450 --> 00:33:06,060
so you're gonna be wanting
to use this offset transition

786
00:33:06,060 --> 00:33:07,453
for those Views.

787
00:33:08,580 --> 00:33:11,600
And you can of course
create your own transition

788
00:33:11,600 --> 00:33:14,590
by just specifying the two ViewModifiers.

789
00:33:14,590 --> 00:33:18,370
The modifier to use when
things are on screen

790
00:33:18,370 --> 00:33:21,920
and to use when it's not, right, so

791
00:33:21,920 --> 00:33:25,523
identity is when it's on and
active there is when it's not.

792
00:33:27,610 --> 00:33:30,180
You can also override
the animation that's used

793
00:33:30,180 --> 00:33:32,700
for a transition if you
always want a transition

794
00:33:32,700 --> 00:33:35,400
to be really fast, for
example, or really slow.

795
00:33:35,400 --> 00:33:37,320
You can use this .animation

796
00:33:37,320 --> 00:33:40,300
that you attach to the transition, okay,

797
00:33:40,300 --> 00:33:42,870
you know, attach it like a .animation.

798
00:33:42,870 --> 00:33:44,950
Don't get confused by this little thing

799
00:33:44,950 --> 00:33:46,650
this is not implicit animation,

800
00:33:46,650 --> 00:33:49,640
implicit animation transitions,
they don't go together.

801
00:33:49,640 --> 00:33:54,150
This is just a way to
override the duration

802
00:33:54,150 --> 00:33:57,080
and curve and all that
of a transition animation

803
00:33:57,080 --> 00:33:58,763
so that always does it this way.

804
00:34:01,150 --> 00:34:05,840
Transitions can be thorny,
and a little bit frustrating

805
00:34:05,840 --> 00:34:07,720
sometimes when you're first using them,

806
00:34:07,720 --> 00:34:11,110
because of this restriction
that the container

807
00:34:11,110 --> 00:34:13,437
that has the View has
to already be on screen.

808
00:34:13,437 --> 00:34:16,598
So for example, in your
homework assignment three,

809
00:34:16,598 --> 00:34:21,350
you are required to have the
cards deal out in animated

810
00:34:21,350 --> 00:34:24,061
fashion onto the screen. It
can't be like Memorize where

811
00:34:24,061 --> 00:34:26,010
Memorize launches and oh,

812
00:34:26,010 --> 00:34:27,730
there's the cards already on-screen.

813
00:34:27,730 --> 00:34:31,315
No, has to launch just momentarily blank

814
00:34:31,315 --> 00:34:34,375
and then the cards fly
and automatic, you know,

815
00:34:34,375 --> 00:34:37,163
kind of a deal animation
to come on the screen.

816
00:34:38,120 --> 00:34:40,940
How do you get out of this conundrum of

817
00:34:41,830 --> 00:34:44,905
a View that contains the cards
has to come on screen first

818
00:34:44,905 --> 00:34:46,297
and then once it's on-screen,

819
00:34:46,297 --> 00:34:51,221
then you can do something that
causes the cards to happen.

820
00:34:51,221 --> 00:34:55,700
There's a great function in
View for helping with this

821
00:34:55,700 --> 00:34:58,610
is called onAppear, very simple.

822
00:34:58,610 --> 00:35:00,367
It's kind of like onTapGesture, right,

823
00:35:00,367 --> 00:35:05,170
onTapGesture, when a tap
happens, it calls this closure,

824
00:35:05,170 --> 00:35:08,520
executes some code, this
is kind of the same,

825
00:35:08,520 --> 00:35:13,170
when a View appears on screen,
then it calls this code.

826
00:35:13,170 --> 00:35:15,265
So we're gonna use this
nice little feature

827
00:35:15,265 --> 00:35:17,904
on our container View.

828
00:35:17,904 --> 00:35:20,665
On our container View,
we're gonna add onAppear

829
00:35:20,665 --> 00:35:23,471
and in that code, we're going to change

830
00:35:23,471 --> 00:35:26,538
something in our Model,
probably, that makes it

831
00:35:26,538 --> 00:35:29,720
so those cards which weren't there,

832
00:35:29,720 --> 00:35:31,710
when my container View first appeared,

833
00:35:31,710 --> 00:35:32,979
something about them changed

834
00:35:32,979 --> 00:35:35,310
now they need to be there.

835
00:35:35,310 --> 00:35:37,410
Now they'll get animated coming on screen.

836
00:35:38,308 --> 00:35:41,629
We're using the fact that
we know you know onAppear

837
00:35:41,629 --> 00:35:43,559
that our container View
is finally on screen

838
00:35:43,559 --> 00:35:48,036
to go ahead and do some Intent
to the Model that says, okay,

839
00:35:48,036 --> 00:35:50,410
you can deal the Cards now.

840
00:35:50,410 --> 00:35:52,275
So the Model has to change
in some way where the Cards

841
00:35:52,275 --> 00:35:56,665
now are suddenly being
thrown out into the View,

842
00:35:56,665 --> 00:35:59,780
cause the View is just
reflecting what's in the Model.

843
00:35:59,780 --> 00:36:01,212
So if the Model says that cards are there,

844
00:36:01,212 --> 00:36:03,723
when the app launches,
they're gonna be there.

845
00:36:03,723 --> 00:36:06,560
So the Cards have to not be
there when the app launches,

846
00:36:06,560 --> 00:36:08,914
and then after the onAppear
happens on the container,

847
00:36:08,914 --> 00:36:13,074
then something happens
where the Cards are there.

848
00:36:13,074 --> 00:36:16,475
So you've gotten the message,
I'm sure in all this,

849
00:36:16,475 --> 00:36:19,160
that the actual animations
are done by ViewModifiers

850
00:36:19,160 --> 00:36:20,540
and Shapes.

851
00:36:20,540 --> 00:36:23,622
They're the things that actually animate.

852
00:36:23,622 --> 00:36:26,540
How do they participate in
this whole animation system?

853
00:36:26,540 --> 00:36:29,673
ViewModifiers and Shapes,
how do they get animated?

854
00:36:29,673 --> 00:36:30,680
Well, essentially,

855
00:36:30,680 --> 00:36:33,770
the animation system
divides up the duration

856
00:36:33,770 --> 00:36:36,170
of the animation into little tiny pieces,

857
00:36:36,170 --> 00:36:37,610
depending on the curve.

858
00:36:37,610 --> 00:36:40,920
And then it just asks all
the shapes and ViewModifiers

859
00:36:40,920 --> 00:36:41,980
that are Animatable,

860
00:36:41,980 --> 00:36:44,350
here, draw this piece, draw
this, draw this piece, right,

861
00:36:44,350 --> 00:36:45,680
it's just drawing them
over and over and over

862
00:36:45,680 --> 00:36:48,800
and then piecing it together
into like a little movie,

863
00:36:48,800 --> 00:36:50,732
which is the animation.

864
00:36:50,732 --> 00:36:51,579
That's it.

865
00:36:51,579 --> 00:36:53,135
That's how this thing works

866
00:36:53,135 --> 00:36:57,743
it's incredibly elegant and
simple, to make it work.

867
00:36:58,660 --> 00:37:01,190
The communication between
the animation system

868
00:37:01,190 --> 00:37:05,540
and ViewModifiers and Shapes
is just one single var,

869
00:37:05,540 --> 00:37:08,230
this var animatableData.

870
00:37:08,230 --> 00:37:11,290
This animatableData is in
the Animatable protocol,

871
00:37:11,290 --> 00:37:13,350
it's the only var in there.

872
00:37:13,350 --> 00:37:16,410
And all you have to do is implement this.

873
00:37:16,410 --> 00:37:18,930
And if you're a Shape or a ViewModifier,

874
00:37:18,930 --> 00:37:22,653
you can participate in this
little piecewise animation.

875
00:37:23,540 --> 00:37:26,950
The type of animatableData
is a don't care.

876
00:37:26,950 --> 00:37:28,530
Actually, it's a care a little bit

877
00:37:28,530 --> 00:37:31,097
because that type has to
implement the protocol

878
00:37:31,097 --> 00:37:33,670
VectorArithmetic, which makes sense

879
00:37:33,670 --> 00:37:36,125
because we're gonna be
taking this animatableData,

880
00:37:36,125 --> 00:37:38,785
whatever it is maybe the
rotation of the angles

881
00:37:38,785 --> 00:37:42,540
of the Pie thing or, you
know, something like that

882
00:37:42,540 --> 00:37:43,910
we're gonna be cutting
up into little pieces

883
00:37:43,910 --> 00:37:45,890
so we have to be able
to do some math on it

884
00:37:45,890 --> 00:37:49,983
to cut it up into pieces
using that nice curve.

885
00:37:49,983 --> 00:37:52,940
So type is almost always a Float,

886
00:37:52,940 --> 00:37:55,529
either a Float or a Double
or a CGFloat lots of the time

887
00:37:55,529 --> 00:37:58,490
because we're doing a lot
of drawing going on here.

888
00:37:58,490 --> 00:38:01,004
But there's another struct that
implements VectorArithmetic

889
00:38:01,004 --> 00:38:04,270
called AnimatablePair that's really cool.

890
00:38:04,270 --> 00:38:08,654
It combines two
VectorArithmetic things into one

891
00:38:08,654 --> 00:38:10,670
Animatable VectorArithmetic thing.

892
00:38:10,670 --> 00:38:12,370
And of course, you can
have AnimatablePairs

893
00:38:12,370 --> 00:38:13,800
of AnimatablePairs.

894
00:38:13,800 --> 00:38:16,615
So you can have any number
of Animatable things.

895
00:38:16,615 --> 00:38:19,870
Also, if you had your own
complicated structure,

896
00:38:19,870 --> 00:38:22,620
that encapsulated animation data,

897
00:38:22,620 --> 00:38:24,873
you could make it
implement VectorArithmetic,

898
00:38:24,873 --> 00:38:26,104
that's just a protocol.

899
00:38:26,104 --> 00:38:28,790
And it could be directly animated.

900
00:38:28,790 --> 00:38:31,670
animatableData just has to be something

901
00:38:31,670 --> 00:38:34,070
that can be sliced up into little pieces.

902
00:38:34,070 --> 00:38:36,677
So it has to implement VectorArithmetic.

903
00:38:36,677 --> 00:38:39,720
This var, as I said, is
communicating both ways

904
00:38:39,720 --> 00:38:40,930
between the animation system

905
00:38:40,930 --> 00:38:43,170
and the Shapes and ViewModifiers.

906
00:38:43,170 --> 00:38:44,623
So the setting of this var,

907
00:38:44,623 --> 00:38:46,248
that's the animation system saying,

908
00:38:46,248 --> 00:38:47,627
here's a little piece, draw it,

909
00:38:47,627 --> 00:38:49,300
here's a little piece, draw it,

910
00:38:49,300 --> 00:38:53,115
So it's just basically
saying where in the curve,

911
00:38:53,115 --> 00:38:56,030
that your a little piece
of animatable data is

912
00:38:56,030 --> 00:38:57,780
during this animation.

913
00:38:57,780 --> 00:38:59,699
Now the getting of the
var also matters for the

914
00:38:59,699 --> 00:39:02,803
animation system to know the
start and end of animation.

915
00:39:04,908 --> 00:39:07,930
Now, this animatableData by the way,

916
00:39:07,930 --> 00:39:10,774
is usually a computed var
not because it has to be

917
00:39:10,774 --> 00:39:12,402
it definitely doesn't have to be.

918
00:39:12,402 --> 00:39:16,600
It's just that in our
code like in our Pie,

919
00:39:16,600 --> 00:39:19,693
or you know, our Cardify ViewModifier,

920
00:39:19,693 --> 00:39:22,950
which we're gonna modify so
that the card flips over,

921
00:39:22,950 --> 00:39:23,783
it's rotated.

922
00:39:23,783 --> 00:39:25,874
So in there, I really
want to call the rotation

923
00:39:25,874 --> 00:39:27,864
of my flipping card "rotation",

924
00:39:27,864 --> 00:39:29,745
I don't wanna call it animatableData,

925
00:39:29,745 --> 00:39:31,666
it's not very good name for a var.

926
00:39:31,666 --> 00:39:33,804
So a lot of times we're
gonna create a computed var

927
00:39:33,804 --> 00:39:38,085
just to essentially
rename some internal var

928
00:39:38,085 --> 00:39:40,343
so that the animation system can see it.

929
00:39:41,465 --> 00:39:43,555
So let's get right to that demo.

930
00:39:43,555 --> 00:39:46,524
We're gonna be doing so
many animation things here.

931
00:39:46,524 --> 00:39:49,700
We are gonna do implicit animation,

932
00:39:49,700 --> 00:39:51,004
but obviously doing explicit animation,

933
00:39:51,004 --> 00:39:52,704
we're gonna do transitions

934
00:39:52,704 --> 00:39:55,410
we're gonna make a
ViewModifier be modified,

935
00:39:55,410 --> 00:39:58,540
we're gonna make a Shape be
modified, all that stuff,

936
00:39:58,540 --> 00:40:00,265
and it's a big, long demo.

937
00:39:58,540 --> 00:40:00,265
and it's a big, long demo.

938
00:40:00,265 --> 00:40:02,583
So let's dive into it right now.

939
00:40:04,170 --> 00:40:05,960
Let's start our animation demo here

940
00:40:05,960 --> 00:40:08,185
with some implicit animation.

941
00:40:08,185 --> 00:40:10,104
Again, this is an animation
where we're going to

942
00:40:10,104 --> 00:40:12,697
have some very self-contained animation

943
00:40:12,697 --> 00:40:15,525
that always gonna apply no matter what.

944
00:40:15,525 --> 00:40:19,484
And it's not really coordinated
with a lot of other activity

945
00:40:19,484 --> 00:40:21,590
going on in the animation system.

946
00:40:21,590 --> 00:40:25,872
What are we gonna do for
this is to have our emojis

947
00:40:25,872 --> 00:40:27,651
be really excited and celebrate

948
00:40:27,651 --> 00:40:31,604
when they get a match
by doing a somersault.

949
00:40:31,604 --> 00:40:35,374
So a somersault is
essentially rotating the

950
00:40:35,374 --> 00:40:37,070
emoji around.

951
00:40:37,070 --> 00:40:39,280
And rotation is really easy to do

952
00:40:39,280 --> 00:40:41,751
in SwiftUI, there is a ViewModifier

953
00:40:41,751 --> 00:40:44,060
for it called rotation effects.

954
00:40:44,060 --> 00:40:47,807
So I'm gonna go down here
to my Text, here's my emoji,

955
00:40:47,807 --> 00:40:52,256
and I'm just gonna add a rotation effect

956
00:40:52,256 --> 00:40:53,370
on it.

957
00:40:53,370 --> 00:40:56,940
and it takes an Angle so
I'm gonna do Angle degrees.

958
00:40:56,940 --> 00:40:59,268
We learned about that when we did our Pie.

959
00:40:59,268 --> 00:41:01,423
I'm gonna say it if the Card isMatched,

960
00:41:01,423 --> 00:41:05,032
then let's start by just
having it go upside down,

961
00:41:05,032 --> 00:41:08,071
which is a 180 degree rotation,

962
00:41:08,071 --> 00:41:10,163
we'll eventually have
to do a full somersault

963
00:41:10,163 --> 00:41:11,570
all the way around

964
00:41:12,550 --> 00:41:13,383
and run.

965
00:41:17,800 --> 00:41:19,700
Click on a card, we're
looking for a match.

966
00:41:19,700 --> 00:41:21,783
Oh, there it is, and it went upside down

967
00:41:21,783 --> 00:41:25,132
but it didn't do any
kind of animation there.

968
00:41:25,132 --> 00:41:26,753
It's just as soon as it matched bloop,

969
00:41:26,753 --> 00:41:28,115
they went upside down.

970
00:41:28,115 --> 00:41:30,585
So how do we animate this?

971
00:41:30,585 --> 00:41:33,502
Well, assuming that I always
wanted to do a somersault

972
00:41:33,502 --> 00:41:34,786
when a card matches,

973
00:41:34,786 --> 00:41:36,905
all I need to do is an
implicit animation here

974
00:41:36,905 --> 00:41:39,283
and say .animation.

975
00:41:40,280 --> 00:41:43,840
And I just specify the
parameters of the animation.

976
00:41:43,840 --> 00:41:48,060
So I'm gonna have this
animation be a linear one

977
00:41:48,060 --> 00:41:52,300
and we'll have it be a duration
of, let's say, one second.

978
00:41:52,300 --> 00:41:55,690
This Animation object right
here we talked about in lecture,

979
00:41:55,690 --> 00:41:57,910
it's the kind of thing you
definitely would want to

980
00:41:57,910 --> 00:42:01,195
look over in the developer
documentation right here,

981
00:42:01,195 --> 00:42:03,695
we can see all the
different kinds of animation

982
00:42:03,695 --> 00:42:07,336
easeIn, easeInOut, linear
and all these other things.

983
00:42:07,336 --> 00:42:09,737
I said we could do: delay animations,

984
00:42:09,737 --> 00:42:13,147
obviously create them
with certain durations.

985
00:42:13,147 --> 00:42:15,740
Here's all the springs
lots and lots to learn

986
00:42:15,740 --> 00:42:17,587
there about animations.

987
00:42:17,587 --> 00:42:20,320
And we'll be doing quite
a few of them today.

988
00:42:20,320 --> 00:42:23,020
So let's try this and
see if this just works.

989
00:42:23,020 --> 00:42:26,117
Will this now make that
happen over one second,

990
00:42:26,117 --> 00:42:28,869
and here's one and oh, wow,

991
00:42:28,869 --> 00:42:32,754
well one of them animated
here, not both of them.

992
00:42:32,754 --> 00:42:33,923
Let's try another one.

993
00:42:33,923 --> 00:42:37,203
But again, it is doing that
animation over a second

994
00:42:37,203 --> 00:42:40,630
to do that, but it's not
doing this other one.

995
00:42:40,630 --> 00:42:44,043
Now, the fact that it's only
doing one of these is really,

996
00:42:44,043 --> 00:42:45,488
there's a good reason for that

997
00:42:45,488 --> 00:42:47,348
and we're gonna cover
that a little bit later.

998
00:42:47,348 --> 00:42:49,279
For now let's just make
sure the one that is working

999
00:42:49,279 --> 00:42:50,607
is doing what we want.

1000
00:42:50,607 --> 00:42:55,030
Let's have it go to let's say, 360

1001
00:42:55,030 --> 00:42:56,213
so all the way around.

1002
00:43:01,660 --> 00:43:03,560
We're trying to find a
matching pair there it is,

1003
00:43:03,560 --> 00:43:05,184
whoo, it's somersault all the way around.

1004
00:43:05,184 --> 00:43:06,640
How about these guys?

1005
00:43:06,640 --> 00:43:11,110
Whoo and maybe once it's
matched, we are so excited

1006
00:43:11,110 --> 00:43:13,620
we just want to keep going or
somersaults and somersaults.

1007
00:43:13,620 --> 00:43:15,439
Let's take this animation
that we have here,

1008
00:43:15,439 --> 00:43:19,543
this linear animation, and
let's have it repeatForever.

1009
00:43:23,250 --> 00:43:24,278
So it's doing the same animation

1010
00:43:24,278 --> 00:43:26,476
it's just now it's gonna keep going.

1011
00:43:26,476 --> 00:43:29,030
Now the thing is, notice
that it does do it

1012
00:43:29,030 --> 00:43:30,430
but then it kinda reverses itself

1013
00:43:30,430 --> 00:43:32,535
and then it does it again
and reverses itself.

1014
00:43:32,535 --> 00:43:33,870
This is really not what we want

1015
00:43:33,870 --> 00:43:35,121
we want to go around and around.

1016
00:43:35,121 --> 00:43:39,990
Luckily, repeatForever has
a an argument to it here,

1017
00:43:39,990 --> 00:43:43,740
which is autoreverses and
we'll say autoreverses false,

1018
00:43:43,740 --> 00:43:45,050
we don't want it to reverse

1019
00:43:45,050 --> 00:43:47,987
we just want to keep repeating
that animation over and over.

1020
00:43:47,987 --> 00:43:49,745
And that's because this animation returns

1021
00:43:49,745 --> 00:43:51,305
to where it started so it makes sense

1022
00:43:51,305 --> 00:43:54,302
to keep doing it over and over.

1023
00:43:54,302 --> 00:43:55,985
The only thing about this animation

1024
00:43:55,985 --> 00:43:59,068
that want to be a little
careful here about is

1025
00:44:00,741 --> 00:44:02,110
eventually we're gonna add a new game

1026
00:44:02,110 --> 00:44:03,480
that you did in your homework

1027
00:44:03,480 --> 00:44:06,740
and when we do that
these Views get reused.

1028
00:44:06,740 --> 00:44:08,810
And we don't want this
animation to be starting off

1029
00:44:08,810 --> 00:44:09,643
in a new game.

1030
00:44:09,643 --> 00:44:13,567
So essentially, whenever
the Card is not matched,

1031
00:44:13,567 --> 00:44:17,300
we do not want to be
doing this repeat forever.

1032
00:44:17,300 --> 00:44:18,857
So anytime you do a
repeat forever animation,

1033
00:44:18,857 --> 00:44:20,893
you wanna be careful to turn it off

1034
00:44:20,893 --> 00:44:22,724
when it doesn't apply anymore.

1035
00:44:22,724 --> 00:44:27,052
You can do that right here
just by saying card is matched.

1036
00:44:27,052 --> 00:44:29,562
We'll do this nice repeating forever.

1037
00:44:29,562 --> 00:44:31,690
But otherwise, we're gonna go back doing

1038
00:44:31,690 --> 00:44:34,070
whatever the default animation is.

1039
00:44:34,070 --> 00:44:37,893
That's kind of like don't
do this animation anymore.

1040
00:44:38,861 --> 00:44:41,229
Make sure that didn't break anything.

1041
00:44:41,229 --> 00:44:42,259
We go we got a match.

1042
00:44:42,259 --> 00:44:44,279
Whoo, it's working

1043
00:44:44,279 --> 00:44:45,623
it's working.

1044
00:44:48,440 --> 00:44:50,860
Now we've done this implicit animation.

1045
00:44:50,860 --> 00:44:54,308
Let's move on to doing
an explicit animation.

1046
00:44:54,308 --> 00:44:56,798
Before I do the explicit animation,

1047
00:44:56,798 --> 00:45:00,030
I'm going to implement
some of what you did

1048
00:45:00,030 --> 00:45:01,514
in your homework specifically,

1049
00:45:01,514 --> 00:45:04,224
I'm going to implement shuffling Cards

1050
00:45:04,224 --> 00:45:07,490
and also I'm gonna implement new game.

1051
00:45:07,490 --> 00:45:08,323
So shuffling Cards,

1052
00:45:08,323 --> 00:45:10,993
that's an easy one going
over to our Model over here

1053
00:45:10,993 --> 00:45:13,453
and when we create our Cards,

1054
00:45:13,453 --> 00:45:16,293
I'm just gonna say cards.shuffle.

1055
00:45:17,270 --> 00:45:19,527
Obviously, if you haven't
done homework one,

1056
00:45:19,527 --> 00:45:22,440
hopefully you're not watching this video.

1057
00:45:22,440 --> 00:45:25,420
But next I'm gonna do the new game thing

1058
00:45:25,420 --> 00:45:28,760
where we have new games
and that's in homework two.

1059
00:45:28,760 --> 00:45:30,040
Hopefully you've done homework two,

1060
00:45:30,040 --> 00:45:31,705
it was due before this lecture.

1061
00:45:31,705 --> 00:45:33,760
But if you haven't finished homework two,

1062
00:45:33,760 --> 00:45:36,350
now's the time to pause this video,

1063
00:45:36,350 --> 00:45:39,175
go submit your assignment
two and then come back

1064
00:45:39,175 --> 00:45:41,673
and resume watching this.

1065
00:45:41,673 --> 00:45:45,945
So cards.shuffle, that should
fix that nice one liner.

1066
00:45:45,945 --> 00:45:49,233
Whoo, it's shuffled now these two things

1067
00:45:49,233 --> 00:45:50,850
are right next to each other.

1068
00:45:50,850 --> 00:45:54,213
All right, well, we can still match them.

1069
00:45:54,213 --> 00:45:56,640
Alright, how about new game,

1070
00:45:56,640 --> 00:46:01,640
new game requires us to have
an Intent in our ViewModel,

1071
00:46:01,863 --> 00:46:03,902
just like we have the
Intent to choose a Card,

1072
00:46:03,902 --> 00:46:07,105
we're gonna need an Intent
to create a new game.

1073
00:46:07,105 --> 00:46:10,020
So I'm gonna call this resetGame

1074
00:46:10,020 --> 00:46:13,270
and I'm gonna reset the game
just by creating a new Model

1075
00:46:13,270 --> 00:46:16,483
I'm gonna say Model =
EmojiMemoryGame.createMemoryGame

1076
00:46:20,648 --> 00:46:22,748
to create new memory game,

1077
00:46:22,748 --> 00:46:24,106
and that's all I need to do.

1078
00:46:24,106 --> 00:46:25,943
This is clearly gonna change the Model

1079
00:46:25,943 --> 00:46:28,793
that's going to cause
this ObservableObject

1080
00:46:28,793 --> 00:46:30,840
because this Model is @Published,

1081
00:46:30,840 --> 00:46:34,388
all this is gonna happen and
our whole View is gonna redraw

1082
00:46:34,388 --> 00:46:36,291
because of that change.

1083
00:46:36,291 --> 00:46:39,479
So now I need a button
somewhere in my UI, right?

1084
00:46:39,479 --> 00:46:41,964
In my UI, I don't really
have a new game button,

1085
00:46:41,964 --> 00:46:44,337
I can't cause a new game to appear.

1086
00:46:44,337 --> 00:46:48,550
So I'm gonna add a new button
at the bottom very simple way.

1087
00:46:48,550 --> 00:46:50,863
I'm just gonna have my grid of Cards here

1088
00:46:50,863 --> 00:46:53,591
in a VStack

1089
00:46:53,591 --> 00:46:55,470
with

1090
00:46:55,470 --> 00:46:56,900
a Button.

1091
00:46:56,900 --> 00:46:58,230
We didn't talk about Button

1092
00:46:58,230 --> 00:47:00,910
and I didn't expect you in
your homework number two,

1093
00:47:00,910 --> 00:47:03,443
to necessarily do a Button,

1094
00:47:03,443 --> 00:47:05,910
you could easily have just done a Text

1095
00:47:05,910 --> 00:47:09,244
with onTapGesture there,
that would have been fine.

1096
00:47:09,244 --> 00:47:10,840
But while we're here, let's go ahead

1097
00:47:10,840 --> 00:47:12,480
and learn a little bit about Button.

1098
00:47:12,480 --> 00:47:13,313
Button is very simple

1099
00:47:13,313 --> 00:47:16,640
it just has an action, which
is some closure to execute

1100
00:47:16,640 --> 00:47:17,800
when the Button gets pressed.

1101
00:47:17,800 --> 00:47:19,223
And then it has this label,

1102
00:47:19,223 --> 00:47:22,940
which is essentially any View
you want to be the label.

1103
00:47:22,940 --> 00:47:26,120
So I'm gonna have the label here be a Text

1104
00:47:26,120 --> 00:47:28,732
that says "New Game".

1105
00:47:28,732 --> 00:47:31,940
And in terms of what I'm
gonna do in this action,

1106
00:47:31,940 --> 00:47:33,770
let's double click there.

1107
00:47:33,770 --> 00:47:37,999
I'm gonna do that Intent
that I just talked about.

1108
00:47:37,999 --> 00:47:40,757
So self.viewModel.resetgame.

1109
00:47:42,015 --> 00:47:44,523
Usually, when something happens in the UI,

1110
00:47:44,523 --> 00:47:47,801
like we tap on a Card,
or a Button is clicked,

1111
00:47:47,801 --> 00:47:49,420
we're gonna be doing

1112
00:47:49,420 --> 00:47:50,590
either Intents

1113
00:47:50,590 --> 00:47:53,080
or we're gonna be do some
doing something that totally

1114
00:47:53,080 --> 00:47:56,004
only affects the UI, just
adjust the UI in some way

1115
00:47:56,004 --> 00:47:58,720
it doesn't really affect
what's in our Model.

1116
00:47:58,720 --> 00:48:00,339
Let's see if our new game Button works.

1117
00:48:00,339 --> 00:48:04,259
We click here run, well, there
is our new game down there

1118
00:48:04,259 --> 00:48:05,840
and we click.

1119
00:48:05,840 --> 00:48:06,950
Let's see if it's doing anything.

1120
00:48:06,950 --> 00:48:08,537
We've got this there and new game.

1121
00:48:08,537 --> 00:48:12,817
Whoo, yeah, it did reshuffle
them put new cards out there.

1122
00:48:12,817 --> 00:48:14,553
All right let's see if some cards match

1123
00:48:14,553 --> 00:48:16,013
then it puts them back.

1124
00:48:16,013 --> 00:48:18,007
So our new game Button is working.

1125
00:48:18,007 --> 00:48:21,380
By the way, what is the difference
between using Button here

1126
00:48:21,380 --> 00:48:23,745
and Text with onTapGesture?

1127
00:48:23,745 --> 00:48:28,127
Well Button is powerful, it
knows that it's a Button.

1128
00:48:28,127 --> 00:48:30,480
So as it appears on different platforms,

1129
00:48:30,480 --> 00:48:32,668
maybe Apple TV or Apple watch or whatever,

1130
00:48:32,668 --> 00:48:34,890
it's gonna draw this Button in a way

1131
00:48:34,890 --> 00:48:36,657
that makes sense on that platform.

1132
00:48:36,657 --> 00:48:38,627
Whereas we do Text with onTapGesture,

1133
00:48:38,627 --> 00:48:40,604
it's always gonna just
look like a piece of text

1134
00:48:40,604 --> 00:48:41,765
that we tap on.

1135
00:48:41,765 --> 00:48:44,788
So we would always want
to use a Button for reals

1136
00:48:44,788 --> 00:48:46,250
when we are doing a Button.

1137
00:48:46,250 --> 00:48:49,429
We don't want to do a Text
onTapGesture solution.

1138
00:48:49,429 --> 00:48:51,679
One other thing I want to
mention, while we're here

1139
00:48:51,679 --> 00:48:55,050
is this red "New Game" String.

1140
00:48:55,050 --> 00:48:57,010
These Strings are red
and I'm glad they're red.

1141
00:48:57,010 --> 00:49:00,110
Red usually means I look
I'll watch out and indeed

1142
00:49:00,110 --> 00:49:02,219
you do want to watch out
when you have red Strings,

1143
00:49:02,219 --> 00:49:04,445
if you have red Strings
that are gonna appear

1144
00:49:04,445 --> 00:49:07,640
in front of the user, you need
to do a little bit of work,

1145
00:49:07,640 --> 00:49:08,625
which we're not gonna cover now

1146
00:49:08,625 --> 00:49:10,785
to make these internationalizable.

1147
00:49:10,785 --> 00:49:12,866
So that you can have this say,

1148
00:49:12,866 --> 00:49:16,155
new game in French, or Chinese or Arabic

1149
00:49:16,155 --> 00:49:18,975
or whatever that has to be
something that can be fixed.

1150
00:49:18,975 --> 00:49:21,810
And so we're not gonna talk about that,

1151
00:49:21,810 --> 00:49:23,630
if you're interested in that stuff,

1152
00:49:23,630 --> 00:49:25,191
maybe starting the
documentation by looking

1153
00:49:25,191 --> 00:49:28,640
at something called localizedString key.

1154
00:49:28,640 --> 00:49:30,223
That's a way to at least get your Strings

1155
00:49:30,223 --> 00:49:32,120
starting to be localized.

1156
00:49:32,120 --> 00:49:34,119
There's other things that
need to be localized as well

1157
00:49:34,119 --> 00:49:37,292
like dates and things like
that, dates appear differently.

1158
00:49:37,292 --> 00:49:38,931
And again, we don't have
time to talk about that.

1159
00:49:38,931 --> 00:49:40,351
We're talking about animation today.

1160
00:49:40,351 --> 00:49:42,900
I just want to give you a
heads up that that is a thing,

1161
00:49:42,900 --> 00:49:45,529
where we eventually are
gonna have to be careful

1162
00:49:45,529 --> 00:49:47,683
about the Strings we put in here.

1163
00:49:49,200 --> 00:49:51,020
All right, new game worked

1164
00:49:51,020 --> 00:49:55,060
but as we saw over here,
it did not animate right,

1165
00:49:55,060 --> 00:49:57,520
do this and whoo, it
just immediately changed.

1166
00:49:57,520 --> 00:49:58,353
There's no animation.

1167
00:49:58,353 --> 00:50:01,145
So we would like this
whole thing to be animated,

1168
00:49:58,353 --> 00:50:01,145
So we would like this
whole thing to be animated,

1169
00:50:01,145 --> 00:50:03,595
that turns out to be really easy to do

1170
00:50:03,595 --> 00:50:05,076
using an explicit animation,

1171
00:50:05,076 --> 00:50:09,270
we're just gonna wrap this reset
game which had a big effect

1172
00:50:09,270 --> 00:50:10,993
on our Model and changed all our Cards.

1173
00:50:10,993 --> 00:50:13,960
Well, all those changes, we can animate

1174
00:50:13,960 --> 00:50:17,170
with one simple line of
code here withAnimation.

1175
00:50:17,170 --> 00:50:19,076
And just like when we
did implicit animation,

1176
00:50:19,076 --> 00:50:22,330
we're gonna specify the Animation we want.

1177
00:50:22,330 --> 00:50:25,295
I'm gonna use easeInOut.
notice I didn't type

1178
00:50:25,295 --> 00:50:30,295
the full Animation dot easeInOut,
Swift we can infer that

1179
00:50:30,717 --> 00:50:34,704
that's the obvious argument
to withAnimation here.

1180
00:50:34,704 --> 00:50:38,200
And then it takes a closure,
which takes no arguments,

1181
00:50:38,200 --> 00:50:39,033
return no arguments,

1182
00:50:39,033 --> 00:50:40,707
and you can put whatever
code you want in here.

1183
00:50:40,707 --> 00:50:44,063
And whatever this does to
our UI, whatever it is,

1184
00:50:44,063 --> 00:50:45,940
it's gonna get animated.

1185
00:50:45,940 --> 00:50:47,940
Let's see what it looks like to do that.

1186
00:50:51,640 --> 00:50:54,567
Whoo, oh my, it actually did a whole bunch

1187
00:50:54,567 --> 00:50:58,070
of animation there, nice.

1188
00:50:58,070 --> 00:51:00,290
Now if we want to see
exactly what's going on here

1189
00:51:00,290 --> 00:51:02,420
because there's some other
stuff going on there too

1190
00:51:02,420 --> 00:51:04,340
some fading going on,

1191
00:51:04,340 --> 00:51:08,200
we can change the duration
by having an easeInOut

1192
00:51:08,200 --> 00:51:11,200
Animation of a duration, let's say,

1193
00:51:11,200 --> 00:51:13,420
two or three seconds.

1194
00:51:13,420 --> 00:51:14,695
I'll slow that animation way down,

1195
00:51:14,695 --> 00:51:16,630
which is something I
always recommend doing

1196
00:51:16,630 --> 00:51:19,183
when you're doing animation
is to slow things down

1197
00:51:19,183 --> 00:51:20,500
and see what's going on.

1198
00:51:20,500 --> 00:51:22,743
So here we go, let's try a new game.

1199
00:51:23,790 --> 00:51:27,396
Okay, see the cards fade
out, back to being face-down,

1200
00:51:27,396 --> 00:51:30,511
and they move to their new position.

1201
00:51:30,511 --> 00:51:33,361
That's what's happening
here that is the animation.

1202
00:51:33,361 --> 00:51:35,350
So why is that happening?

1203
00:51:35,350 --> 00:51:36,260
That these things are fading out,

1204
00:51:36,260 --> 00:51:41,260
that ghost, see he fades
out, back to his card back?

1205
00:51:41,540 --> 00:51:42,373
Well, that's because I told you

1206
00:51:42,373 --> 00:51:45,000
that transition

1207
00:51:45,000 --> 00:51:46,860
is by default

1208
00:51:46,860 --> 00:51:48,150
opacity.

1209
00:51:48,150 --> 00:51:49,936
And what's happening
there when we switch that

1210
00:51:49,936 --> 00:51:52,257
it's transitioning to a new View

1211
00:51:52,257 --> 00:51:54,860
and so we're just fading the new one in

1212
00:51:54,860 --> 00:51:56,750
and fading the old one out.

1213
00:51:56,750 --> 00:51:58,661
We don't really want
that, we want our cards

1214
00:51:58,661 --> 00:52:00,830
actually to flip over when they go

1215
00:52:00,830 --> 00:52:03,460
from back to front and front to back,

1216
00:52:03,460 --> 00:52:05,720
we'll fix that in a few minutes.

1217
00:52:05,720 --> 00:52:09,440
But first, let's use this same
feature of explicit animation

1218
00:52:09,440 --> 00:52:12,401
to make it so clicking
on the cards is animated,

1219
00:52:12,401 --> 00:52:13,557
cause right now it's very abrupt,

1220
00:52:13,557 --> 00:52:16,797
if you click on a card and
things instantly appear

1221
00:52:16,797 --> 00:52:18,660
so that's not good.

1222
00:52:18,660 --> 00:52:21,780
And exact same thing here's
where we're choosing the Cards,

1223
00:52:21,780 --> 00:52:25,471
from imperative code that we
can just say withAnimation,

1224
00:52:25,471 --> 00:52:28,869
let's go ahead and make
this be a linear Animation

1225
00:52:28,869 --> 00:52:31,591
and we'll make it be long as
well just so we can really

1226
00:52:31,591 --> 00:52:34,800
see it in action, see what's going on.

1227
00:52:34,800 --> 00:52:37,220
Inside we just do whatever we're gonna do,

1228
00:52:37,220 --> 00:52:39,044
that's gonna cause a
bunch of changes to happen

1229
00:52:39,044 --> 00:52:41,293
and all those changes will be animated.

1230
00:52:46,415 --> 00:52:49,770
Okay, so there we go to clicking

1231
00:52:49,770 --> 00:52:53,724
and we can see that we're
getting this fade in fade out

1232
00:52:53,724 --> 00:52:55,240
when we choose a card.

1233
00:52:55,240 --> 00:52:57,814
And notice I clicked on
this card but it animated

1234
00:52:57,814 --> 00:52:59,594
every change that happened including

1235
00:52:59,594 --> 00:53:03,168
these other cards flipping face-down.

1236
00:53:03,168 --> 00:53:06,180
So that when you put
this explicit animation,

1237
00:53:06,180 --> 00:53:08,220
it's gonna animate
everything that happened

1238
00:53:08,220 --> 00:53:10,561
as a result of doing what you did there.

1239
00:53:10,561 --> 00:53:13,044
And that includes something
like let's say there's a match

1240
00:53:13,044 --> 00:53:17,140
let's try and find ourselves a match here.

1241
00:53:17,140 --> 00:53:18,788
We're not very good at this game are we.

1242
00:53:18,788 --> 00:53:20,225
Let's see, oh, there's a match.

1243
00:53:20,225 --> 00:53:23,479
By the way, we get our
implicit animation there

1244
00:53:23,479 --> 00:53:25,300
and if we click on another card here,

1245
00:53:25,300 --> 00:53:27,170
these two cards are gonna disappear.

1246
00:53:27,170 --> 00:53:31,050
Let's see how they disappear
they fade out, right?

1247
00:53:31,050 --> 00:53:32,280
Cause that's the default transition

1248
00:53:32,280 --> 00:53:34,170
we haven't specified any transitions

1249
00:53:34,170 --> 00:53:36,112
we're getting fade-in
and fade-out transitions

1250
00:53:36,112 --> 00:53:38,049
all over the place here.

1251
00:53:38,049 --> 00:53:41,040
What if we wanted those
things disappearing

1252
00:53:41,040 --> 00:53:43,530
to be a little cooler animation

1253
00:53:43,530 --> 00:53:47,231
like how about we'll have them
shrink down and disappear?

1254
00:53:47,231 --> 00:53:49,837
Really easy to do again,
we're gonna go over here

1255
00:53:49,837 --> 00:53:51,928
to find that View, where is that View?

1256
00:53:51,928 --> 00:53:53,903
It's right here.

1257
00:53:53,903 --> 00:53:57,578
This is the View, this cardified ZStack,

1258
00:53:57,578 --> 00:54:00,480
and it's only there when it's face-up

1259
00:54:00,480 --> 00:54:02,370
or if the Card is not matched.

1260
00:54:02,370 --> 00:54:05,385
So once the Card is
matched and is not face-up,

1261
00:54:05,385 --> 00:54:07,754
this View goes away.

1262
00:54:07,754 --> 00:54:12,754
It transitions out, okay
disappears from the View,

1263
00:54:13,050 --> 00:54:15,930
and so we can just say transition here

1264
00:54:15,930 --> 00:54:19,783
and to pick, for example,
AnyTransition.scale.

1265
00:54:21,260 --> 00:54:24,720
So scale is the one that
uses frame to make things

1266
00:54:24,720 --> 00:54:28,881
zoom in, down to nothingness
or out from nothing.

1267
00:54:28,881 --> 00:54:32,051
So let's see if we can
find another match here.

1268
00:54:32,051 --> 00:54:35,410
Now, it's hard to do because

1269
00:54:35,410 --> 00:54:37,067
we have such a slow animation here,

1270
00:54:37,067 --> 00:54:38,570
oh, there's a match.

1271
00:54:38,570 --> 00:54:40,240
Okay, when we click on something else,

1272
00:54:40,240 --> 00:54:43,403
let's see what happens to
animate these cars disappearance.

1273
00:54:44,240 --> 00:54:48,913
Whoo, now notice that only
they disappear by scaling down,

1274
00:54:48,913 --> 00:54:52,650
but all other animations
including that implicit animation,

1275
00:54:52,650 --> 00:54:53,882
they kept going.

1276
00:54:53,882 --> 00:54:56,409
And one thing you're gonna
learn about SwiftUI is that

1277
00:54:56,409 --> 00:54:58,421
all animations can be
happening all at the same time

1278
00:54:58,421 --> 00:55:00,490
and they all just work together.

1279
00:55:00,490 --> 00:55:03,576
It's really, that's one of the
nicest things about SwiftUI,

1280
00:55:03,576 --> 00:55:05,478
is how it handles all the interactions

1281
00:55:05,478 --> 00:55:08,640
of animations happening at the same time.

1282
00:55:08,640 --> 00:55:11,737
Now in your homework, you're
gonna have cards coming

1283
00:55:11,737 --> 00:55:13,128
and going as well.

1284
00:55:13,128 --> 00:55:15,648
But you're not gonna have them scale down,

1285
00:55:15,648 --> 00:55:19,190
you're gonna want your card
to fly across the screen.

1286
00:55:19,190 --> 00:55:21,462
So they're gonna fly away
instead of the screen,

1287
00:55:21,462 --> 00:55:23,050
you know, shrinking down.

1288
00:55:23,050 --> 00:55:25,190
And when they're dealt,
when they appear on screen,

1289
00:55:25,190 --> 00:55:27,500
they're going to fly in, not gonna

1290
00:55:27,500 --> 00:55:29,653
have this nice shrinking effect.

1291
00:55:30,710 --> 00:55:32,460
And adding that transition

1292
00:55:32,460 --> 00:55:34,930
for these things coming and going,

1293
00:55:34,930 --> 00:55:38,060
also makes it so that when
they come back you click

1294
00:55:38,060 --> 00:55:41,513
on new game and they come
back, they should zoom up.

1295
00:55:43,490 --> 00:55:45,840
This AnyTransition and remember is

1296
00:55:45,840 --> 00:55:48,380
that type-erased version of transition.

1297
00:55:48,380 --> 00:55:51,080
So let's go look at that in
the developer documentation

1298
00:55:51,080 --> 00:55:53,350
really quickly here it is AnyTransition.

1299
00:55:53,350 --> 00:55:55,720
So here's that identity,
opacity we talked about,

1300
00:55:55,720 --> 00:55:59,680
which is the default, scale,
slide, slide down to the side,

1301
00:55:59,680 --> 00:56:01,040
down here is offset,

1302
00:56:01,040 --> 00:56:03,690
which is the one that
makes the View fly around,

1303
00:56:03,690 --> 00:56:04,560
coming in and out.

1304
00:56:04,560 --> 00:56:06,610
So that's probably what
you want for your homework.

1305
00:56:06,610 --> 00:56:10,522
Here's modifier where you
get to specify the two

1306
00:56:10,522 --> 00:56:13,864
ViewModifiers. This asymmetric,
by the way, allows you so

1307
00:56:13,864 --> 00:56:16,210
that you can have cards
come in with one animation

1308
00:56:16,210 --> 00:56:19,210
and then disappear with another
animation if you wanted to.

1309
00:56:20,170 --> 00:56:21,880
See that AnyTransition says here,

1310
00:56:21,880 --> 00:56:24,720
it's a type-erased transition.

1311
00:56:24,720 --> 00:56:26,240
That type-erasing is what makes

1312
00:56:26,240 --> 00:56:28,123
all this very simple right here.

1313
00:56:28,123 --> 00:56:30,660
It's making the return
types of these things

1314
00:56:30,660 --> 00:56:35,040
not be transition angle
bracket ViewModifier of

1315
00:56:35,040 --> 00:56:38,210
offset... it's just AnyTransition.

1316
00:56:38,210 --> 00:56:41,340
And again, we'll talk
more about type-erasure

1317
00:56:41,340 --> 00:56:42,810
later in the quarter.

1318
00:56:42,810 --> 00:56:44,240
For now you can kind of ignore it

1319
00:56:44,240 --> 00:56:47,130
and just think of the
transition as just oh transition

1320
00:56:47,130 --> 00:56:49,077
and not worry about all the don't cares

1321
00:56:49,077 --> 00:56:51,000
and other stuff that might be involved

1322
00:56:51,000 --> 00:56:53,640
with a non type-erased transition.

1323
00:56:53,640 --> 00:56:56,533
So the elephant in the
room animation here,

1324
00:56:56,533 --> 00:57:00,140
that we don't have, is
cards flipping over.

1325
00:57:00,140 --> 00:57:02,670
Really, when we have a card game,

1326
00:57:02,670 --> 00:57:04,670
these cards when we click on them,

1327
00:57:04,670 --> 00:57:06,880
you don't want them fading in like this

1328
00:57:06,880 --> 00:57:09,170
we want them to flip over.

1329
00:57:09,170 --> 00:57:11,300
That's what cards do, they flip.

1330
00:57:11,300 --> 00:57:14,570
So how are we gonna do
that flip animation?

1331
00:57:14,570 --> 00:57:17,170
Well, Swift is gonna help us a lot

1332
00:57:17,170 --> 00:57:20,270
because it has an Animatable ViewModifier

1333
00:57:20,270 --> 00:57:22,920
called a rotation 3D effect,

1334
00:57:22,920 --> 00:57:26,500
which rotates it just like
we rotated on a match.

1335
00:57:26,500 --> 00:57:30,460
If you remember, on the
match, we rotated in 2D,

1336
00:57:30,460 --> 00:57:31,870
essentially round and round.

1337
00:57:31,870 --> 00:57:35,000
We can also rotate in
3D have this View rotate

1338
00:57:35,000 --> 00:57:37,133
in 3D around a different axis,

1339
00:57:37,133 --> 00:57:40,720
this y-vertical axis instead
of kind of rotating around

1340
00:57:40,720 --> 00:57:43,259
the axis of that point straight out at us.

1341
00:57:43,259 --> 00:57:46,219
So let's do a nice 3D
rotation of this card

1342
00:57:46,219 --> 00:57:47,240
and just see if it works.

1343
00:57:47,240 --> 00:57:51,330
It's called rotation3DEffect.

1344
00:57:51,330 --> 00:57:55,320
And you specify how much
you want to rotate the Card.

1345
00:57:55,320 --> 00:57:59,720
And here, again, we're
gonna do Angle.degrees.

1346
00:57:59,720 --> 00:58:02,940
And if the card isFaceUp,

1347
00:58:02,940 --> 00:58:05,730
then let's not have it rotated just normal

1348
00:58:05,730 --> 00:58:09,520
but if it's face-down,
let's rotate it 180 degrees.

1349
00:58:09,520 --> 00:58:11,510
Let's flip it all the way over.

1350
00:58:11,510 --> 00:58:14,681
Now this axis, because
this is a 3D rotation,

1351
00:58:14,681 --> 00:58:18,487
this axis is saying around which
axis do you want to rotate,

1352
00:58:18,487 --> 00:58:19,320
and this is three numbers,

1353
00:58:19,320 --> 00:58:23,320
so for example, (0, 0, 1)
would be a 2D rotation,

1354
00:58:23,320 --> 00:58:26,250
cause 1, the last one here is the z-axis.

1355
00:58:26,250 --> 00:58:29,260
That's the one that points up
out at you from the screen,

1356
00:58:29,260 --> 00:58:33,070
and what we want is the y-axis instead,

1357
00:58:33,070 --> 00:58:35,207
the y-axis is the vertical axis,

1358
00:58:35,207 --> 00:58:36,870
the one that goes from
the top of your screens

1359
00:58:36,870 --> 00:58:38,450
straight down to the
bottom of your screen,

1360
00:58:38,450 --> 00:58:42,550
we want this rotation to
happen around that axis.

1361
00:58:42,550 --> 00:58:45,510
See what that does, it's
not gonna quite be right.

1362
00:58:45,510 --> 00:58:47,600
Let's see what we get here.

1363
00:58:47,600 --> 00:58:49,620
Whoo, wow.

1364
00:58:49,620 --> 00:58:52,190
So that's kind of interesting.

1365
00:58:52,190 --> 00:58:54,420
It's rotating,

1366
00:58:54,420 --> 00:58:57,460
but the Views appearing
and disappearing there

1367
00:58:57,460 --> 00:58:59,470
that's still happening with the fade

1368
00:58:59,470 --> 00:59:01,430
and that's really really not what we want.

1369
00:59:01,430 --> 00:59:03,000
When we first click the card,

1370
00:59:03,000 --> 00:59:05,690
if both the back and the front are visible

1371
00:59:05,690 --> 00:59:08,890
one's fading out one's fading
in, and then by the end,

1372
00:59:08,890 --> 00:59:12,363
the back is totally faded out
and the front has faded in.

1373
00:59:13,490 --> 00:59:16,088
This is close, it's close,

1374
00:59:16,088 --> 00:59:18,440
we're on the road to making this work,

1375
00:59:18,440 --> 00:59:20,100
but it's not quite right.

1376
00:59:20,100 --> 00:59:23,720
So there's two ways I can
think of to make this work.

1377
00:59:23,720 --> 00:59:27,870
One, we could have our
own custom transition,

1378
00:59:27,870 --> 00:59:30,090
that transition that is transitioning

1379
00:59:30,090 --> 00:59:32,330
between the back and the front,

1380
00:59:32,330 --> 00:59:36,470
where the back kind of
like we're flipping it up,

1381
00:59:36,470 --> 00:59:38,490
the back is showing for

1382
00:59:39,784 --> 00:59:41,770
a while until it gets up on its edge

1383
00:59:41,770 --> 00:59:42,940
and then it kind of disappears

1384
00:59:42,940 --> 00:59:44,500
and then when the front comes on,

1385
00:59:44,500 --> 00:59:47,880
it starts out on its edge and
then kind of rotates down.

1386
00:59:47,880 --> 00:59:52,290
We could definitely write a
ViewModifier that does that

1387
00:59:52,290 --> 00:59:53,720
and then make a transition out of it

1388
00:59:53,720 --> 00:59:57,540
or we're using this sort of
half-flip up onto its edge

1389
00:59:57,540 --> 00:59:59,620
to have the card come in and come out.

1390
00:59:59,620 --> 01:00:01,610
It's slightly more complicated really,

1391
00:59:59,620 --> 01:00:01,610
It's slightly more complicated really,

1392
01:00:01,610 --> 01:00:03,150
than I think we need to do,

1393
01:00:03,150 --> 01:00:05,640
because if we remember how animation works

1394
01:00:05,640 --> 01:00:08,920
we know that ViewModifiers
are the main things

1395
01:00:08,920 --> 01:00:11,000
that are doing animation.

1396
01:00:11,000 --> 01:00:14,500
So why don't we just take
our ViewModifier which draws

1397
01:00:14,500 --> 01:00:19,500
this card and make it so that
it's smart about it rotating

1398
01:00:19,960 --> 01:00:23,100
itself so that it only shows
the front during the first half

1399
01:00:23,100 --> 01:00:26,880
of animation and only shows the
back during the second half.

1400
01:00:26,880 --> 01:00:29,900
In other words, we're gonna
have our Cardify over here.

1401
01:00:29,900 --> 01:00:31,460
Here's our Cardify

1402
01:00:31,460 --> 01:00:33,370
when it's rotating,

1403
01:00:33,370 --> 01:00:35,420
we're gonna make it so
you can rotate itself.

1404
01:00:35,420 --> 01:00:36,640
And as it's doing it,

1405
01:00:36,640 --> 01:00:41,640
it's gonna coordinate what's
face-up with the rotation.

1406
01:00:41,770 --> 01:00:43,310
First half of the rotation,

1407
01:00:43,310 --> 01:00:46,453
face-up will be their second
half rotation, face-down.

1408
01:00:47,680 --> 01:00:50,620
Well, the first thing
we're gonna do is take this

1409
01:00:50,620 --> 01:00:52,940
rotation3DEffect over here

1410
01:00:52,940 --> 01:00:54,980
and move it into

1411
01:00:54,980 --> 01:00:55,813
our

1412
01:00:56,880 --> 01:00:58,210
modifier.

1413
01:00:58,210 --> 01:01:00,150
So if we put this over here,

1414
01:01:00,150 --> 01:01:03,630
and have this ZStack be rotated over here.

1415
01:01:03,630 --> 01:01:07,740
Instead of having the card rotate

1416
01:01:07,740 --> 01:01:11,440
in a binary sense between 0 and 180,

1417
01:01:11,440 --> 01:01:13,650
we want to be able to control

1418
01:01:13,650 --> 01:01:15,560
the entire rotation of it

1419
01:01:15,560 --> 01:01:17,740
because in the first half, we
only want to show the face-up

1420
01:01:17,740 --> 01:01:20,460
and the second half, we
only want to show face-down.

1421
01:01:20,460 --> 01:01:23,550
So we're gonna kind of
change our ViewModifier here,

1422
01:01:23,550 --> 01:01:28,120
where the main var that is
involved is the rotation.

1423
01:01:28,120 --> 01:01:29,330
So I'm just gonna have rotation,

1424
01:01:29,330 --> 01:01:31,410
I'm gonna make a be a
Double, which is gonna be

1425
01:01:31,410 --> 01:01:34,943
my amount of rotation in
degrees just to be simple.

1426
01:01:36,194 --> 01:01:40,300
And if I'm gonna track the
rotation and animate it,

1427
01:01:40,300 --> 01:01:42,800
then isFaceUp really just becomes

1428
01:01:42,800 --> 01:01:44,200
a function of the rotation

1429
01:01:44,200 --> 01:01:46,990
if rotation is less than 90 degrees

1430
01:01:46,990 --> 01:01:49,360
of my 180 degree rotation,

1431
01:01:49,360 --> 01:01:53,350
then the card is face-up
otherwise it's face-down

1432
01:01:53,350 --> 01:01:56,533
so now I've linked rotation
and the face-up face-down.

1433
01:01:57,410 --> 01:02:00,210
And then when I have this
rotation3DEffect instead

1434
01:02:00,210 --> 01:02:02,513
of having the card isFaceUp
control the rotation,

1435
01:02:02,513 --> 01:02:05,073
let's just do the actual rotation.

1436
01:02:06,070 --> 01:02:08,890
Whatever the rotation
we set this modifier to,

1437
01:02:08,890 --> 01:02:11,090
that's the rotation is
gonna be and it's gonna pick

1438
01:02:11,090 --> 01:02:15,223
the right face, front or not
face front, rotation of it,

1439
01:02:16,430 --> 01:02:18,900
I still want to be able to have an init

1440
01:02:18,900 --> 01:02:20,663
that says isFaceUp.

1441
01:02:21,620 --> 01:02:23,310
But now when I do that,

1442
01:02:23,310 --> 01:02:26,080
that's just setting my
rotation equal to zero

1443
01:02:26,080 --> 01:02:29,100
if it's face-up, and
180 if it's face-down,

1444
01:02:29,100 --> 01:02:33,013
so let's say isFaceUp question
mark zero, otherwise 180.

1445
01:02:34,400 --> 01:02:36,960
So I've converted my ViewModifier here

1446
01:02:36,960 --> 01:02:40,130
to be based on rotation,
rather than face-up

1447
01:02:40,130 --> 01:02:42,380
and the face-up is always
tracking the rotation

1448
01:02:42,380 --> 01:02:43,560
cause this isFaceUp it's

1449
01:02:43,560 --> 01:02:46,710
just looking at the rotation
to see if we rotated enough.

1450
01:02:46,710 --> 01:02:48,750
Now how do we make it so that it animates

1451
01:02:48,750 --> 01:02:50,500
cause this is not enough
to make it animate

1452
01:02:50,500 --> 01:02:51,680
if we didn't run here

1453
01:02:54,280 --> 01:02:55,700
and click on these things.

1454
01:02:55,700 --> 01:02:58,800
It's doing the flip, but it's
still doing the wrong thing

1455
01:02:58,800 --> 01:03:00,160
about the face-up and face-down.

1456
01:03:00,160 --> 01:03:02,970
When the face-up and face-down
Views come and go here,

1457
01:03:02,970 --> 01:03:05,310
they're still just having opacity.

1458
01:03:05,310 --> 01:03:06,840
And that's because this ViewModifier

1459
01:03:06,840 --> 01:03:09,290
is not marked as Animatable.

1460
01:03:09,290 --> 01:03:12,360
So SwiftUI thinks, well, this ViewModifier

1461
01:03:12,360 --> 01:03:14,110
does not know how to animate.

1462
01:03:14,110 --> 01:03:16,650
So I'm just gonna do
normal animations in here.

1463
01:03:16,650 --> 01:03:19,820
I'll just animate this
normally it's being switched

1464
01:03:19,820 --> 01:03:22,580
by the init here to one or the other.

1465
01:03:22,580 --> 01:03:24,990
And I'm just taking these
Views that are coming

1466
01:03:24,990 --> 01:03:27,270
and going because of isFaceUp

1467
01:03:27,270 --> 01:03:28,640
and I'm just transitioning them

1468
01:03:28,640 --> 01:03:31,863
with the standard
transition, which is opacity.

1469
01:03:32,852 --> 01:03:34,440
So we can turn a ViewModifier

1470
01:03:34,440 --> 01:03:38,330
though into an Animatable
modifier by changing the protocol

1471
01:03:38,330 --> 01:03:42,980
implements to AnimatableModifier.

1472
01:03:42,980 --> 01:03:47,340
So Animatable modifier
really is just ViewModifier

1473
01:03:47,340 --> 01:03:52,150
and Animatable, and Animatable this is,

1474
01:03:52,150 --> 01:03:56,940
if we looked it up,
this animatableData var,

1475
01:03:56,940 --> 01:03:59,800
this communication between
the animation system

1476
01:03:59,800 --> 01:04:02,920
and our ViewModifier or our Shape.

1477
01:04:02,920 --> 01:04:05,000
So we just need to implement
this animatableData

1478
01:04:06,210 --> 01:04:09,430
animatableData inside
here, so let's do that.

1479
01:04:09,430 --> 01:04:13,770
Let's put it right down
here, var animatableData.

1480
01:04:13,770 --> 01:04:16,190
What does our ViewModifier animate?

1481
01:04:16,190 --> 01:04:18,290
It animates the rotation

1482
01:04:19,130 --> 01:04:22,520
of our View that's what you'd animate.

1483
01:04:22,520 --> 01:04:25,590
So this Double is our rotation.

1484
01:04:25,590 --> 01:04:28,470
Now, I could use this word animatableData

1485
01:04:28,470 --> 01:04:30,300
here instead of rotation

1486
01:04:30,300 --> 01:04:34,630
but that's not very nice code
to have animatableData here.

1487
01:04:34,630 --> 01:04:36,700
So let's do that trick I was talking about

1488
01:04:36,700 --> 01:04:38,150
on the slides where I'm just gonna have

1489
01:04:38,150 --> 01:04:39,640
this be a computed property

1490
01:04:39,640 --> 01:04:42,100
and I'm gonna return my rotation

1491
01:04:42,100 --> 01:04:44,810
and I'm gonna set my rotation equal

1492
01:04:44,810 --> 01:04:47,990
to the new value of this property.

1493
01:04:47,990 --> 01:04:50,120
Remember, get and set, that's how we do

1494
01:04:50,120 --> 01:04:54,110
computed properties that are
read-write and that's it.

1495
01:04:54,110 --> 01:04:57,640
So I essentially just renamed
rotation to be animatableData

1496
01:04:57,640 --> 01:04:59,890
because this is the name
that the animation systems

1497
01:04:59,890 --> 01:05:01,320
is going to look for.

1498
01:05:01,320 --> 01:05:04,870
By the way you can't even
though this really is all

1499
01:05:04,870 --> 01:05:05,720
that's going on here,

1500
01:05:05,720 --> 01:05:07,560
you can't actually just say this

1501
01:05:07,560 --> 01:05:11,390
you need to say that this
is an AnimatableModifier

1502
01:05:11,390 --> 01:05:14,400
because this AnimatableModifier protocol

1503
01:05:14,400 --> 01:05:18,230
while it is just this and
ViewModifier together,

1504
01:05:18,230 --> 01:05:19,870
it also signals to the system,

1505
01:05:19,870 --> 01:05:22,600
I wanna participate I'm
gonna be ViewModifier

1506
01:05:22,600 --> 01:05:25,060
that wants to participate
in the animation system

1507
01:05:25,060 --> 01:05:28,523
so make sure that you say
colon AnimatableModifier.

1508
01:05:30,010 --> 01:05:31,210
Alright, let's try this.

1509
01:05:34,605 --> 01:05:36,513
Tap that card well, oh my gosh,

1510
01:05:38,674 --> 01:05:40,360
that really was amazing the easy.

1511
01:05:40,360 --> 01:05:42,870
See in the first half of the flip there,

1512
01:05:42,870 --> 01:05:44,410
when the cards face-down,

1513
01:05:44,410 --> 01:05:46,930
it's only showing the back
and when it's face-up,

1514
01:05:46,930 --> 01:05:49,030
it's only showing the front and let's try

1515
01:05:49,030 --> 01:05:50,550
and make a card disappear into it

1516
01:05:50,550 --> 01:05:53,143
so you can see the cards face back down.

1517
01:05:56,090 --> 01:05:59,440
Here's a match right
here and make it go away.

1518
01:05:59,440 --> 01:06:01,670
And notice when it went away it still work

1519
01:06:01,670 --> 01:06:05,460
that animation work just
fine the scaling animation.

1520
01:06:05,460 --> 01:06:07,750
Notice also that when we flip cards over,

1521
01:06:07,750 --> 01:06:09,620
there's no fade-in anymore.

1522
01:06:09,620 --> 01:06:13,370
These cards are not fading, the
back or front is not fading.

1523
01:06:13,370 --> 01:06:15,790
That's because this ViewModifier

1524
01:06:15,790 --> 01:06:17,890
has taken control of the animation.

1525
01:06:17,890 --> 01:06:19,890
And so the animation
system is no longer trying

1526
01:06:19,890 --> 01:06:22,310
to reach in here and do
this animation itself.

1527
01:06:22,310 --> 01:06:25,260
It is assumes that this
ViewModifier knows what it's doing.

1528
01:06:27,000 --> 01:06:30,660
Let's go back to the problem
we had from the very beginning,

1529
01:06:30,660 --> 01:06:32,710
which is when things match
let's find some cards

1530
01:06:32,710 --> 01:06:33,693
that match here.

1531
01:06:37,592 --> 01:06:38,480
Now I'm not very good at this game again.

1532
01:06:38,480 --> 01:06:41,840
Okay, I think this one. Yeah,
okay, ready, here we go match.

1533
01:06:41,840 --> 01:06:43,540
This one spins.

1534
01:06:43,540 --> 01:06:45,660
This one does not spin.

1535
01:06:45,660 --> 01:06:48,763
Let's investigate why does this not spin?

1536
01:06:49,650 --> 01:06:53,620
This doesn't spin because this
card when we touched on it,

1537
01:06:53,620 --> 01:06:56,950
it matched and it was
faced down at the time

1538
01:06:56,950 --> 01:06:58,860
we switched it to face-up.

1539
01:06:58,860 --> 01:07:02,970
So when it came on screen
this all this fuse right here,

1540
01:07:02,970 --> 01:07:06,493
it was face-up and already matched.

1541
01:07:08,040 --> 01:07:10,250
So no change happened,

1542
01:07:10,250 --> 01:07:13,210
this card isMatched was already true

1543
01:07:13,210 --> 01:07:16,520
so there was no need to apply any change.

1544
01:07:16,520 --> 01:07:20,200
Animations only animate changes.

1545
01:07:20,200 --> 01:07:21,640
And so there was no change

1546
01:07:21,640 --> 01:07:23,926
cause that View came on screen matched,

1547
01:07:23,926 --> 01:07:25,746
it never changed to be matched

1548
01:07:25,746 --> 01:07:28,053
it just was matched when it came on.

1549
01:07:30,610 --> 01:07:33,400
So if we want a match happening

1550
01:07:33,400 --> 01:07:36,070
to be animated with the somersault,

1551
01:07:36,070 --> 01:07:39,040
we need that card, this Text,

1552
01:07:39,040 --> 01:07:43,360
basically the front of the
card, needs to be on screen

1553
01:07:43,360 --> 01:07:45,420
when the match happens.

1554
01:07:45,420 --> 01:07:47,820
But that's a problem for a card,

1555
01:07:47,820 --> 01:07:51,080
the second card in a match
because it's face-down.

1556
01:07:51,080 --> 01:07:54,290
So that emoji the front of the card

1557
01:07:54,290 --> 01:07:58,310
it's not on screen, but we
can still have it on screen,

1558
01:07:58,310 --> 01:08:01,350
but hidden and that's
an another way to deal

1559
01:08:01,350 --> 01:08:04,220
with having Views that are
appearing and disappearing

1560
01:08:04,220 --> 01:08:08,990
instead of having them
actually be if-then-ed out of

1561
01:08:08,990 --> 01:08:11,100
existence. Instead, we can just hide them.

1562
01:08:11,100 --> 01:08:13,170
And the way we hide
things is with something

1563
01:08:13,170 --> 01:08:16,520
we already know from last time, opacity,

1564
01:08:16,520 --> 01:08:19,460
fully transparent is hidden

1565
01:08:19,460 --> 01:08:22,650
and fully opaque is
fully visible on screen.

1566
01:08:22,650 --> 01:08:25,780
So let's use opacity to
have the back and front

1567
01:08:25,780 --> 01:08:27,700
of our cards be showing or not,

1568
01:08:27,700 --> 01:08:29,510
instead of using if then

1569
01:08:29,510 --> 01:08:31,710
that makes them completely
disappear or not.

1570
01:08:32,560 --> 01:08:35,080
So this is a different
way of thinking about

1571
01:08:35,080 --> 01:08:37,060
what's going on in this ZStack.

1572
01:08:37,060 --> 01:08:40,310
Instead of thinking of it
as these front Views come

1573
01:08:40,310 --> 01:08:41,490
when it's a face-up

1574
01:08:41,490 --> 01:08:43,167
and then they go when it's face-down

1575
01:08:43,167 --> 01:08:45,900
and this one comes when it's
face-down, this goes face-up.

1576
01:08:45,900 --> 01:08:49,630
Instead, I'm gonna have
all four of these always

1577
01:08:49,630 --> 01:08:51,170
on the card.

1578
01:08:51,170 --> 01:08:52,450
And when it's face-down,

1579
01:08:52,450 --> 01:08:55,530
I'm not gonna be able to see these three.

1580
01:08:55,530 --> 01:08:57,400
So let's take these three,

1581
01:08:57,400 --> 01:09:00,830
I'm gonna even group them
to make it easier on myself.

1582
01:09:00,830 --> 01:09:05,230
And let's set their opacity so
that if the card is face-up,

1583
01:09:05,230 --> 01:09:06,750
they're fully opaque

1584
01:09:06,750 --> 01:09:08,930
otherwise they're fully transparent.

1585
01:09:08,930 --> 01:09:12,920
And this one similarly
will say its opacity

1586
01:09:12,920 --> 01:09:16,980
if it's face-up, it's fully transparent.

1587
01:09:16,980 --> 01:09:19,203
Otherwise, based off of this,

1588
01:09:19,203 --> 01:09:21,690
move these things around, so
they're a little easier to read

1589
01:09:24,420 --> 01:09:27,230
So here now, there's no ifs in here,

1590
01:09:27,230 --> 01:09:28,990
there are no ifs inside this ViewBuilder

1591
01:09:28,990 --> 01:09:31,700
Views are not coming and going anymore.

1592
01:09:31,700 --> 01:09:34,070
It also means that this content,

1593
01:09:34,070 --> 01:09:35,950
this text is always on screen

1594
01:09:35,950 --> 01:09:38,290
even when we're face-down,
it's just hidden.

1595
01:09:38,290 --> 01:09:41,270
So that means that when it
gets set to matched later,

1596
01:09:41,270 --> 01:09:44,580
this implicit animation will be a change

1597
01:09:44,580 --> 01:09:45,913
until it'll get to run.

1598
01:09:46,880 --> 01:09:47,980
Let's give that a try.

1599
01:09:50,350 --> 01:09:54,880
Here's our card, whoop,
still works perfectly there,

1600
01:09:54,880 --> 01:09:56,870
the front of the card was not showing

1601
01:09:56,870 --> 01:09:58,730
see the front of the
card is there right now

1602
01:09:58,730 --> 01:10:00,380
it's on the other side of this card

1603
01:09:58,730 --> 01:10:00,380
it's on the other side of this card

1604
01:10:00,380 --> 01:10:01,930
if you want to think of it that way,

1605
01:10:01,930 --> 01:10:04,077
it's hidden though, its opacity is zero.

1606
01:10:04,077 --> 01:10:05,747
And when I click it its
opacity is still zero

1607
01:10:05,747 --> 01:10:07,280
and now its opacity is one

1608
01:10:07,280 --> 01:10:09,203
and the back's opacity gets set to zero.

1609
01:10:10,120 --> 01:10:12,687
So hopefully if we find
a match here somewhere,

1610
01:10:14,240 --> 01:10:15,073
this guy

1611
01:10:16,580 --> 01:10:18,850
and this guy, they'll both be spinning

1612
01:10:18,850 --> 01:10:22,083
and you can see as that card
turned around it was spinning.

1613
01:10:23,174 --> 01:10:24,930
Let's match another one here, this one

1614
01:10:24,930 --> 01:10:26,880
watch the card as it's turning around

1615
01:10:26,880 --> 01:10:29,430
you are gonna can see its already spinning

1616
01:10:29,430 --> 01:10:33,170
because it was there
hidden, and it was spinning,

1617
01:10:33,170 --> 01:10:35,860
hidden until it now became visible.

1618
01:10:35,860 --> 01:10:40,860
This trick of using opacity
to make things come and go

1619
01:10:41,320 --> 01:10:43,780
it's really a way that you can
control whether you're doing

1620
01:10:43,780 --> 01:10:46,840
an animation by Views coming
and going with transitions,

1621
01:10:46,840 --> 01:10:50,500
or whether you're controlling
it directly on screen

1622
01:10:50,500 --> 01:10:52,420
using opacity.

1623
01:10:52,420 --> 01:10:55,860
And both of them perfectly
valid ways to go.

1624
01:10:55,860 --> 01:10:58,180
You can just decide whether
it makes sense or not

1625
01:10:58,180 --> 01:10:59,743
later in this demo, you're gonna see

1626
01:10:59,743 --> 01:11:02,220
that we actually are gonna take advantage

1627
01:11:02,220 --> 01:11:04,930
of making our little Pie come and go.

1628
01:11:04,930 --> 01:11:06,350
When our Pie is animating,

1629
01:11:06,350 --> 01:11:08,630
we want it there as an animating thing,

1630
01:11:08,630 --> 01:11:10,510
but we're gonna put a
different Pie out there

1631
01:11:10,510 --> 01:11:12,750
when it's not, there's
gonna be a huge advantage

1632
01:11:12,750 --> 01:11:14,680
to knowing when it's coming and going.

1633
01:11:14,680 --> 01:11:17,040
So it's not always the case
that you want to use opacity

1634
01:11:17,040 --> 01:11:19,450
sometimes you want the
Views coming and going,

1635
01:11:19,450 --> 01:11:22,480
it just depends whether you're
triggering things off of that

1636
01:11:22,480 --> 01:11:24,130
and whether you want to use transitions,

1637
01:11:24,130 --> 01:11:26,950
or just normal animations.

1638
01:11:26,950 --> 01:11:28,900
Now the last thing I'm gonna do here is,

1639
01:11:28,900 --> 01:11:32,130
now that we have our animation,

1640
01:11:32,130 --> 01:11:34,570
working pretty well for flipping cards,

1641
01:11:34,570 --> 01:11:36,580
and for having them disappear,

1642
01:11:36,580 --> 01:11:38,780
I'm going to speed them back up again

1643
01:11:38,780 --> 01:11:40,410
and then we're gonna go
work on the animation

1644
01:11:40,410 --> 01:11:41,660
of this little Pie.

1645
01:11:41,660 --> 01:11:44,120
So let's speed it back
up, that's easy to do.

1646
01:11:44,120 --> 01:11:47,490
Go back here and just make our durations,

1647
01:11:47,490 --> 01:11:49,010
maybe we have the default durations,

1648
01:11:49,010 --> 01:11:52,890
let's try the default
durations of both of these,

1649
01:11:52,890 --> 01:11:57,310
usually under a second
most the default durations.

1650
01:11:57,310 --> 01:11:58,657
See what this looks like,

1651
01:11:58,657 --> 01:12:00,930
mhh that might be a little quick actually,

1652
01:12:00,930 --> 01:12:03,080
I'm not super happy with that

1653
01:12:03,080 --> 01:12:05,460
I'm okay with the disappearing that fast

1654
01:12:05,460 --> 01:12:07,920
but when flipping the
cards I wanna slow it down

1655
01:12:07,920 --> 01:12:08,753
a little bit.

1656
01:12:08,753 --> 01:12:10,180
So I'm gonna say duration,

1657
01:12:10,180 --> 01:12:13,050
let's say 0.75,

1658
01:12:13,050 --> 01:12:14,683
see how fast that works.

1659
01:12:17,952 --> 01:12:19,720
Okay, it looks better to me yeah,

1660
01:12:19,720 --> 01:12:22,560
certainly wouldn't won't
be any slower than that

1661
01:12:22,560 --> 01:12:24,310
but I think that looks pretty good.

1662
01:12:25,760 --> 01:12:28,110
This blue would obviously be something

1663
01:12:28,110 --> 01:12:30,610
we wanna put down in
our drawing constants.

1664
01:12:30,610 --> 01:12:32,050
I'm not gonna do it right
now for time savings

1665
01:12:32,050 --> 01:12:34,420
but anytime you see a
blue number in there,

1666
01:12:34,420 --> 01:12:36,960
these blue numbers here also
we didn't do from last time

1667
01:12:36,960 --> 01:12:38,780
these things should all be put down here

1668
01:12:38,780 --> 01:12:41,240
in drawing constants, which
you have a control panel

1669
01:12:41,240 --> 01:12:42,810
down here to tweak and turn the dials

1670
01:12:42,810 --> 01:12:44,563
to make your UI look how you want.

1671
01:12:45,650 --> 01:12:47,417
We have this Pie

1672
01:12:47,417 --> 01:12:50,530
and right now the Pie is stuck
in this position right here,

1673
01:12:50,530 --> 01:12:52,800
but we really whenever a card flips up,

1674
01:12:52,800 --> 01:12:54,390
we want it to start counting down

1675
01:12:54,390 --> 01:12:55,400
and when it flips back down,

1676
01:12:55,400 --> 01:12:57,260
we stopped counting and then push back up.

1677
01:12:57,260 --> 01:12:58,610
It keeps counting and then flipped down

1678
01:12:58,610 --> 01:13:00,050
it stopped counting and then of course

1679
01:13:00,050 --> 01:13:02,280
when it matches, then we stopped counting

1680
01:13:02,280 --> 01:13:03,690
because now you've matched it.

1681
01:13:03,690 --> 01:13:05,030
And if it totally disappears,

1682
01:13:05,030 --> 01:13:08,300
you don't get as many
points as if you do it

1683
01:13:08,300 --> 01:13:09,950
before it disappears.

1684
01:13:09,950 --> 01:13:12,670
To do this, we got a couple
of things that we have to do.

1685
01:13:12,670 --> 01:13:15,830
One is we're gonna have to
kind of enhance our Model

1686
01:13:15,830 --> 01:13:20,050
to know how much bonus
time is left, and all that.

1687
01:13:20,050 --> 01:13:23,630
So I have actually put some code

1688
01:13:23,630 --> 01:13:26,220
in here that I made available to you guys

1689
01:13:26,220 --> 01:13:30,020
on the forum before, so
you students all have it.

1690
01:13:30,020 --> 01:13:32,840
If you don't have it, you
can pause this video actually

1691
01:13:32,840 --> 01:13:34,670
and copy it from here if you can't

1692
01:13:34,670 --> 01:13:36,780
get a hold of it some other way.

1693
01:13:36,780 --> 01:13:40,060
But what this code is
basically doing is tracking

1694
01:13:40,060 --> 01:13:41,980
every time the card comes up and down

1695
01:13:41,980 --> 01:13:44,500
or gets mapped it tracking the time used

1696
01:13:44,500 --> 01:13:45,958
and then it answers questions like

1697
01:13:45,958 --> 01:13:47,840
how much time is remaining

1698
01:13:47,840 --> 01:13:51,830
or what percentage of
the time is remaining

1699
01:13:51,830 --> 01:13:54,030
and we can learn whether we earn the bonus

1700
01:13:54,030 --> 01:13:56,370
and start using the bonus time

1701
01:13:56,370 --> 01:13:58,320
and stop using the bonus time.

1702
01:13:58,320 --> 01:14:00,130
By the way these functions,
I'm gonna make sure

1703
01:14:00,130 --> 01:14:03,290
I call these when the card
goes face-up and face-down

1704
01:14:03,290 --> 01:14:05,440
in my Model and also when it's matched.

1705
01:14:05,440 --> 01:14:08,010
So let's use those property
observers we talked about

1706
01:14:08,010 --> 01:14:10,090
to call those functions.

1707
01:14:10,090 --> 01:14:12,040
Here is my

1708
01:14:12,040 --> 01:14:13,770
Cards' vars.

1709
01:14:13,770 --> 01:14:15,233
And I'm gonna make it so that every time

1710
01:14:15,233 --> 01:14:16,657
isFaceUp changed here,

1711
01:14:16,657 --> 01:14:19,790
and I'm gonna use didSet I
showed willSet in the slides,

1712
01:14:19,790 --> 01:14:21,357
but I'm just being different here

1713
01:14:21,357 --> 01:14:23,040
and showing you didSet.

1714
01:14:23,040 --> 01:14:24,560
When this happens, I'm gonna say

1715
01:14:24,560 --> 01:14:28,790
if the isFaceUp changed to true.

1716
01:14:28,790 --> 01:14:30,490
So the Card went face-up,

1717
01:14:30,490 --> 01:14:33,370
then I'm gonna start that
bonus time running again,

1718
01:14:33,370 --> 01:14:35,240
start using the bonus time.

1719
01:14:35,240 --> 01:14:36,970
Otherwise, if the Card went face-down,

1720
01:14:36,970 --> 01:14:39,223
I'm gonna stop using the bonus time.

1721
01:14:40,060 --> 01:14:43,170
So I'm just watching this
face-up and face-down in my Card

1722
01:14:43,170 --> 01:14:44,407
and whenever it changes that happens.

1723
01:14:44,407 --> 01:14:47,280
And this is more reliable than trying to

1724
01:14:47,280 --> 01:14:51,320
look at all the times I
say isFaceUp true or false

1725
01:14:51,320 --> 01:14:55,210
and try to also call
startUsingBonusTime then

1726
01:14:55,210 --> 01:14:57,440
I might make a mistake and
forget it somewhere whatever.

1727
01:14:57,440 --> 01:14:59,830
This way, it's reliable
every time I change this

1728
01:14:59,830 --> 01:15:01,860
boom we start and stop the time.

1729
01:15:01,860 --> 01:15:03,850
And similarly for isMatched here,

1730
01:15:03,850 --> 01:15:08,430
when didSet, we can stop using bonus time.

1731
01:15:08,430 --> 01:15:10,320
If isMatched is set to false, probably

1732
01:15:10,320 --> 01:15:12,550
maybe we're resetting the
game or resetting the Cards,

1733
01:15:12,550 --> 01:15:14,620
not sure what we're doing there.

1734
01:15:14,620 --> 01:15:15,940
But it seems like the bonus time

1735
01:15:15,940 --> 01:15:17,810
shouldn't start going again.

1736
01:15:17,810 --> 01:15:21,030
This property observer, a
really powerful way to sync up

1737
01:15:21,030 --> 01:15:23,540
what's going on inside your code.

1738
01:15:23,540 --> 01:15:27,050
So now our Model knows
how much time is remaining

1739
01:15:27,050 --> 01:15:28,430
on the bonus and all that stuff.

1740
01:15:28,430 --> 01:15:30,640
That's what all this code I did down here.

1741
01:15:30,640 --> 01:15:32,560
So let's use that stuff

1742
01:15:32,560 --> 01:15:35,560
in our UI to show that animation.

1743
01:15:35,560 --> 01:15:38,910
Now for our card Pie to animate,

1744
01:15:38,910 --> 01:15:42,980
we have to enhance our Shape
over here to do animation.

1745
01:15:42,980 --> 01:15:46,300
Now shapes really already
have this Animatable,

1746
01:15:46,300 --> 01:15:49,210
the same protocol we
had with ViewModifier,

1747
01:15:49,210 --> 01:15:51,070
it's pretty much on all Shapes,

1748
01:15:51,070 --> 01:15:55,160
all Shapes are assumed to
be able to do animation

1749
01:15:55,160 --> 01:15:57,320
it's just kind of part of being a Shape.

1750
01:15:57,320 --> 01:15:59,480
It's so common that we
don't even have to say

1751
01:15:59,480 --> 01:16:00,750
comma Animatable here,

1752
01:16:00,750 --> 01:16:02,790
shape just assumes that
you're gonna do it.

1753
01:16:02,790 --> 01:16:04,870
Now if you don't put animatableData,

1754
01:16:04,870 --> 01:16:06,980
you won't get any animation it'll build

1755
01:16:06,980 --> 01:16:09,010
but usually we want it.

1756
01:16:09,010 --> 01:16:10,580
So what do we want to animate here

1757
01:16:10,580 --> 01:16:12,500
in our Cardify ViewModifier,

1758
01:16:12,500 --> 01:16:15,170
we animated our rotation
as we went around,

1759
01:16:15,170 --> 01:16:18,540
well, in our animation of the Pie,

1760
01:16:18,540 --> 01:16:20,720
we kind of want to animate this angle,

1761
01:16:20,720 --> 01:16:22,200
see this angle that goes here,

1762
01:16:22,200 --> 01:16:25,110
as it goes around this
angle is gonna change

1763
01:16:25,110 --> 01:16:26,520
the end angle here.

1764
01:16:26,520 --> 01:16:28,130
And if we're gonna be a good pie,

1765
01:16:28,130 --> 01:16:30,970
let's make it so both
angles can be animated

1766
01:16:30,970 --> 01:16:32,800
the starting one and the ending one.

1767
01:16:32,800 --> 01:16:34,370
That way we can animate either side,

1768
01:16:34,370 --> 01:16:36,470
depending on what we thought look nice.

1769
01:16:36,470 --> 01:16:40,320
So how do I animate two
things at once, essentially,

1770
01:16:40,320 --> 01:16:42,503
I'm gonna use that AnimatablePair,

1771
01:16:43,830 --> 01:16:44,663
right.

1772
01:16:44,663 --> 01:16:46,510
And the AnimatablePair is
gonna be a pair of Doubles,

1773
01:16:46,510 --> 01:16:49,990
those Doubles are gonna be my Angles here

1774
01:16:49,990 --> 01:16:52,250
they're in radians.

1775
01:16:52,250 --> 01:16:56,180
Angle itself is not a
VectorArithmetic thing

1776
01:16:56,180 --> 01:17:00,480
but obviously the angle in
radians is a Double so that is.

1777
01:17:00,480 --> 01:17:02,110
So this animatableData again,

1778
01:17:02,110 --> 01:17:03,870
I'm gonna use the same trick of having

1779
01:17:03,870 --> 01:17:06,936
the get and set. It's a little trickier

1780
01:17:06,936 --> 01:17:09,486
because we have to use
AnimatablePair here,

1781
01:17:09,486 --> 01:17:12,820
but AnimatablePair just has
two vars, first and second,

1782
01:17:12,820 --> 01:17:14,700
which return the first Animatable thing

1783
01:17:14,700 --> 01:17:17,060
on the second Animatable thing.

1784
01:17:17,060 --> 01:17:19,900
So for us, we're just gonna
return an AnimatablePair

1785
01:17:21,020 --> 01:17:24,950
and the first thing is gonna
be the startAngle's radians.

1786
01:17:26,590 --> 01:17:28,893
And the second one is the endAngle's,

1787
01:17:30,906 --> 01:17:32,580
angle radians.

1788
01:17:32,580 --> 01:17:34,770
That's getting our animatableData

1789
01:17:34,770 --> 01:17:37,750
and then setting it is
just setting our startAngle

1790
01:17:37,750 --> 01:17:42,160
to be an Angle whose radians are

1791
01:17:42,160 --> 01:17:46,850
this AnimatablePair's, which
is the newValue, dot first

1792
01:17:46,850 --> 01:17:49,660
and the endAngle

1793
01:17:49,660 --> 01:17:52,600
is an Angle, radians,

1794
01:17:52,600 --> 01:17:55,463
which is the AnimatablePair's second.

1795
01:17:56,930 --> 01:18:01,240
So here we have connected
up two of our vars

1796
01:18:01,240 --> 01:18:04,720
to this animation, piecewise animation

1797
01:18:04,720 --> 01:18:07,720
and that is it that is all we need to do.

1798
01:18:07,720 --> 01:18:10,020
Because it just means that
this Shape is gonna be

1799
01:18:10,020 --> 01:18:13,460
redrawn over and over during animation

1800
01:18:13,460 --> 01:18:15,410
with these two things being animated

1801
01:18:15,410 --> 01:18:17,100
because they're the
things are being sliced up

1802
01:18:17,100 --> 01:18:19,730
into little pieces by
the animation system.

1803
01:18:19,730 --> 01:18:22,000
That's what animatableData is all about.

1804
01:18:22,000 --> 01:18:24,210
Now, I told you this
animation system is elegant,

1805
01:18:24,210 --> 01:18:26,290
and it is, having just this one var

1806
01:18:26,290 --> 01:18:29,800
as being the only entry
point in both directions in

1807
01:18:29,800 --> 01:18:34,740
something to animate.
Pretty nice design, I think.

1808
01:18:34,740 --> 01:18:35,740
And I don't work for Apple

1809
01:18:35,740 --> 01:18:39,220
so I'm an independent
third party, in my opinion,

1810
01:18:39,220 --> 01:18:41,640
I think they did a good job of that.

1811
01:18:41,640 --> 01:18:45,140
All right, so now this Pie is animatable

1812
01:18:45,140 --> 01:18:48,950
and now our Model knows how to keep track

1813
01:18:48,950 --> 01:18:50,120
of the time remaining.

1814
01:18:50,120 --> 01:18:53,800
So let's take our View and
put those two things together.

1815
01:18:53,800 --> 01:18:56,220
So here's our Pie, right here

1816
01:18:56,220 --> 01:18:59,240
and we wanted, I'm gonna
leave the startAngle

1817
01:18:59,240 --> 01:19:02,650
always straight up, zero
degrees, up at the top.

1818
01:19:02,650 --> 01:19:05,100
I'm gonna vary my endAngle depending on

1819
01:19:05,100 --> 01:19:06,980
how much time I have remaining.

1820
01:19:06,980 --> 01:19:09,530
Let's start with a simple one, which is,

1821
01:19:09,530 --> 01:19:13,110
let's take the Card's bonus remaining,

1822
01:19:13,110 --> 01:19:17,300
which is the percentage bonus
remaining it has times 360.

1823
01:19:17,300 --> 01:19:20,560
And I'm going backwards because this Pie

1824
01:19:20,560 --> 01:19:22,460
is negatively going down to zero

1825
01:19:22,460 --> 01:19:25,580
I eventually want this to be down to zero.

1826
01:19:25,580 --> 01:19:26,693
See what that does.

1827
01:19:29,990 --> 01:19:33,150
All right, here we go
oh, it's not animating.

1828
01:19:33,150 --> 01:19:34,400
Huh, that's weird.

1829
01:19:34,400 --> 01:19:37,100
Oh, but I thought I saw something there.

1830
01:19:37,100 --> 01:19:41,060
Oh, look so it is actually
showing us the time remaining

1831
01:19:41,060 --> 01:19:43,660
because I had that card
up for about, that much,

1832
01:19:43,660 --> 01:19:46,470
and this is six seconds, I
set it to be to go around.

1833
01:19:46,470 --> 01:19:49,800
So I think that card was up
face-up for about four seconds

1834
01:19:49,800 --> 01:19:51,730
so it did but it didn't
actually animate it,

1835
01:19:51,730 --> 01:19:54,680
and then this one look, it
looks like all the time is there

1836
01:19:54,680 --> 01:19:56,650
but if I click away and then click back,

1837
01:19:56,650 --> 01:19:58,140
oh, actually I used up all the time

1838
01:19:58,140 --> 01:20:00,660
cause that card was
sitting face-up so long.

1839
01:19:58,140 --> 01:20:00,660
cause that card was
sitting face-up so long.

1840
01:20:00,660 --> 01:20:03,130
Now this one, I think was
only up for a little bit.

1841
01:20:03,130 --> 01:20:05,383
Yeah see, that was only a tiny bit.

1842
01:20:06,290 --> 01:20:09,550
This one just showed up,
so it's actually working

1843
01:20:09,550 --> 01:20:13,230
it's adjusting this, but
it's not animating it.

1844
01:20:13,230 --> 01:20:15,570
So how are we gonna animate it?

1845
01:20:15,570 --> 01:20:18,890
There's a bit of a
challenge to animate this

1846
01:20:18,890 --> 01:20:22,700
because what this is really
animating is this angle

1847
01:20:22,700 --> 01:20:27,700
going from where it is now,
like right here, around to zero.

1848
01:20:28,260 --> 01:20:31,250
And I told you that animation
only shows you things

1849
01:20:31,250 --> 01:20:32,970
that have already happened.

1850
01:20:32,970 --> 01:20:36,830
But when the card appears,
this clock starts going,

1851
01:20:36,830 --> 01:20:38,590
it hasn't gotten to zero yet.

1852
01:20:38,590 --> 01:20:41,210
So how do I start an
animation that's gonna have

1853
01:20:41,210 --> 01:20:44,230
this thing go to zero when
zero hasn't happened yet?

1854
01:20:44,230 --> 01:20:47,840
That's a little bit of a
conundrum a catch 22 there.

1855
01:20:47,840 --> 01:20:51,620
So this catch 22 is gonna prevent us

1856
01:20:51,620 --> 01:20:56,620
from using this bonusRemaining
directly from the Model.

1857
01:20:56,660 --> 01:20:58,780
Now if I ask the Model,

1858
01:20:58,780 --> 01:21:01,020
what's the bonus remaining percentage?

1859
01:21:01,020 --> 01:21:03,140
It'll tell me the right
answer it always does

1860
01:21:03,140 --> 01:21:04,600
that's the Model's job.

1861
01:21:04,600 --> 01:21:06,260
So the Model's doing its job

1862
01:21:06,260 --> 01:21:08,880
however, the Model is
not constantly changing.

1863
01:21:08,880 --> 01:21:10,570
Oh, there's 4.1 seconds left,

1864
01:21:10,570 --> 01:21:12,360
oh, I changed now there's
only four seconds,

1865
01:21:12,360 --> 01:21:15,080
oh, I changed now
there's 3.9 seconds left,

1866
01:21:15,080 --> 01:21:18,050
the Model can't be
doing that's ridiculous.

1867
01:21:18,050 --> 01:21:20,300
It's doing its job but it does it in a way

1868
01:21:20,300 --> 01:21:23,160
that it's not causing our UI to change

1869
01:21:23,160 --> 01:21:26,180
and animations only animate change.

1870
01:21:26,180 --> 01:21:28,770
We just can't use this
directly from the Model,

1871
01:21:28,770 --> 01:21:31,040
we still have to be in
sync with the Model,

1872
01:21:31,040 --> 01:21:33,560
but we can't use this directly.

1873
01:21:33,560 --> 01:21:35,470
So I'm gonna animate this angle

1874
01:21:35,470 --> 01:21:39,580
using my own little temporary var here

1875
01:21:39,580 --> 01:21:41,580
its gonna have to be writable.

1876
01:21:41,580 --> 01:21:43,450
I'm gonna have to sync
it up with the Model.

1877
01:21:43,450 --> 01:21:45,000
So it is gonna be an @State

1878
01:21:45,000 --> 01:21:47,540
as we talked about in the slides,

1879
01:21:47,540 --> 01:21:50,080
and it's private, it's just for me to use

1880
01:21:50,080 --> 01:21:54,400
so, var, I'm gonna call it
my animatedBonusRemaining.

1881
01:21:54,400 --> 01:21:56,720
We'll make it be a Double
the number of degrees

1882
01:21:56,720 --> 01:21:58,430
and of course it has to be initialized

1883
01:21:58,430 --> 01:22:00,430
because all vars have to be initialized

1884
01:22:00,430 --> 01:22:03,150
even the ones that are @State.

1885
01:22:03,150 --> 01:22:05,980
So I'm gonna use that
instead of the bonusRemaining

1886
01:22:05,980 --> 01:22:08,070
directly from the Model,

1887
01:22:08,070 --> 01:22:11,823
I'm going to use my
animatedBonusRemaining.

1888
01:22:13,120 --> 01:22:16,030
Now somehow I have to make
this be the right values

1889
01:22:16,030 --> 01:22:18,140
to cause the animation to happen.

1890
01:22:18,140 --> 01:22:19,720
The first thing that I have to do

1891
01:22:19,720 --> 01:22:21,800
is get it to be synced up with the Model.

1892
01:22:21,800 --> 01:22:24,320
This has to be synced up with the Model.

1893
01:22:24,320 --> 01:22:25,770
How am I gonna do that?

1894
01:22:25,770 --> 01:22:28,590
Well, really, when do I
want it to be synced up?

1895
01:22:28,590 --> 01:22:30,970
Every single time this
View comes on screen,

1896
01:22:30,970 --> 01:22:32,620
I want it to sync with the Model.

1897
01:22:33,500 --> 01:22:35,410
Now, when does this come on screen?

1898
01:22:35,410 --> 01:22:38,320
Right now it comes on
screen with its container

1899
01:22:38,320 --> 01:22:39,880
we don't get any transitions

1900
01:22:39,880 --> 01:22:42,320
if we don't know when that happens, etc.

1901
01:22:42,320 --> 01:22:44,650
So I'm gonna make it only be on screen

1902
01:22:44,650 --> 01:22:47,680
if my card isConsumingBonusTime.

1903
01:22:47,680 --> 01:22:51,750
So this is just a var I have
in my Model that tells me

1904
01:22:51,750 --> 01:22:54,920
whether a card is currently at the moment

1905
01:22:54,920 --> 01:22:56,410
consuming bonus time.

1906
01:22:56,410 --> 01:22:59,230
That means it's face-up,
it's not matched yet

1907
01:22:59,230 --> 01:23:01,810
there's some bonus time
remaining might be other things.

1908
01:23:01,810 --> 01:23:04,120
I don't care it's up
to my Model to tell me

1909
01:23:04,120 --> 01:23:07,160
whether bones time is
currently being consumed.

1910
01:23:07,160 --> 01:23:10,363
And if it is, then this
View is gonna be on screen.

1911
01:23:11,240 --> 01:23:14,020
Now, why do I only want
this to be on screen

1912
01:23:14,020 --> 01:23:15,900
when it's actually animating?

1913
01:23:15,900 --> 01:23:18,300
Well, because I'm using
this animated value

1914
01:23:18,300 --> 01:23:19,790
as the bonus remaining, okay?

1915
01:23:19,790 --> 01:23:22,280
That really, I only want to be doing that

1916
01:23:22,280 --> 01:23:23,790
when I'm actually animating

1917
01:23:23,790 --> 01:23:26,553
and also, it lets me use onAppear.

1918
01:23:27,820 --> 01:23:30,810
So you remember onAppear we
talked about in the slide.

1919
01:23:30,810 --> 01:23:33,790
This is a function that calls this closure

1920
01:23:33,790 --> 01:23:36,920
anytime this View appears on screen.

1921
01:23:36,920 --> 01:23:38,420
And that's exactly what I want

1922
01:23:38,420 --> 01:23:40,790
because every time this
thing appears on screen,

1923
01:23:40,790 --> 01:23:44,250
I'm gonna reset this my
bonus time remaining up here

1924
01:23:44,250 --> 01:23:46,300
to be what's in the Model.

1925
01:23:46,300 --> 01:23:48,450
So this View is always gonna start out

1926
01:23:48,450 --> 01:23:50,030
synced up with the Model,

1927
01:23:50,030 --> 01:23:51,950
then I can proceed to animate it,

1928
01:23:51,950 --> 01:23:54,020
but we got to get it synced up.

1929
01:23:54,020 --> 01:23:56,560
So let's do that in a
little function up here

1930
01:23:56,560 --> 01:23:59,393
another little private, call it this func.

1931
01:24:00,592 --> 01:24:05,190
startBonusTimeAnimation, let's say.

1932
01:24:05,190 --> 01:24:08,550
And the very first thing I
wanna do in here is to set

1933
01:24:08,550 --> 01:24:13,550
my animatedBonusRemaining
equal to what's in the Model.

1934
01:24:13,790 --> 01:24:15,000
So that I'm always in sync.

1935
01:24:15,000 --> 01:24:17,675
and always gonna call this thing,

1936
01:24:17,675 --> 01:24:19,930
startBonusTimeAnimation.

1937
01:24:19,930 --> 01:24:22,710
Every single time this
Pie comes on screen,

1938
01:24:22,710 --> 01:24:25,300
it's gonna sync up with
the Model, really important

1939
01:24:25,300 --> 01:24:29,090
if you're gonna be having
your own version of something

1940
01:24:29,090 --> 01:24:31,070
that's in the Model that
you want to animate at least

1941
01:24:31,070 --> 01:24:33,723
have it sync up when it
first comes on screen.

1942
01:24:34,760 --> 01:24:36,400
So now what do I need to do?

1943
01:24:36,400 --> 01:24:38,450
My Pie comes on screen, it's showing

1944
01:24:38,450 --> 01:24:40,200
the right amount of bonus time remaining,

1945
01:24:40,200 --> 01:24:43,690
but now it wants to animate
ticking down to zero.

1946
01:24:43,690 --> 01:24:46,050
So I'm gonna do exactly what I just said

1947
01:24:46,050 --> 01:24:48,270
animate ticking down to zero

1948
01:24:48,270 --> 01:24:50,370
withAnimation

1949
01:24:50,370 --> 01:24:52,403
let's use a linear animation.

1950
01:24:53,730 --> 01:24:56,173
Please tick down to zero.

1951
01:24:57,570 --> 01:25:00,690
I'm just animating my bonus remaining

1952
01:25:00,690 --> 01:25:02,330
ticking down to zero.

1953
01:25:02,330 --> 01:25:03,210
But wait a second,

1954
01:25:03,210 --> 01:25:06,540
how long is it gonna take
to do this animation?

1955
01:25:06,540 --> 01:25:10,150
Well, it better be however
much time is left, right,

1956
01:25:10,150 --> 01:25:12,260
I don't want it to tick
down to zero slower

1957
01:25:12,260 --> 01:25:14,250
or faster than the time remaining.

1958
01:25:14,250 --> 01:25:15,120
So I'm just gonna have

1959
01:25:15,120 --> 01:25:17,290
my animation's duration,

1960
01:25:17,290 --> 01:25:20,090
equal the Card's bonusTimeRemaining.

1961
01:25:20,090 --> 01:25:21,520
That's how many seconds are left,

1962
01:25:21,520 --> 01:25:23,900
this is the percentage left

1963
01:25:23,900 --> 01:25:27,572
and this is the number of seconds left.

1964
01:25:27,572 --> 01:25:29,770
That's it, so this is
really all I need to do.

1965
01:25:29,770 --> 01:25:33,630
I just have my own little
bonus time remaining here,

1966
01:25:33,630 --> 01:25:35,000
which I sync up to the Model

1967
01:25:35,000 --> 01:25:37,500
and then immediately start
animating towards zero.

1968
01:25:38,370 --> 01:25:40,540
If Pie stays around that long,

1969
01:25:40,540 --> 01:25:42,520
we're gonna see the animation
go all the way to zero.

1970
01:25:42,520 --> 01:25:44,520
If it stops consuming bonus time,

1971
01:25:44,520 --> 01:25:46,290
this View is gonna go away.

1972
01:25:46,290 --> 01:25:48,010
It won't have finished its animation maybe

1973
01:25:48,010 --> 01:25:51,380
but that's okay it's just
gonna disappear here.

1974
01:25:51,380 --> 01:25:54,800
Now, what if we're not
consuming bonus time,

1975
01:25:54,800 --> 01:25:57,080
like let's say the Cards are matched.

1976
01:25:57,080 --> 01:25:59,110
They've already been matched,
not consuming bonus time.

1977
01:25:59,110 --> 01:26:01,110
I actually still want pie up there,

1978
01:26:01,110 --> 01:26:03,560
I just don't want it to be animating.

1979
01:26:03,560 --> 01:26:05,990
That's easy, in the else case right here,

1980
01:26:05,990 --> 01:26:08,680
I'm gonna put a Pie there as well.

1981
01:26:08,680 --> 01:26:10,030
Now, this Pie,

1982
01:26:10,030 --> 01:26:11,620
we don't care when it appears

1983
01:26:11,620 --> 01:26:12,850
because we're not animating.

1984
01:26:12,850 --> 01:26:15,620
And it certainly can't use
this animatedBonusRemaining

1985
01:26:15,620 --> 01:26:17,250
that's what this Pie up here is about.

1986
01:26:17,250 --> 01:26:20,110
So let's just have it match up with

1987
01:26:20,110 --> 01:26:22,673
whatever it says in the Model.

1988
01:26:23,860 --> 01:26:26,030
Now, I don't like that
duplicated code here,

1989
01:26:26,030 --> 01:26:28,430
see this padding and
opacity on both of them

1990
01:26:28,430 --> 01:26:30,567
so let's take this out of here.

1991
01:26:30,567 --> 01:26:34,480
And instead, we'll use a
Group around this whole thing

1992
01:26:34,480 --> 01:26:37,790
to apply padding and opacity to it.

1993
01:26:37,790 --> 01:26:40,380
This hopefully should
cover all the bases here.

1994
01:26:40,380 --> 01:26:43,200
This is the Pie when it's
animating when it appears,

1995
01:26:43,200 --> 01:26:44,750
we sync up with the Model

1996
01:26:44,750 --> 01:26:46,960
and then started going towards zero with

1997
01:26:46,960 --> 01:26:48,430
however much time is left.

1998
01:26:48,430 --> 01:26:51,130
And if we're not consuming
bonus time we're not animating

1999
01:26:51,130 --> 01:26:52,760
then we'll just do a normal Pie

2000
01:26:52,760 --> 01:26:54,310
with the bonus remaining there.

2001
01:26:55,232 --> 01:26:56,132
See if that works.

2002
01:26:59,390 --> 01:27:01,050
All right, let's watch.

2003
01:27:01,050 --> 01:27:03,670
Whoo, look at that
animating over to this one

2004
01:27:03,670 --> 01:27:05,510
oh, and even matched.

2005
01:27:05,510 --> 01:27:07,490
This is a great example here because

2006
01:27:07,490 --> 01:27:09,220
this one matched as soon as I clicked it,

2007
01:27:09,220 --> 01:27:12,210
so I didn't use any of my
bonus time so that looks right

2008
01:27:12,210 --> 01:27:13,760
And then this one, as
soon as I had a match,

2009
01:27:13,760 --> 01:27:15,700
it switched over to
using this Pie down here

2010
01:27:15,700 --> 01:27:17,950
it's just showing me
how much I had remaining

2011
01:27:17,950 --> 01:27:20,000
when the thing matched.

2012
01:27:20,000 --> 01:27:20,842
Right, let's look at another one here,

2013
01:27:20,842 --> 01:27:24,890
ghost and this guy, let's
click away from these

2014
01:27:24,890 --> 01:27:26,210
and this will start and go back

2015
01:27:26,210 --> 01:27:28,380
and see if the bonus
time that was remaining

2016
01:27:28,380 --> 01:27:31,060
when we went face-down continues.

2017
01:27:31,060 --> 01:27:32,850
Whoo, it did.

2018
01:27:32,850 --> 01:27:34,653
Whoo okay,

2019
01:27:35,810 --> 01:27:38,390
see what's going on there, all right

2020
01:27:38,390 --> 01:27:39,240
simple as that.

2021
01:27:39,240 --> 01:27:44,240
Now, this was a little trickier to do than

2022
01:27:44,590 --> 01:27:45,810
some animations

2023
01:27:45,810 --> 01:27:49,050
but it is not uncommon to
have a situation like this

2024
01:27:49,886 --> 01:27:52,060
where your Model or
whatever your data source

2025
01:27:52,060 --> 01:27:53,880
can tell you what's going on,

2026
01:27:53,880 --> 01:27:56,040
but it's not constantly changing.

2027
01:27:56,040 --> 01:27:57,380
And that's why sometimes
you'll have to create

2028
01:27:57,380 --> 01:28:01,130
your own var here that
you can animate towards,

2029
01:28:01,130 --> 01:28:02,820
but make sure you sync
it up with the Model

2030
01:28:02,820 --> 01:28:04,393
before you do it.

2031
01:28:05,360 --> 01:28:08,180
Okay, that is it for animation today

2032
01:28:08,180 --> 01:28:10,560
we covered a lot of ground.

2033
01:28:10,560 --> 01:28:12,910
We talked about implicit animations,

2034
01:28:12,910 --> 01:28:16,710
where we had the somersaulting
emojis being so excited

2035
01:28:16,710 --> 01:28:17,870
that they had a match.

2036
01:28:17,870 --> 01:28:20,350
We had a couple of explicit animations

2037
01:28:20,350 --> 01:28:22,880
we did one right here,
when we chose a card

2038
01:28:22,880 --> 01:28:25,533
we did another one right
here when we did a new game.

2039
01:28:26,450 --> 01:28:30,500
We also showed animating ViewModifiers

2040
01:28:30,500 --> 01:28:33,120
we had our card here be animating,

2041
01:28:33,120 --> 01:28:36,800
we even showed how to not
have Views coming and going

2042
01:28:36,800 --> 01:28:39,620
if we didn't want them coming and going,

2043
01:28:39,620 --> 01:28:41,140
we animated our Shape

2044
01:28:42,200 --> 01:28:43,880
and all we had to do there was say

2045
01:28:43,880 --> 01:28:46,930
what data inside of our
Shape is animatable,

2046
01:28:46,930 --> 01:28:49,990
which in our case was the
starting end angle over here.

2047
01:28:49,990 --> 01:28:51,800
And we also did some transitions, right,

2048
01:28:51,800 --> 01:28:54,510
we had this scale transition
so that when cards match,

2049
01:28:54,510 --> 01:28:55,630
they would disappear.

2050
01:28:55,630 --> 01:28:58,440
By the way we could do the
similar kind of transitions

2051
01:28:58,440 --> 01:29:01,440
with these Pies up here
if we put, for example,

2052
01:29:01,440 --> 01:29:04,160
a transition on the Pie of .scale,

2053
01:29:04,160 --> 01:29:06,450
then when our Pie appears,

2054
01:29:09,280 --> 01:29:12,510
it kind of zooms in to kind of a good look

2055
01:29:12,510 --> 01:29:13,490
kind of zoomed in.

2056
01:29:13,490 --> 01:29:16,070
If we don't have scale, I don't
know if you noticed before,

2057
01:29:16,070 --> 01:29:18,007
but it was actually kind of fading in

2058
01:29:18,007 --> 01:29:20,360
and maybe we might want to
say we don't want any of that

2059
01:29:20,360 --> 01:29:23,820
and we're just gonna use
an identity transition

2060
01:29:23,820 --> 01:29:26,398
and then this Pie, when it comes and goes,

2061
01:29:26,398 --> 01:29:28,790
it's just gonna appear. Which
is fine because it's usually

2062
01:29:28,790 --> 01:29:30,890
happens when the card is face-down

2063
01:29:30,890 --> 01:29:32,560
or it's switching between two Pies

2064
01:29:32,560 --> 01:29:36,463
that have the exact same
value if we are matching.

2065
01:29:37,690 --> 01:29:39,000
That is it for animation,

2066
01:29:39,000 --> 01:29:40,560
hopefully, that's all
you'll ever need to know

2067
01:29:40,560 --> 01:29:41,800
about animation.

2068
01:29:41,800 --> 01:29:45,040
I mean, of course animation
is a powerful subsystem,

2069
01:29:45,040 --> 01:29:47,500
we didn't have to add very
many lines of code to our app

2070
01:29:47,500 --> 01:29:49,960
to make it do all these crazy things.

2071
01:29:49,960 --> 01:29:52,240
But I haven't shown you every possible way

2072
01:29:52,240 --> 01:29:54,680
you could use in animation by any means.

2073
01:29:54,680 --> 01:29:55,830
So there's still a lot to learn

2074
01:29:55,830 --> 01:29:57,593
but to let you know the basics now.

2075
01:29:58,480 --> 01:30:00,560
Next week, I'm not sure
exactly what we're gonna do

2076
01:29:58,480 --> 01:30:00,560
Next week, I'm not sure
exactly what we're gonna do

2077
01:30:00,560 --> 01:30:03,420
next week, either we're
gonna do some gestures,

2078
01:30:03,420 --> 01:30:06,840
possibly, you know, pinch
gestures and things like that

2079
01:30:06,840 --> 01:30:09,410
or we might actually do

2080
01:30:09,410 --> 01:30:13,070
TextFields and Pickers
and I saw that question

2081
01:30:13,070 --> 01:30:14,607
on the class forums about that,

2082
01:30:14,607 --> 01:30:15,960
and maybe we'll do that.

2083
01:30:15,960 --> 01:30:19,120
We're not exactly quite sure
where we're gonna go next week

2084
01:30:19,120 --> 01:30:21,593
but stay tuned and you'll find out then,

2085
01:30:22,430 --> 01:30:25,130
- [Narrator] For more, please
visit us at stanford.edu

